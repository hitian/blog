<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>å“ˆå“ˆå“ˆ</title><link>https://hitian.info/</link><description>Recent content on å“ˆå“ˆå“ˆ</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Sat, 13 Aug 2022 13:44:43 +0800</lastBuildDate><atom:link href="https://hitian.info/index.xml" rel="self" type="application/rss+xml"/><item><title>arch linux install note</title><link>https://hitian.info/post/arch-linux-install/</link><pubDate>Sat, 13 Aug 2022 13:44:43 +0800</pubDate><guid>https://hitian.info/post/arch-linux-install/</guid><description>&lt;p>arch linux install note&lt;/p>
&lt;h1 id="pre-installation">Pre-installation&lt;/h1>
&lt;p>verify image signature&lt;/p>
&lt;p>&lt;code>gpg --keyserver-options auto-key-retrieve --verify archlinux-version-x86_64.iso.sig&lt;/code>&lt;/p>
&lt;h2 id="boot-option">Boot Option&lt;/h2>
&lt;p>before boot up, update BIOS Boot Options to EFI&lt;/p>
&lt;h2 id="install">Install&lt;/h2>
&lt;h3 id="partition-disk">partition disk&lt;/h3>
&lt;p>list disks &lt;code>fdisk -l&lt;/code>&lt;/p>
&lt;p>use fdisk to modify disk partition tables&lt;/p>
&lt;p>&lt;code>fdisk /dev/sda&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://hitian.info/assets/images/202208/archlinux-fdisk.png" alt="archlinux-fdisk" />&lt;/p>
&lt;p>example:&lt;/p>
&lt;ul>
&lt;li>500 MiB for EFI system partition&lt;/li>
&lt;li>2048 MiB for Linux swap&lt;/li>
&lt;li>remainder for Linux root partition&lt;/li>
&lt;/ul>
&lt;p>step:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">g &lt;span class="c1"># create a new empty GPT partition table&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n &lt;span class="c1"># create 1st partition&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">1&lt;/span> &lt;span class="c1"># default[1] first partition&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># default[2048] first sector&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+500M &lt;span class="c1"># first partition size&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n &lt;span class="c1"># create 2nd partition&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">2&lt;/span> &lt;span class="c1"># default[2]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># default first sector&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+2048M &lt;span class="c1"># 2nd partition size&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n &lt;span class="c1"># create root partition&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># default[3]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># default first sector&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># default size&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">t &lt;span class="c1"># change partition type&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">1&lt;/span> &lt;span class="c1"># first partition&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">1&lt;/span> &lt;span class="c1"># partition type or alias, type 1: EFI System&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">t &lt;span class="c1"># change partition type&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">2&lt;/span> &lt;span class="c1"># 2nd partition&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">19&lt;/span> &lt;span class="c1"># partition type or alias, type 19:Linux swap&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">w &lt;span class="c1"># save&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>check partition&lt;/p>
&lt;p>&lt;code>fdisk -l&lt;/code>&lt;/p>
&lt;h3 id="format-partition">format partition&lt;/h3>
&lt;ol>
&lt;li>first partition EFI system partition to FAT32&lt;/li>
&lt;/ol>
&lt;p>&lt;code>mkfs.fat -F 32 /dev/sda1&lt;/code>&lt;/p>
&lt;ol start="2">
&lt;li>2nd partition swap to swap&lt;/li>
&lt;/ol>
&lt;p>&lt;code>mkswap /dev/sda2&lt;/code>&lt;/p>
&lt;ol start="3">
&lt;li>3rd partition root to ext4&lt;/li>
&lt;/ol>
&lt;p>&lt;code>mkfs.ext4 /dev/sda3&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://hitian.info/assets/images/202208/archlinux-partition_format.png" alt="archlinux-partition_format.png" />&lt;/p>
&lt;h3 id="mount-disk">Mount disk&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># mount root partition to /mnt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount /dev/sda3 /mnt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># mount EFI partition to /mnt/boot&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mount --mkdir /dev/sda1 /mnt/boot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#create swap&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">swapon /dev/sda2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="install-1">Install&lt;/h3>
&lt;h4 id="change-download-mirrors-for-mainland-china-user">change download mirrors for Mainland China user&lt;/h4>
&lt;p>edit &lt;code>/etc/pacman.d/mirrorlist&lt;/code>&lt;/p>
&lt;p>add&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">Server = https://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>to the top of Server list&lt;/p>
&lt;p>&lt;img src="https://hitian.info/assets/images/202208/archlinux-package-mirror.png" alt="archlinux-package-mirror.png" />&lt;/p>
&lt;p>update cache&lt;/p>
&lt;p>&lt;code>pacman -Syy&lt;/code>&lt;/p>
&lt;h5 id="install-linux-base">install linux base&lt;/h5>
&lt;p>&lt;code>pacstrap /mnt base linux linux-firmware&lt;/code>&lt;/p>
&lt;h4 id="configure">Configure&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># generate fstab&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">genfstab -U /mnt &amp;gt;&amp;gt; /mnt/etc/fstab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># chroot&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">arch-chroot /mnt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># set timezone&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># install package&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pacman -S nano netctl dhcpcd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Localization&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;en_US.UTF-8 UTF-8&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> tee -a /etc/locale.gen
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">locale-gen
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;LANG=en_US.UTF-8&amp;#34;&lt;/span> &amp;gt; /etc/locale.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># hostname&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;archlinux&amp;#34;&lt;/span> &amp;gt; /etc/hostname
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># set root&amp;#39;s password&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">passwd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="boot-loader">Boot loader&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># install package grub and efibootmgr&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pacman -S grub efibootmgr
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir /boot/grub
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">grub-mkconfig &amp;gt; /boot/grub/grub.cfg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># install grub&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">grub-install --efi-directory&lt;span class="o">=&lt;/span>/boot --target&lt;span class="o">=&lt;/span>x86_64-efi /dev/sda
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># reboot to archlinux&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">reboot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="setup-network">setup network&lt;/h2>
&lt;h3 id="static-ip-address-using-netctl">Static IP Address using &lt;code>netctl&lt;/code>&lt;/h3>
&lt;h4 id="check-network-devices">check network devices&lt;/h4>
&lt;p>&lt;code>ip link&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">1: lo: &amp;lt;LOOPBACK,UP,LOWER_UP&amp;gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2: ens33: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> link/ether 00:0c:29:19:2b:bf brd ff:ff:ff:ff:ff:ff
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> altname enp2s1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>network device name is &lt;code>ens33&lt;/code>&lt;/p>
&lt;h4 id="configure-1">configure&lt;/h4>
&lt;p>copy example file to etc&lt;/p>
&lt;p>&lt;code>cp /etc/netctl/examples/ethernet-static /etc/netctl/ens33&lt;/code>&lt;/p>
&lt;p>edit &lt;code>/etc/netctl/ens33&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">Description=&amp;#39;A basic static ethernet connection&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Interface=eth0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Connection=ethernet
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IP=static
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Address=(&amp;#39;192.168.1.23/24&amp;#39; &amp;#39;192.168.1.87/24&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#Routes=(&amp;#39;192.168.0.0/24 via 192.168.1.2&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Gateway=&amp;#39;192.168.1.1&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DNS=(&amp;#39;192.168.1.1&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## For IPv6 autoconfiguration
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#IP6=stateless
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## For IPv6 static address configuration
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#IP6=static
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#Address6=(&amp;#39;1234:5678:9abc:def::1/64&amp;#39; &amp;#39;1234:3456::123/96&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#Routes6=(&amp;#39;abcd::1234&amp;#39;)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#Gateway6=&amp;#39;1234:0:123::abcd&amp;#39;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>stop dhcp client&lt;/p>
&lt;p>&lt;code>systemctl disable --now dhcpcd&lt;/code>&lt;/p>
&lt;p>setup auto start&lt;/p>
&lt;p>&lt;code>netctl enable ens33&lt;/code>&lt;/p>
&lt;p>start&lt;/p>
&lt;p>&lt;code>netctl start ens33&lt;/code>&lt;/p>
&lt;h3 id="dynamic-ip-address">Dynamic IP Address&lt;/h3>
&lt;p>copy example configure file&lt;/p>
&lt;p>&lt;code>cp /etc/netctl/examples/ethernet-dhcp /etc/netctl/enp2s1&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-plain" data-lang="plain">&lt;span class="line">&lt;span class="cl">Description=&amp;#39;A basic dhcp ethernet connection&amp;#39;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Interface=enp2s1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Connection=ethernet
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IP=dhcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#DHCPClient=dhcpcd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#DHCPReleaseOnStop=no
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## for DHCPv6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#IP6=dhcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#DHCP6Client=dhclient
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">## for IPv6 autoconfiguration
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">#IP6=stateless
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>enable and start dhcp client&lt;/p>
&lt;p>&lt;code>systemctl enable --now dhcpcd&lt;/code>&lt;/p>
&lt;h2 id="post-install">Post-install&lt;/h2>
&lt;h3 id="add-user">add user&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">useradd --create-home tian
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="add-user-to-sudoers">add user to sudoers&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">usermod -aG wheel tian
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># usermod --append --groups wheel tian&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>update sudoers file&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">pacman -S sudo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">visudo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>uncomment the following line&lt;/p>
&lt;p>&lt;code>%wheel ALL=(ALL) ALL&lt;/code>&lt;/p>
&lt;p>remove from sudoers&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">gpasswd -d tian wheel
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="other-package-for-manage">other package for manage&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pacman -S net-tools dnsutils
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Setup Ubuntu for Microsoft Remote Desktop</title><link>https://hitian.info/post/setup-ubuntu-for-microsoft-remote-desktop/</link><pubDate>Sun, 12 Sep 2021 14:15:39 +0800</pubDate><guid>https://hitian.info/post/setup-ubuntu-for-microsoft-remote-desktop/</guid><description>&lt;p>è®© ubuntu 20.04 æ”¯æŒ &lt;code>Microsoft Remote Desktop&lt;/code> è¿œç¨‹æ¡Œé¢è¿æ¥&lt;/p>
&lt;h3 id="å®‰è£…ä¾èµ–">å®‰è£…ä¾èµ–&lt;/h3>
&lt;p>è¿™é‡Œå®‰è£…äº†æ¡Œé¢ &lt;code>xfce4&lt;/code> , ä¸ªäººæ„Ÿè§‰ubuntuè‡ªå¸¦çš„&lt;code>GNOME 3&lt;/code>å¹¶ä¸æ˜¯å¾ˆæ–¹ä¾¿è¿œç¨‹æ¡Œé¢ä½¿ç”¨ğŸ˜¶&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt install xrdp xorg xfce4 xfce4-goodies dbus-x11 x11-xserver-utils xfce4-terminal
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="è®¾ç½®æœåŠ¡å’Œé…ç½®">è®¾ç½®æœåŠ¡å’Œé…ç½®&lt;/h3>
&lt;p>å°†æ¡Œé¢æ›´æ”¹ä¸º &lt;code>xfce&lt;/code>, ç¼–è¾‘æ–‡ä»¶ &lt;code>/etc/xrdp/startwm.sh&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å°†è¿™ä¸¤è¡Œæ³¨é‡Š&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#test -x /etc/X11/Xsession &amp;amp;&amp;amp; exec /etc/X11/Xsession&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#exec /bin/sh /etc/X11/Xsession&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ–°å¢&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exec&lt;/span> startxfce4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è®¾ç½®xsession&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> xfce4-session &amp;gt; ~/.xsession
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="è®¾ç½®-xrdp-è‡ªå¯åŠ¨å¹¶é‡å¯">è®¾ç½® xrdp è‡ªå¯åŠ¨å¹¶é‡å¯&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo systemctl &lt;span class="nb">enable&lt;/span> --now xrdp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl restart xrdp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="å®‰è£…æ³¨æ„">å®‰è£…æ³¨æ„&lt;/h2>
&lt;p>xrdp é»˜è®¤å¼€æ”¾ &lt;code>3389/TCP&lt;/code> åˆ°æ‰€æœ‰çš„ç½‘å¡, å¦‚æœè¦è·¨å…¬ç½‘ä½¿ç”¨, æœ€å¥½ä½¿ç”¨ufwé™åˆ¶ä¸€ä¸‹å¯ä»¥è¿æ¥çš„ipæ®µ, å¦å¤–ä¿®æ”¹é»˜è®¤çš„ç«¯å£ä¹Ÿèƒ½å‡å°‘è¢«è¯•æ¢çš„æ¦‚ç‡&lt;/p></description></item><item><title>macOS tips for developer</title><link>https://hitian.info/post/macos-developer-tips/</link><pubDate>Fri, 10 Sep 2021 14:03:48 +0800</pubDate><guid>https://hitian.info/post/macos-developer-tips/</guid><description>&lt;h1 id="alias">Alias&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">alias&lt;/span> &lt;span class="nv">show_tcp_port&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;lsof -nP -iTCP&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">alias&lt;/span> &lt;span class="nv">show_tcp_port_listen&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;lsof -nP -iTCP | grep LISTEN&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="disable-ds_store-on-network-storage">disable .DS_Store on network storage&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">defaults write com.apple.desktopservices DSDontWriteNetworkStores &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="disable-gatekepper-for-binary-exec">disable gatekepper for binary exec&lt;/h1>
&lt;p>e.g. perforce command &lt;code>p4&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tian@mac-mini ~ % xattr -p com.apple.quarantine &lt;span class="sb">`&lt;/span>which p4&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">0082&lt;span class="p">;&lt;/span>5fb2322c&lt;span class="p">;&lt;/span>Safari&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tian@mac-mini ~ % xattr -d com.apple.quarantine &lt;span class="sb">`&lt;/span>which p4&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xattr: &lt;span class="o">[&lt;/span>Errno 13&lt;span class="o">]&lt;/span> Permission denied: &lt;span class="s1">&amp;#39;/usr/local/bin/p4&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tian@mac-mini ~ % sudo xattr -d com.apple.quarantine &lt;span class="sb">`&lt;/span>which p4&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Password:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tian@mac-mini ~ % xattr -p com.apple.quarantine &lt;span class="sb">`&lt;/span>which p4&lt;span class="sb">`&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xattr: /usr/local/bin/p4: No such xattr: com.apple.quarantine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tian@mac-mini ~ %
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="create-macos-install-usb-disk">create macOS install usb disk&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo /Applications/Install&lt;span class="se">\ &lt;/span>macOS&lt;span class="se">\ &lt;/span>Big&lt;span class="se">\ &lt;/span>Sur.app/Contents/Resources/createinstallmedia --volume /Volumes/UDISK --applicationpath /Applications/Install&lt;span class="se">\ &lt;/span>macOS&lt;span class="se">\ &lt;/span>Big&lt;span class="se">\ &lt;/span>Sur.app
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>ä¿®å¤macOSä¸Šçš„Firefoxåœ¨å…¨å±æ—¶ä¼šéšè—æ‰€æœ‰å±å¹•èœå•æ çš„é—®é¢˜</title><link>https://hitian.info/post/fix-firefox-macos-full-sceen/</link><pubDate>Sat, 01 Aug 2020 00:00:00 +0000</pubDate><guid>https://hitian.info/post/fix-firefox-macos-full-sceen/</guid><description>&lt;p>é’ˆå¯¹Firefox for macOS 79.0 (64-bit)&lt;/p>
&lt;p>å¦‚æœmacOSæœ‰å¤šå—å±å¹•ï¼Œ åœ¨é»˜è®¤é…ç½®ä¸‹ firefox å…¨å±æ—¶ä¼šéšè—æ‰€æœ‰å±å¹•çš„èœå•æ ï¼Œéœ€è¦æ‰‹åŠ¨æ”¹é…ç½®ä¿®å¤ã€‚&lt;/p>
&lt;ol>
&lt;li>åœ°å€æ è¾“å…¥å¹¶æ‰“å¼€ &lt;code>about:config&lt;/code>&lt;/li>
&lt;li>å¿½ç•¥é£é™©æç¤ºå¹¶æœç´¢ &lt;code>full-screen-api&lt;/code>&lt;/li>
&lt;li>åŒå‡» &lt;code>full-screen-api.macos-native-full-screen&lt;/code> å°†é…ç½®æ›´æ”¹ä¸º &lt;code>true&lt;/code>&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://hitian.info/assets/images/202008/2020-08-01-fix-firefox-macos-full-sceen.markdown.png" alt="firefox full screen api config" />&lt;/p></description></item><item><title>Raspberry Pi note</title><link>https://hitian.info/post/raspberry-pi-note/</link><pubDate>Sun, 25 Aug 2019 00:00:00 +0000</pubDate><guid>https://hitian.info/post/raspberry-pi-note/</guid><description>&lt;h1 id="raspberry-pi-ç¬”è®°">Raspberry Pi ç¬”è®°&lt;/h1>
&lt;h2 id="bç³»åˆ—ç¡¬ä»¶å‚æ•°">Bç³»åˆ—ç¡¬ä»¶å‚æ•°&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Version&lt;/th>
&lt;th>&lt;/th>
&lt;th>CPU&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>Arch&lt;/th>
&lt;th>RAM&lt;/th>
&lt;th>USB&lt;/th>
&lt;th>Boot from USB&lt;/th>
&lt;th>Ethernet&lt;/th>
&lt;th>Wireless&lt;/th>
&lt;th>Release&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1&lt;/td>
&lt;td>B&lt;/td>
&lt;td>BCM2835&lt;/td>
&lt;td>700MHz&lt;/td>
&lt;td>32-bit&lt;/td>
&lt;td>ARM1176JZFS&lt;/td>
&lt;td>256/512MB&lt;/td>
&lt;td>USB2 * 2&lt;/td>
&lt;td>No&lt;/td>
&lt;td>10/100Â Mbit/s&lt;/td>
&lt;td>-&lt;/td>
&lt;td>2012 Apr~Jun&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>1&lt;/td>
&lt;td>B+&lt;/td>
&lt;td>BCM2835&lt;/td>
&lt;td>700MHz&lt;/td>
&lt;td>32-bit&lt;/td>
&lt;td>ARM1176JZFS&lt;/td>
&lt;td>256/512MB&lt;/td>
&lt;td>USB2 * 4&lt;/td>
&lt;td>No&lt;/td>
&lt;td>10/100Â Mbit/s&lt;/td>
&lt;td>-&lt;/td>
&lt;td>2014 Jul&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2&lt;/td>
&lt;td>B v1.1&lt;/td>
&lt;td>BCM2836&lt;/td>
&lt;td>900MHz&lt;/td>
&lt;td>32-bit quad-core&lt;/td>
&lt;td>ARM Cortex-A7&lt;/td>
&lt;td>1GB&lt;/td>
&lt;td>USB2 * 4&lt;/td>
&lt;td>No&lt;/td>
&lt;td>10/100Â Mbit/s&lt;/td>
&lt;td>-&lt;/td>
&lt;td>2015 Feb&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2&lt;/td>
&lt;td>B v1.2&lt;/td>
&lt;td>BCM2837&lt;/td>
&lt;td>900MHz ~ 1.2GHz&lt;/td>
&lt;td>64-bit quad-core&lt;/td>
&lt;td>ARM Cortex-A53&lt;/td>
&lt;td>1GB&lt;/td>
&lt;td>USB2 * 4&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>10/100Â Mbit/s&lt;/td>
&lt;td>-&lt;/td>
&lt;td>2016 Oct&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>3&lt;/td>
&lt;td>B&lt;/td>
&lt;td>BCM2837&lt;/td>
&lt;td>1.2GHz&lt;/td>
&lt;td>64-bit quad-core&lt;/td>
&lt;td>ARM Cortex-A53&lt;/td>
&lt;td>1GB&lt;/td>
&lt;td>USB2 * 4&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>10/100Â Mbit/s&lt;/td>
&lt;td>2.4G WIFI + Bluetooth 4.1&lt;/td>
&lt;td>2016 Feb&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>3&lt;/td>
&lt;td>B+&lt;/td>
&lt;td>BCM2837B0&lt;/td>
&lt;td>1.4GHz&lt;/td>
&lt;td>64-bit quad-core&lt;/td>
&lt;td>ARM Cortex-A53&lt;/td>
&lt;td>1GB&lt;/td>
&lt;td>USB2 * 4&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>10/100/300 Mbit/s&lt;/td>
&lt;td>2.4/5G WIFI + Bluetooth 4.2 LS&lt;/td>
&lt;td>2018 Mar&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>4&lt;/td>
&lt;td>B&lt;/td>
&lt;td>BCM2711&lt;/td>
&lt;td>1.5GHz&lt;/td>
&lt;td>64-bit quad-core&lt;/td>
&lt;td>ARM Cortex-A72&lt;/td>
&lt;td>1/2/4/8GB&lt;/td>
&lt;td>USB2 * 2 + USB3 * 2&lt;/td>
&lt;td>Yes&lt;/td>
&lt;td>10/100/1000 Mbit/s&lt;/td>
&lt;td>2.4/5G WIFI + Bluetooth 5.0&lt;/td>
&lt;td>2019 Jun&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="å¸¸ç”¨çš„ç³»ç»Ÿ">å¸¸ç”¨çš„ç³»ç»Ÿ&lt;/h2>
&lt;h3 id="å®˜æ–¹raspbian-ç³»ç»Ÿ">å®˜æ–¹raspbian ç³»ç»Ÿ&lt;/h3>
&lt;p>&lt;a class="link" href="https://www.raspberrypi.org/downloads/raspbian/" target="_blank" rel="noopener"
>https://www.raspberrypi.org/downloads/raspbian/&lt;/a>&lt;/p>
&lt;p>å¯ç”¨äºæ‰€æœ‰å‹å·çš„raspberrypi&lt;/p>
&lt;p>ä¼˜ç‚¹&lt;/p>
&lt;ul>
&lt;li>åŸºäºdebianï¼Œä½¿ç”¨ apt åŒ…ç®¡ç†å·¥å…·ï¼Œ ç»å¸¸ä½¿ç”¨ Ubuntu çš„è¯ï¼Œ è¿˜æ˜¯æ¯”è¾ƒé¡ºæ‰‹çš„&lt;/li>
&lt;li>åŒ…å« raspi-config (Raspberry Pi Software Configuration Tool), æ–¹ä¾¿è°ƒæ•´å‚æ•°&lt;/li>
&lt;/ul>
&lt;p>ç¼ºç‚¹&lt;/p>
&lt;ul>
&lt;li>ç›®å‰åªæœ‰ 32-bit çš„ç³»ç»Ÿ(armhf)&lt;/li>
&lt;/ul>
&lt;p>&lt;code>1ã€2ä»£æ¨èä½¿ç”¨&lt;/code>&lt;/p>
&lt;h3 id="ubuntu-mate">Ubuntu MATE&lt;/h3>
&lt;p>&lt;a class="link" href="https://ubuntu-mate.org/raspberry-pi/" target="_blank" rel="noopener"
>https://ubuntu-mate.org/raspberry-pi/&lt;/a>&lt;/p>
&lt;p>Model B 2, 3 or 3+ é€‚ç”¨&lt;/p>
&lt;p>ä¼˜ç‚¹&lt;/p>
&lt;ul>
&lt;li>åŸºäº Ubuntuï¼Œä½¿ç”¨ apt åŒ…ç®¡ç†å·¥å…·&lt;/li>
&lt;li>ä½¿ç”¨ Ubuntu meta çš„æ¡Œé¢ï¼Œå¹²å‡€ï¼Œä¸ªäººåå¥½&lt;/li>
&lt;/ul>
&lt;p>ç¼ºç‚¹&lt;/p>
&lt;ul>
&lt;li>åŒæ ·åªæœ‰ 32-bit çš„ç³»ç»Ÿ(armhf)&lt;/li>
&lt;/ul>
&lt;p>&lt;code>æ¨èéœ€è¦å¹²å‡€æ¡Œé¢+æµè§ˆå™¨çš„ç”¨æˆ·ä½¿ç”¨&lt;/code>&lt;/p>
&lt;h3 id="osmc">OSMC&lt;/h3>
&lt;p>è¿™æ˜¯ä¸€ä¸ª &lt;code>Kodi&lt;/code> çš„å‘è¡Œç‰ˆæœ¬ï¼Œç”¨æ ‘è“æ´¾å°†å®¶é‡Œçš„ç”µè§†å˜æˆåª’ä½“ä¸­å¿ƒï¼Œæ’­æ”¾å†…ç½‘ä¸‹è½½å¥½çš„è§†é¢‘ï¼Œæˆ–è€…å®‰è£…æ’ä»¶ç›´æ¥æ’­æ”¾ç½‘ç»œè§†é¢‘&lt;/p>
&lt;p>&lt;a class="link" href="https://osmc.tv/download/" target="_blank" rel="noopener"
>https://osmc.tv/download/&lt;/a>&lt;/p>
&lt;p>å¯ç”¨äºæ‰€æœ‰å‹å·çš„raspberrypiï¼Œ å‹æƒ…æç¤ºï¼Œ æœ€å¥½åœ¨æœ‰æœ‰çº¿ç½‘ç»œæ¥å£(USBç½‘å¡ä¹Ÿå¯ä»¥)çš„piä¸Šä½¿ç”¨ï¼Œ ä½¿ç”¨2.4G Wi-Fiæ’­æ”¾é«˜æ¸…è§†é¢‘ç»å¯¹ä¼šå¡çš„&lt;/p>
&lt;h3 id="ubuntu-server">Ubuntu Server&lt;/h3>
&lt;p>ä½œä¸ºæœåŠ¡å™¨ä½¿ç”¨æ¨è&lt;/p>
&lt;p>Ubuntu 20.04 LTS (Focal Fossa)
&lt;a class="link" href="http://cdimage.ubuntu.com/releases/20.04/release/" target="_blank" rel="noopener"
>http://cdimage.ubuntu.com/releases/20.04/release/&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://cdimage.ubuntu.com/releases/20.04/release/ubuntu-20.04-preinstalled-server-armhf&amp;#43;raspi.img.xz" target="_blank" rel="noopener"
>Raspberry Pi Generic (Hard-Float) preinstalled server image&lt;/a>&lt;/p>
&lt;p>For 32-bit&lt;/p>
&lt;p>&lt;a class="link" href="http://cdimage.ubuntu.com/releases/20.04/release/ubuntu-20.04-preinstalled-server-arm64&amp;#43;raspi.img.xz" target="_blank" rel="noopener"
>Raspberry Pi Generic (64-bit ARM) preinstalled server image&lt;/a>&lt;/p>
&lt;p>For 64-bit&lt;/p>
&lt;h2 id="ç³»ç»Ÿé•œåƒæ–‡ä»¶å†™å…¥sdtfå¡">ç³»ç»Ÿé•œåƒæ–‡ä»¶å†™å…¥SD/TFå¡&lt;/h2>
&lt;h3 id="ç®€å•æ¨¡å¼">ç®€å•æ¨¡å¼&lt;/h3>
&lt;p>æ¨èæ–°æ‰‹ä½¿ç”¨&lt;code>Etcher&lt;/code> &lt;a class="link" href="https://github.com/balena-io/etcher/releases" target="_blank" rel="noopener"
>https://github.com/balena-io/etcher/releases&lt;/a>&lt;/p>
&lt;p>Windows, linux, macOS å¯ç”¨&lt;/p>
&lt;h3 id="å‘½ä»¤è¡Œæ¨¡å¼">å‘½ä»¤è¡Œæ¨¡å¼&lt;/h3>
&lt;p>&lt;code>sudo dd if=2019-07-10-raspbian-buster-full.img of=/dev/rdisk2 bs=1m&lt;/code>&lt;/p>
&lt;p>linux, macOS å¯ç”¨ï¼Œä¸åŒç³»ç»Ÿä¸Šç›®æ ‡ç£ç›˜çš„æ ¼å¼å¯èƒ½ä¸å¤ªä¸€æ ·ï¼ŒmacOS æ³¨æ„ &lt;code>/dev/disk2&lt;/code> å’Œ &lt;code>/dev/rdisk2&lt;/code> çš„åŒºåˆ«ï¼Œ&lt;code>rdisk&lt;/code>å†™å…¥é€Ÿåº¦ä¼šå¿«10å€ä»¥ä¸Š&lt;/p>
&lt;p>æ³¨æ„ï¼Œddä¼šè¦†ç›–ç£ç›˜ä¸Šçš„æ•°æ®ï¼Œè°¨æ…æ“ä½œã€‚&lt;/p>
&lt;h3 id="ä½¿ç”¨usbç¡¬ç›˜å¯åŠ¨">ä½¿ç”¨USBç¡¬ç›˜å¯åŠ¨&lt;/h3>
&lt;p>å‚è€ƒå®˜æ–¹è¯´æ˜ &lt;a class="link" href="https://www.raspberrypi.org/documentation/hardware/raspberrypi/bootmodes/msd.md" target="_blank" rel="noopener"
>https://www.raspberrypi.org/documentation/hardware/raspberrypi/bootmodes/msd.md&lt;/a>&lt;/p>
&lt;p>ç®€å•çš„è¯´å°±æ˜¯ 3 B+ åŠä»¥ä¸Šç¡¬ä»¶ç‰ˆæœ¬å¯ä»¥ç›´æ¥ä»USBè®¾å¤‡å¯åŠ¨&lt;/p>
&lt;p>ä¹‹å‰çš„ç¡¬ä»¶ç‰ˆæœ¬éœ€è¦æ‰‹åŠ¨æ›´æ”¹å¯åŠ¨æ¨¡å¼&lt;/p>
&lt;h2 id="å¸¸ç”¨å‘½ä»¤">å¸¸ç”¨å‘½ä»¤&lt;/h2>
&lt;ul>
&lt;li>ç³»ç»Ÿé…ç½® (å®˜æ–¹raspbian ç³»ç»Ÿå¯ç”¨)&lt;/li>
&lt;/ul>
&lt;p>&lt;code>sudo raspi-config&lt;/code>&lt;/p>
&lt;ul>
&lt;li>æŸ¥çœ‹æ ‘è“æ´¾çš„å‹å·&lt;/li>
&lt;/ul>
&lt;p>&lt;code>cat /proc/device-tree/model&lt;/code>&lt;/p>
&lt;ul>
&lt;li>æŸ¥çœ‹æœ‰çº¿ç½‘ç»œå½“å‰çš„é“¾æ¥é€Ÿåº¦ å•ä½mb&lt;/li>
&lt;/ul>
&lt;p>&lt;code>cat /sys/class/net/eth0/speed&lt;/code>&lt;/p>
&lt;ul>
&lt;li>æŸ¥çœ‹å½“å‰æ ¸å¿ƒæ¸©åº¦ (é™¤1000ä¸ºæ‘„æ°åº¦)&lt;/li>
&lt;/ul>
&lt;p>&lt;code>cat /sys/class/thermal/thermal_zone0/temp&lt;/code>&lt;/p></description></item><item><title>åœ¨dockerä¸­ç¼–è¯‘openwrt</title><link>https://hitian.info/post/openwrt-build-docker/</link><pubDate>Sat, 10 Aug 2019 00:00:00 +0000</pubDate><guid>https://hitian.info/post/openwrt-build-docker/</guid><description>&lt;h1 id="åœ¨dockerä¸­ç¼–è¯‘openwrt">åœ¨dockerä¸­ç¼–è¯‘openwrt&lt;/h1>
&lt;h2 id="build-docker-image">build docker image&lt;/h2>
&lt;p>Docker file&lt;/p>
&lt;p>{% gist 88ff8a7cad5deffad51d8c29d5c47d75 Dockerfile %}&lt;/p>
&lt;p>&lt;code>docker build --no-cache -t ubuntu-openwrt-build .&lt;/code>&lt;/p>
&lt;h2 id="build">build&lt;/h2>
&lt;p>clone openwrt source code&lt;/p>
&lt;p>&lt;code>git clone https://git.openwrt.org/openwrt/openwrt.git&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ›´æ–°è½¯ä»¶åŒ…&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker run -it --rm -v &lt;span class="nv">$PWD&lt;/span>:/build ubuntu-openwrt-build ./scripts/feeds update -a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ä½¿ç”¨ menuconfig è®¾ç½®ç¼–è¯‘ç›®æ ‡ã€å†…æ ¸ä¿¡æ¯ã€ä»¥åŠéœ€è¦å®‰è£…çš„åŒ…&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker run -it --rm -v &lt;span class="nv">$PWD&lt;/span>:/build ubuntu-openwrt-build make menuconfig
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ç¼–è¯‘&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker run -it --rm -v &lt;span class="nv">$PWD&lt;/span>:/build ubuntu-openwrt-build make -j4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://hitian.info/assets/images/201908/docker-openwrt-build-menuconfig.png" alt="menuconfig" />&lt;/p>
&lt;p>ç”Ÿæˆçš„æ–‡ä»¶ä¼šæ”¾ç½®åœ¨&lt;code>bin&lt;/code>ç›®å½•ä¸‹, ä¾‹å¦‚ MT7621 æ”¾åœ¨ &lt;code>bin/targets/ramips/mt7621&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#é…ç½®æ–‡ä»¶ï¼ŒåŒè¿è¡Œ make menuconfig åç”Ÿæˆçš„.config æ–‡ä»¶ï¼Œå¯ä»¥ç”¨äºå¤‡ä»½å’Œè¿˜åŸé…ç½®&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">config.seed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openwrt-ramips-mt7621-device-pbr-m1-t.manifest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openwrt-ramips-mt7621-pbr-m1-t-initramfs-kernel.bin &lt;span class="c1">#é¦–æ¬¡åˆ·æœºä½¿ç”¨&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">openwrt-ramips-mt7621-pbr-m1-t-squashfs-sysupgrade.bin &lt;span class="c1">#æ›´æ–°ä½¿ç”¨&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">packages &lt;span class="c1">#ç¼–è¯‘å¥½çš„è®¾ç½®ä¸ºç¼–è¯‘ä½†æ˜¯ä¸å®‰è£…çš„åŒ…&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="æ·»åŠ æ–°è®¾å¤‡">æ·»åŠ æ–°è®¾å¤‡&lt;/h2>
&lt;p>ç¤ºä¾‹ &lt;a class="link" href="https://github.com/hitian/openwrt/commit/22df459310836b92caa8fb1796885f670214d25a#diff-8dabb1882176c362bafecc664a7af2ee" target="_blank" rel="noopener"
>https://github.com/hitian/openwrt/commit/22df459310836b92caa8fb1796885f670214d25a#diff-8dabb1882176c362bafecc664a7af2ee&lt;/a>&lt;/p></description></item><item><title>ssh ä»£ç†å’Œè½¬å‘é‚£äº›äº‹</title><link>https://hitian.info/post/ssh-proxy-forward/</link><pubDate>Sat, 05 Jan 2019 00:00:00 +0000</pubDate><guid>https://hitian.info/post/ssh-proxy-forward/</guid><description>&lt;h1 id="é…ç½®sshå®¢æˆ·ç«¯çš„è¡Œä¸º">é…ç½®sshå®¢æˆ·ç«¯çš„è¡Œä¸º&lt;/h1>
&lt;p>é…ç½®æ–‡ä»¶è·¯å¾„ &lt;code>~/.ssh/config&lt;/code>&lt;/p>
&lt;p>é’ˆå¯¹ç›®æ ‡ä¸»æœºçš„é…ç½®å—ç¤ºä¾‹&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">Host deploy-gw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> HostName &lt;span class="o">[&lt;/span>__target_hostname_or_ip__&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> User game
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> IdentityFile ~/.ssh/deploy_private_key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ProxyCommand &lt;span class="o">[&lt;/span>__connect_command__&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="é…ç½®è§£é‡Š">é…ç½®è§£é‡Š&lt;/h2>
&lt;h3 id="é™¤äº†hostä¹‹å¤–-å…¶å®ƒçš„éƒ½æ˜¯å¯é€‰çš„">é™¤äº†Hostä¹‹å¤–ï¼Œ å…¶å®ƒçš„éƒ½æ˜¯å¯é€‰çš„&lt;/h3>
&lt;ul>
&lt;li>&lt;code>Host deploy-gw&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>å®šä¹‰ä½¿ç”¨æ—¶çš„åå­—ï¼Œä¹‹åä½¿ç”¨ &lt;code>ssh deploy-gw&lt;/code> ç™»å½•ç›®æ ‡ï¼Œè¿™ä¸ªåªæ˜¯åˆ«åï¼Œå½“ç„¶è¿™é‡Œä¹Ÿå¯ä»¥ç›´æ¥å†™hostname æˆ–è€…IPåœ°å€; å½“ä½¿ç”¨ Hostname æ—¶å¯ä»¥è¿›è¡ŒåŒ¹é…ï¼Œ ä¾‹å¦‚ &lt;code>Host *.hitian.info&lt;/code> å¯ä»¥åŒ¹é…åˆ° &lt;code>a.hitian.info&lt;/code>.&lt;/p>
&lt;ul>
&lt;li>&lt;code>HostName [__target_hostname_or_ip__]&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>ç›®æ ‡çš„ä¸»æœºåæˆ–è€…IPåœ°å€&lt;/p>
&lt;ul>
&lt;li>&lt;code>User tian&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>ç”¨æˆ·å&lt;/p>
&lt;ul>
&lt;li>&lt;code>IdentityFile ~/.ssh/deploy_private_key&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>æŒ‡å®šä½¿ç”¨çš„private keyè·¯å¾„ã€‚ æ›¿ä»£sshçš„ &lt;code>-i&lt;/code> å‚æ•°ä¸€æ ·æ•ˆæœ&lt;/p>
&lt;ul>
&lt;li>&lt;code>ProxyCommand ssh -q [__local_gw__] nc [__target_addr__] 22&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>è¿æ¥ç›®æ ‡ä¸»æœºæ—¶ä½¿ç”¨çš„å‘½ä»¤&lt;/p>
&lt;h1 id="ssh-via-http-or-socks-proxy">ssh via [http or socks proxy]&lt;/h1>
&lt;p>ä½¿ç”¨åœºæ™¯: ç”±äºä¸å¯æŠ—æ‹’çš„å› ç´ æ— æ³•ç›´æ¥ssh åˆ°è¿œç¨‹ä¸»æœºï¼Œæˆ–è€…é“¾æ¥è¿‡ç¨‹ä¸­ä¼šè¢«å¼‚å¸¸é˜»æ–­æ—¶&lt;/p>
&lt;p>è¿™é‡Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª connect å‘½ä»¤ï¼Œéœ€è¦è‡ªè¡Œå®‰è£…ä¸€ä¸‹ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">Provides SOCKS and HTTPS proxy support to SSH
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">https://bitbucket.org/gotoh/connect/wiki/Home
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>macOS å¯ä»¥åˆ©ç”¨brew ç›´æ¥å®‰è£…, å…¶å®ƒå¹³å°å¯ä»¥æŒ‰è¯´æ˜æ‰§è¡Œç¼–è¯‘å®‰è£…&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">brew install connect
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¦è®©sshä½¿ç”¨proxyè¿æ¥åˆ°ç›®æ ‡ä¸»æœºï¼Œåœ¨config ä¸­æ·»åŠ ProxyCommandé…ç½®&lt;/p>
&lt;p>ä½¿ç”¨ http ä»£ç†&lt;/p>
&lt;p>&lt;code>ProxyCommand connect -H http_proxy_addr:port %h %p&lt;/code>&lt;/p>
&lt;p>ä½¿ç”¨ socks ä»£ç†&lt;/p>
&lt;p>&lt;code>ProxyCommand connect -S socks_proxy_addr:port %h %p&lt;/code>&lt;/p>
&lt;p>è¯¦ç»†çš„connectä½¿ç”¨è¯´æ˜å¯ä»¥å‚ç…§å®˜æ–¹wiki&lt;/p>
&lt;h1 id="ssh-via-ssh">ssh via ssh&lt;/h1>
&lt;p>ä½¿ç”¨åœºæ™¯ï¼š&lt;/p>
&lt;p>ä¾‹å¦‚éœ€è¦é€šè¿‡æŸå°sshçš„ç½‘å…³æ‰èƒ½é“¾æ¥åˆ°å†…ç½‘çš„å…¶å®ƒsshæœåŠ¡å™¨&lt;/p>
&lt;p>å½“ç„¶å¯ä»¥é€šè¿‡å…ˆsshåˆ°ç½‘å…³ï¼Œå†sshåˆ°ç›®æ ‡ä¸»æœºçš„æ–¹å¼ç®€å•å®ç°ï¼Œä½†æ˜¯è¿™è¦æ±‚åœ¨ç½‘å…³æœºå™¨ä¸Šæ”¾ä¸€ä»½ç›®æ ‡ä¸»æœºçš„ç§é’¥ã€‚&lt;/p>
&lt;p>å¦‚æœä¸æƒ³å°†ç§é’¥ç»™ç½‘å…³æœºå™¨ã€‚å¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ–¹å¼&lt;/p>
&lt;p>ä½¿ç”¨ nc å‘½ä»¤å®ç°è½¬å‘ï¼Œ ncåœ¨macOSå’Œä¸»æµLinuxä¸Šå·²ç»å†…ç½®&lt;/p>
&lt;hr>
&lt;p>åœ¨config ä¸­æ·»åŠ ProxyCommandé…ç½®&lt;/p>
&lt;p>&lt;code>ProxyCommand ssh -q gateway_host nc target_host 22&lt;/code>&lt;/p>
&lt;p>è¿™é‡Œ gateway_host ä¸ºç½‘å…³ï¼Œ nc åä¸ºç›®æ ‡çš„ä¸»æœºå’Œsshdçš„ç«¯å£å·ï¼Œ é¦–å…ˆè¦ä¿è¯å¯ä»¥æ­£å¸¸ssh åˆ°gateway_hostã€‚&lt;/p>
&lt;p>è¿™ç§æ–¹å¼å¯ä»¥ç›´æ¥å®ç°æ›´é•¿çš„è½¬å‘é“¾&lt;/p>
&lt;p>ä¾‹å¦‚è¦ç›´æ¥åœ¨localç™»å½•target åªéœ€è¦åœ¨æœ¬åœ°åˆ†åˆ«ä¸ºa, b, target é…ç½®ProxyCommandå°±å¯ä»¥äº†ï¼Œå¦ˆå¦ˆå†ä¹Ÿä¸éœ€è¦æ‹…å¿ƒæˆ‘è¦ä¸€å±‚ä¸€å±‚sshåˆ°è¿œç¨‹æœºå™¨äº†:)&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl">local -&amp;gt; gateway -&amp;gt; a -&amp;gt; b -&amp;gt; target
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="socks-proxy-over-ssh">socks proxy over ssh&lt;/h1>
&lt;p>ä½¿ç”¨åœºæ™¯ï¼šéœ€è¦è®¿é—®ç›®æ ‡ä¸»æœºçš„localhostï¼Œæˆ–è€…ç›®æ ‡ä¸»æœºå†…ç½‘çš„èµ„æºæ—¶ï¼Œ å¦‚æœå®¢æˆ·ç«¯æ— æ³•ä½¿ç”¨socksé“¾æ¥éœ€è¦çš„èµ„æºï¼Œè¯·å‚è€ƒä¸‹ä¸€ç§æ–¹å¼&lt;/p>
&lt;p>åœ¨æœ¬åœ°ç›‘å¬1089ç«¯å£ã€‚å°†è¯·æ±‚é€šè¿‡sshéš§é“è½¬å‘åˆ°target_host&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ssh -D &lt;span class="m">1089&lt;/span> target_host
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="port-forward-via-ssh">port forward via ssh&lt;/h1>
&lt;p>ä½¿ç”¨åœºæ™¯ï¼š ç›´æ¥åœ¨æœ¬åœ°è¯·æ±‚ç›®æ ‡ä¸»æœºå†…ç½‘çš„æœåŠ¡æ—¶&lt;/p>
&lt;p>ä¸¾ä¸ªä¾‹å­&lt;/p>
&lt;p>gateway æœåŠ¡å™¨çš„å†…ç½‘æœ‰ä¸€å°mysqlæœåŠ¡å™¨è¿è¡Œåœ¨ &lt;code>10.0.0.3:3306&lt;/code>ï¼Œ æœ¬åœ°çš„mysqlå®¢æˆ·ç«¯æ— æ³•ç›´æ¥é“¾æ¥ã€‚ æˆ‘ä»¬å¯ä»¥é‡‡ç”¨sshæ¥æ˜ å°„ç«¯å£åˆ°æœ¬åœ°&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ssh -L localhost:3306:10.0.0.3:3306 target_host
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Lå‚æ•°çš„æ ¼å¼ &lt;code>æœ¬åœ°åœ°å€&lt;/code>:&lt;code>æœ¬åœ°ç›‘å¬ç«¯å£&lt;/code>:&lt;code>è¿œç¨‹åœ°å€&lt;/code>:&lt;code>è¦æ˜ å°„çš„è¿œç¨‹ç«¯å£&lt;/code>&lt;/p>
&lt;p>ä¸Šé¢çš„å‘½ä»¤å¯ä»¥ç›´æ¥å°†è¿œç¨‹mysqlæœåŠ¡å™¨çš„3306ç«¯å£æ˜ å°„åˆ°æœ¬åœ°çš„3306ç«¯å£ï¼Œ åœ¨æœ¬åœ°å¯ä»¥ç›´æ¥ä½¿ç”¨&lt;code>mysql -h localhost&lt;/code>è¿æ¥ã€‚&lt;/p>
&lt;p>å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨0.0.0.0ï¼Œå°†æœ¬åœ°çš„ç«¯å£å¼€æ”¾ç»™æœ¬åœ°çš„å…¶å®ƒä¸»æœºä½¿ç”¨&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ssh -L 0.0.0.0:3306:10.0.0.3:3306 target_host
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="ä¸ç¨³å®šçš„ç½‘ç»œä¸­ä½¿ç”¨ssh">ä¸ç¨³å®šçš„ç½‘ç»œä¸­ä½¿ç”¨ssh&lt;/h1>
&lt;p>ç”±äºsshä½¿ç”¨çš„TCPé“¾æ¥ï¼Œåœ¨ä¸ç¨³å®šçš„ç½‘ç»œä¸­ä½¿ç”¨sshä¼šå¾ˆå®¹æ˜“æ–­å¼€ï¼Œæ¨èä½¿ç”¨ mosh &lt;a class="link" href="https://mosh.org/" target="_blank" rel="noopener"
>https://mosh.org/&lt;/a>&lt;/p>
&lt;p>mosh ä¼šä½¿ç”¨ Protocol Buffers + UDP çš„æ–¹å¼ä¼ è¾“sshæ•°æ®ï¼ŒåŒ…å«æ•°æ®çš„å‹ç¼©å’Œæ–­çº¿é‡è¿ï¼ŒåŸæœ‰çš„sshé…ç½®å’Œæƒé™éƒ½ä¸éœ€è¦é¢å¤–çš„å˜æ›´&lt;/p>
&lt;p>æ³¨æ„ï¼šmoshå®¢æˆ·ç«¯åœ¨å¯åŠ¨çš„æ—¶å€™ä¼šsshåˆ°è¿œç¨‹çš„ä¸»æœºï¼Œå¯åŠ¨ä¸€ä¸ªmosh-server å¹¶é»˜è®¤ç›‘å¬åœ¨ä¸€ä¸ª60000-61000ä¹‹é—´çš„UDPç«¯å£ã€‚è€Œä¸”æ¯å¼€å¯ä¸€ä¸ªæ–°çš„å®¢æˆ·ç«¯ï¼Œ éƒ½ä¼šåœ¨æœåŠ¡å™¨ä¸Šå¼€ä¸€ä¸ªæ–°çš„udpç«¯å£ï¼Œéœ€è¦é˜²ç«å¢™æ”¾å¿ƒå¯¹åº”çš„UDPç«¯å£æ®µ.&lt;/p>
&lt;p>iOSä¸Šçš„å®¢æˆ·ç«¯æ¨è &lt;a class="link" href="https://github.com/blinksh/blink" target="_blank" rel="noopener"
>https://github.com/blinksh/blink&lt;/a>&lt;/p>
&lt;p>THE END&lt;/p></description></item><item><title>æ–°å¹´å¿«ä¹</title><link>https://hitian.info/post/happy-new-year/</link><pubDate>Tue, 01 Jan 2019 00:00:00 +0000</pubDate><guid>https://hitian.info/post/happy-new-year/</guid><description>&lt;p>æ–°å¹´å¿«ä¹ï¼ ğŸŠğŸ‰&lt;/p></description></item><item><title>vmware esxi install update patch</title><link>https://hitian.info/post/vmware-esxi-upgrade/</link><pubDate>Sun, 30 Dec 2018 00:00:00 +0000</pubDate><guid>https://hitian.info/post/vmware-esxi-upgrade/</guid><description>&lt;h1 id="check-the-latest-version">Check the latest version&lt;/h1>
&lt;p>Vmware Official &lt;a class="link" href="https://my.vmware.com/group/vmware/patch#search" target="_blank" rel="noopener"
>https://my.vmware.com/group/vmware/patch#search&lt;/a>&lt;/p>
&lt;p>or&lt;/p>
&lt;p>VMware ESXi Patch Tracker &lt;a class="link" href="https://esxi-patches.v-front.de/ESXi-7.0.0.html" target="_blank" rel="noopener"
>https://esxi-patches.v-front.de/ESXi-7.0.0.html&lt;/a>&lt;/p>
&lt;h1 id="install">Install&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># From https://esxi-patches.v-front.de/ESXi-7.0.0.html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Cut and paste these commands into an ESXi shell to update your host with this Imageprofile&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># See the Help page for more instructions&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">esxcli network firewall ruleset &lt;span class="nb">set&lt;/span> -e &lt;span class="nb">true&lt;/span> -r httpClient
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">esxcli software profile update -p ESXi-7.0U3k-21313628-standard &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-d https://hostupdate.vmware.com/software/VUM/PRODUCTION/main/vmw-depot-index.xml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">esxcli network firewall ruleset &lt;span class="nb">set&lt;/span> -e &lt;span class="nb">false&lt;/span> -r httpClient
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Reboot to complete the upgrade&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="if-errno-28-no-space-left-on-device">IF Errno 28 No space left on device!!!&lt;/h1>
&lt;p>&lt;img src="https://hitian.info/assets/images/201812/20181230-vmware-esxi-upgrade-error-28.png" alt="Errno 28 No space left on device" />&lt;/p>
&lt;h2 id="download-the-offline-update-zip-file-here">download the offline update zip file here.&lt;/h2>
&lt;p>&lt;a class="link" href="https://my.vmware.com/group/vmware/patch#search" target="_blank" rel="noopener"
>https://my.vmware.com/group/vmware/patch#search&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://hitian.info/assets/images/201812/20181230-vmware-esxi-upgrade-patch-download-page.png" alt="vmware esxi patch download page" />&lt;/p>
&lt;h2 id="upload-to-datastores-via-webui">upload to Datastores via webUI&lt;/h2>
&lt;p>&lt;img src="https://hitian.info/assets/images/201812/20181230-vmware-esxi-upgrade-patch-upload-datastores.png" alt="pload to Datastores via webUI" />&lt;/p>
&lt;h2 id="install-1">Install&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">esxcli software profile update -p ESXi-6.7.0-20181104001-standard &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-d update_zip_file_path
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>æ›´æ–°vmware esxi sslè¯ä¹¦</title><link>https://hitian.info/post/vmware-esxi-upgrade-ssl-certificate/</link><pubDate>Thu, 12 Jul 2018 00:00:00 +0000</pubDate><guid>https://hitian.info/post/vmware-esxi-upgrade-ssl-certificate/</guid><description>&lt;p>esxi çš„è¯ä¹¦ç®¡ç†é¡µé¢è²Œä¼¼æœ‰bugä¸€ç›´æ— æ³•æ›´æ–°è¯ä¹¦ï¼Œè¿™é‡Œç›´æ¥sshç™»é™†æœåŠ¡å™¨æ›¿æ¢&lt;/p>
&lt;p>å¼€å¯SSH&lt;/p>
&lt;p>&lt;img src="https://hitian.info/assets/images/201807/vmware-exsi-enable-sshd.png" alt="vmware-exsi-enable-sshd" />&lt;/p>
&lt;p>Let&amp;rsquo;s Encrypt ç­¾å‘çš„è¯ä¹¦ç›®å½•å¦‚ä¸‹&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hitian :: ~ Â» ls -al .acme.sh/hitian.me/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total &lt;span class="m">36&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">2&lt;/span> tian tian &lt;span class="m">4096&lt;/span> Mar &lt;span class="m">20&lt;/span> 14:59 .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwx------ &lt;span class="m">8&lt;/span> tian tian &lt;span class="m">4096&lt;/span> May &lt;span class="m">27&lt;/span> 15:41 ..
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> tian tian &lt;span class="m">1648&lt;/span> May &lt;span class="m">19&lt;/span> 00:26 ca.cer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> tian tian &lt;span class="m">3803&lt;/span> May &lt;span class="m">19&lt;/span> 00:26 fullchain.cer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> tian tian &lt;span class="m">2155&lt;/span> May &lt;span class="m">19&lt;/span> 00:26 hitian.me.cer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> tian tian &lt;span class="m">529&lt;/span> May &lt;span class="m">19&lt;/span> 00:26 hitian.me.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> tian tian &lt;span class="m">980&lt;/span> May &lt;span class="m">19&lt;/span> 00:24 hitian.me.csr
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> tian tian &lt;span class="m">220&lt;/span> May &lt;span class="m">19&lt;/span> 00:24 hitian.me.csr.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> tian tian &lt;span class="m">1675&lt;/span> Mar &lt;span class="m">20&lt;/span> 14:55 hitian.me.key
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>exsi çš„é…ç½®ç›®å½•å¦‚ä¸‹&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@localhost:/etc/vmware/ssl&lt;span class="o">]&lt;/span> ls -al
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total &lt;span class="m">36&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">1&lt;/span> root root &lt;span class="m">512&lt;/span> Jun &lt;span class="m">3&lt;/span> 18:34 .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-r--r--r-T &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Apr &lt;span class="m">3&lt;/span> 21:24 .#castore.pem
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-r-------T &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Apr &lt;span class="m">3&lt;/span> 21:24 .#rui.bak
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-r--r--r-T &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Apr &lt;span class="m">3&lt;/span> 21:24 .#rui.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-r-------T &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Apr &lt;span class="m">3&lt;/span> 21:24 .#rui.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">1&lt;/span> root root &lt;span class="m">512&lt;/span> Jul &lt;span class="m">12&lt;/span> 00:28 ..
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">1050&lt;/span> Jun &lt;span class="m">3&lt;/span> 18:34 castore.pem
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">3859&lt;/span> Jun &lt;span class="m">3&lt;/span> 18:34 iofiltervp.pem
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-r--r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">229&lt;/span> Apr &lt;span class="m">3&lt;/span> 21:24 openssl.cnf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-r-------- &lt;span class="m">1&lt;/span> root root &lt;span class="m">5231&lt;/span> Jun &lt;span class="m">3&lt;/span> 18:34 rui.bak
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">3803&lt;/span> Jul &lt;span class="m">12&lt;/span> 00:26 rui.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw------- &lt;span class="m">1&lt;/span> root root &lt;span class="m">1675&lt;/span> Jul &lt;span class="m">12&lt;/span> 00:27 rui.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-T &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Apr &lt;span class="m">3&lt;/span> 21:50 vsan_kms_castore.pem
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-T &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Apr &lt;span class="m">3&lt;/span> 21:50 vsan_kms_castore_old.pem
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-T &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Apr &lt;span class="m">3&lt;/span> 21:50 vsan_kms_client.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-T &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Apr &lt;span class="m">3&lt;/span> 21:50 vsan_kms_client.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-T &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Apr &lt;span class="m">3&lt;/span> 21:50 vsan_kms_client_old.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-T &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Apr &lt;span class="m">3&lt;/span> 21:50 vsan_kms_client_old.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-T &lt;span class="m">1&lt;/span> root root &lt;span class="m">0&lt;/span> Apr &lt;span class="m">3&lt;/span> 21:50 vsanvp_castore.pem
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>ä½¿ç”¨ &lt;code>fullchain.cer&lt;/code> è¦†ç›– &lt;code>rui.crt&lt;/code>&lt;/li>
&lt;li>ä½¿ç”¨ &lt;code>hitian.me.key&lt;/code> è¦†ç›– &lt;code>rui.key&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>è¦†ç›–å‰å…ˆå¤‡ä»½ä¸€ä¸‹ï¼Œé˜²æ­¢å‘ç”Ÿæ„å¤–&lt;/strong>&lt;/p>
&lt;p>æ¥ä¸‹æ¥éœ€è¦é‡å¯UIè®©é…ç½®ç”Ÿæ•ˆ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/etc/init.d/hostd restart
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/etc/init.d/vpxa restart
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>åœ¨Ubuntu Serverä¸Šæ­å»ºKubernetes cluster</title><link>https://hitian.info/post/kubernetes-cluster-setup-on-ubuntu-server/</link><pubDate>Thu, 12 Jul 2018 00:00:00 +0000</pubDate><guid>https://hitian.info/post/kubernetes-cluster-setup-on-ubuntu-server/</guid><description>&lt;h1 id="å‡†å¤‡ubuntu-server">å‡†å¤‡Ubuntu Server&lt;/h1>
&lt;p>å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ ubuntu server, å¯ä»¥ä½¿ç”¨ç½‘æ˜“å¼€æºé•œåƒç«™åŠ é€Ÿä¸‹è½½&lt;/p>
&lt;p>&lt;a class="link" href="http://mirrors.163.com/ubuntu-releases/18.04/ubuntu-18.04-live-server-amd64.iso" target="_blank" rel="noopener"
>http://mirrors.163.com/ubuntu-releases/18.04/ubuntu-18.04-live-server-amd64.iso&lt;/a>&lt;/p>
&lt;h2 id="åœ¨3å°ä¸»æœºä¸Šå®‰è£…ç³»ç»Ÿ">åœ¨3å°ä¸»æœºä¸Šå®‰è£…ç³»ç»Ÿ&lt;/h2>
&lt;p>ç‰©ç†æœºæˆ–è€…è™šæ‹Ÿæœºéƒ½å¯ä»¥ï¼Œè¦æ±‚äº’ç›¸ä¹‹å‰å¯ä»¥ç›´è¿ï¼Œå†…å­˜å»ºè®®åœ¨2Gä»¥ä¸Šï¼Œ å¦‚æœä¸è·‘ä»€ä¹ˆå¤§å‹ç³»ç»Ÿçš„è¯ç¡¬ç›˜15Gå°±å·®ä¸å¤šäº†&lt;/p>
&lt;p>è¿™é‡Œç›´æ¥åœ¨VMware Esxi ä¸Šå¯åŠ¨3ä¸ªå®ä¾‹å®‰è£…ç³»ç»Ÿå¹¶æŒ‡å®šIPåœ°å€&lt;/p>
&lt;p>&lt;img src="https://hitian.info/assets/images/201807/Kubernetes-vmware-exsi.png" alt="Kubernetes-vmware-exsi" />&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>ä¸»æœº&lt;/th>
&lt;th>IP&lt;/th>
&lt;th>hostname&lt;/th>
&lt;th>è¯´æ˜&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>c-1&lt;/td>
&lt;td>192.168.5.191&lt;/td>
&lt;td>c1&lt;/td>
&lt;td>Master&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>c-2&lt;/td>
&lt;td>192.168.5.192&lt;/td>
&lt;td>c2&lt;/td>
&lt;td>Node&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>c-3&lt;/td>
&lt;td>192.168.5.193&lt;/td>
&lt;td>c3&lt;/td>
&lt;td>Node&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="å‡†å¤‡ç¯å¢ƒ">å‡†å¤‡ç¯å¢ƒ&lt;/h2>
&lt;p>&lt;strong>ä¸‹é¢çš„æ­¥éª¤éœ€è¦åœ¨3å°ä¸»æœºä¸Šå…¨éƒ¨æ‰§è¡Œ, æ³¨æ„ä½¿ç”¨rootç”¨æˆ·&lt;/strong>&lt;/p>
&lt;h3 id="å¯é€‰-æ›´æ¢aptçš„æ›´æ–°æºä¸ºå›½å†…çš„åœ°å€åŠ é€Ÿå®‰è£…è¿‡ç¨‹">(å¯é€‰) æ›´æ¢aptçš„æ›´æ–°æºä¸ºå›½å†…çš„åœ°å€ï¼ŒåŠ é€Ÿå®‰è£…è¿‡ç¨‹&lt;/h3>
&lt;p>&lt;code>sed -i -- 's/archive.ubuntu.com/mirrors.163.com/g' /etc/apt/sources.list&lt;/code>&lt;/p>
&lt;h3 id="æ›´æ–°-apt">æ›´æ–° APT&lt;/h3>
&lt;p>&lt;code>apt update -y &amp;amp;&amp;amp; apt upgrade -y&lt;/code>&lt;/p>
&lt;h3 id="å®‰è£…-docker-ce">å®‰è£… Docker CE&lt;/h3>
&lt;p>ä»¥ä¸‹å¯ä»¥å‚ç…§Docker å®˜ç½‘çš„æ–‡æ¡£
&lt;a class="link" href="https://docs.docker.com/install/linux/docker-ce/ubuntu/" target="_blank" rel="noopener"
>https://docs.docker.com/install/linux/docker-ce/ubuntu/&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># å®‰è£…ä¾èµ–&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apt-get install -y &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> apt-transport-https &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> ca-certificates &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> curl &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> software-properties-common
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Add Dockerâ€™s official GPG key:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -fsSL https://download.docker.com/linux/ubuntu/gpg &lt;span class="p">|&lt;/span> sudo apt-key add -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ·»åŠ Docker çš„ apt repository.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">add-apt-repository &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> &lt;span class="s2">&amp;#34;deb [arch=amd64] https://download.docker.com/linux/ubuntu \
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &lt;/span>&lt;span class="k">$(&lt;/span>lsb_release -cs&lt;span class="k">)&lt;/span>&lt;span class="s2"> \
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> stable&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ›´æ–°APT å¹¶å®‰è£…Docker&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apt-get update -y &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> apt-get install -y docker-ce
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="å®‰è£…-kubernetes-ç›¸å…³çš„å·¥å…·">å®‰è£… Kubernetes ç›¸å…³çš„å·¥å…·&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Add Googleâ€™s official GPG key:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg &lt;span class="p">|&lt;/span> apt-key add -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ·»åŠ  APT repository.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cat &lt;span class="s">&amp;lt;&amp;lt;EOF &amp;gt;/etc/apt/sources.list.d/kubernetes.list
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">deb http://apt.kubernetes.io/ kubernetes-xenial main
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># æ›´æ–°APT å¹¶å®‰è£…&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apt-get update -y &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> apt-get install -y kubelet kubeadm kubectl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;em>åˆ°è¿™é‡ŒåŸºç¡€ç¯å¢ƒå°±å‡†å¤‡å¥½äº†ï¼Œ ä¸‹æ¥å¼€å§‹åˆå§‹åŒ–ï¼Œ æ³¨æ„ä¸‹é¢çš„éƒ¨åˆ†åœ¨Masterä¸»æœºä¸Šæ“ä½œ&lt;/em>&lt;/p>
&lt;h2 id="åˆå§‹åŒ–-kubernetes">åˆå§‹åŒ– Kubernetes&lt;/h2>
&lt;h3 id="å¯åŠ¨-master">å¯åŠ¨ Master&lt;/h3>
&lt;h3 id="å¯é€‰-å…ˆpullä¸€ä¸‹åˆå§‹åŒ–è¿‡ç¨‹ä¸­éœ€è¦çš„docker-image-åŠ é€Ÿå®‰è£…è¿‡ç¨‹">(å¯é€‰) å…ˆpullä¸€ä¸‹åˆå§‹åŒ–è¿‡ç¨‹ä¸­éœ€è¦çš„docker imageï¼Œ åŠ é€Ÿå®‰è£…è¿‡ç¨‹&lt;/h3>
&lt;p>&lt;code>kubeadm config images pull&lt;/code>&lt;/p>
&lt;h3 id="åˆå§‹åŒ–">åˆå§‹åŒ–&lt;/h3>
&lt;p>&lt;code>kubeadm init --pod-network-cidr=10.244.0.0/16&lt;/code>&lt;/p>
&lt;p>&lt;code>pod-network-cidr&lt;/code>å‚æ•°æ˜¯ä¹‹ååˆ›å»ºå†…éƒ¨ç½‘ç»œéœ€è¦çš„ipæ®µï¼Œé€‰ä¸€ä¸ªæ²¡æœ‰è¢«å ç”¨çš„å†…ç½‘æ®µå°±å¯ä»¥äº†&lt;/p>
&lt;p>å¦‚æœæŠ¥é”™
&lt;code>if [ERROR Swap]: running with swap on is not supported. Please disable swap&lt;/code>&lt;/p>
&lt;p>swap æ²¡æœ‰å…³é—­ï¼Œ ä½¿ç”¨&lt;code>swapoff -a&lt;/code>å‘½ä»¤å…³é—­swapå†é‡æ–°è¿è¡Œinit&lt;/p>
&lt;p>è¾“å‡ºå¤§æ¦‚å¦‚ä¸‹&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@c1:/home/tian# kubeadm init --pod-network-cidr&lt;span class="o">=&lt;/span>10.244.0.0/16
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0711 03:45:48.345918 &lt;span class="m">2359&lt;/span> feature_gate.go:230&lt;span class="o">]&lt;/span> feature gates: &lt;span class="p">&amp;amp;&lt;/span>&lt;span class="o">{&lt;/span>map&lt;span class="o">[]}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>init&lt;span class="o">]&lt;/span> using Kubernetes version: v1.11.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>preflight&lt;span class="o">]&lt;/span> running pre-flight checks
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0711 03:45:48.367074 &lt;span class="m">2359&lt;/span> kernel_validator.go:81&lt;span class="o">]&lt;/span> Validating kernel version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I0711 03:45:48.367165 &lt;span class="m">2359&lt;/span> kernel_validator.go:96&lt;span class="o">]&lt;/span> Validating kernel config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">[&lt;/span>WARNING SystemVerification&lt;span class="o">]&lt;/span>: docker version is greater than the most recently validated version. Docker version: 18.03.1-ce. Max validated version: 17.03
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>preflight/images&lt;span class="o">]&lt;/span> Pulling images required &lt;span class="k">for&lt;/span> setting up a Kubernetes cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>preflight/images&lt;span class="o">]&lt;/span> This might take a minute or two, depending on the speed of your internet connection
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>preflight/images&lt;span class="o">]&lt;/span> You can also perform this action in beforehand using &lt;span class="s1">&amp;#39;kubeadm config images pull&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>kubelet&lt;span class="o">]&lt;/span> Writing kubelet environment file with flags to file &lt;span class="s2">&amp;#34;/var/lib/kubelet/kubeadm-flags.env&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>kubelet&lt;span class="o">]&lt;/span> Writing kubelet configuration to file &lt;span class="s2">&amp;#34;/var/lib/kubelet/config.yaml&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>preflight&lt;span class="o">]&lt;/span> Activating the kubelet service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>certificates&lt;span class="o">]&lt;/span> Generated ca certificate and key.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>certificates&lt;span class="o">]&lt;/span> Generated apiserver certificate and key.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>certificates&lt;span class="o">]&lt;/span> apiserver serving cert is signed &lt;span class="k">for&lt;/span> DNS names &lt;span class="o">[&lt;/span>c1 kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local&lt;span class="o">]&lt;/span> and IPs &lt;span class="o">[&lt;/span>10.96.0.1 192.168.5.191&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>certificates&lt;span class="o">]&lt;/span> Generated apiserver-kubelet-client certificate and key.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>certificates&lt;span class="o">]&lt;/span> Generated sa key and public key.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>certificates&lt;span class="o">]&lt;/span> Generated front-proxy-ca certificate and key.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>certificates&lt;span class="o">]&lt;/span> Generated front-proxy-client certificate and key.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>certificates&lt;span class="o">]&lt;/span> Generated etcd/ca certificate and key.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>certificates&lt;span class="o">]&lt;/span> Generated etcd/server certificate and key.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>certificates&lt;span class="o">]&lt;/span> etcd/server serving cert is signed &lt;span class="k">for&lt;/span> DNS names &lt;span class="o">[&lt;/span>c1 localhost&lt;span class="o">]&lt;/span> and IPs &lt;span class="o">[&lt;/span>127.0.0.1 ::1&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>certificates&lt;span class="o">]&lt;/span> Generated etcd/peer certificate and key.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>certificates&lt;span class="o">]&lt;/span> etcd/peer serving cert is signed &lt;span class="k">for&lt;/span> DNS names &lt;span class="o">[&lt;/span>c1 localhost&lt;span class="o">]&lt;/span> and IPs &lt;span class="o">[&lt;/span>192.168.5.191 127.0.0.1 ::1&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>certificates&lt;span class="o">]&lt;/span> Generated etcd/healthcheck-client certificate and key.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>certificates&lt;span class="o">]&lt;/span> Generated apiserver-etcd-client certificate and key.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>certificates&lt;span class="o">]&lt;/span> valid certificates and keys now exist in &lt;span class="s2">&amp;#34;/etc/kubernetes/pki&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>kubeconfig&lt;span class="o">]&lt;/span> Wrote KubeConfig file to disk: &lt;span class="s2">&amp;#34;/etc/kubernetes/admin.conf&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>kubeconfig&lt;span class="o">]&lt;/span> Wrote KubeConfig file to disk: &lt;span class="s2">&amp;#34;/etc/kubernetes/kubelet.conf&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>kubeconfig&lt;span class="o">]&lt;/span> Wrote KubeConfig file to disk: &lt;span class="s2">&amp;#34;/etc/kubernetes/controller-manager.conf&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>kubeconfig&lt;span class="o">]&lt;/span> Wrote KubeConfig file to disk: &lt;span class="s2">&amp;#34;/etc/kubernetes/scheduler.conf&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>controlplane&lt;span class="o">]&lt;/span> wrote Static Pod manifest &lt;span class="k">for&lt;/span> component kube-apiserver to &lt;span class="s2">&amp;#34;/etc/kubernetes/manifests/kube-apiserver.yaml&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>controlplane&lt;span class="o">]&lt;/span> wrote Static Pod manifest &lt;span class="k">for&lt;/span> component kube-controller-manager to &lt;span class="s2">&amp;#34;/etc/kubernetes/manifests/kube-controller-manager.yaml&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>controlplane&lt;span class="o">]&lt;/span> wrote Static Pod manifest &lt;span class="k">for&lt;/span> component kube-scheduler to &lt;span class="s2">&amp;#34;/etc/kubernetes/manifests/kube-scheduler.yaml&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>etcd&lt;span class="o">]&lt;/span> Wrote Static Pod manifest &lt;span class="k">for&lt;/span> a &lt;span class="nb">local&lt;/span> etcd instance to &lt;span class="s2">&amp;#34;/etc/kubernetes/manifests/etcd.yaml&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>init&lt;span class="o">]&lt;/span> waiting &lt;span class="k">for&lt;/span> the kubelet to boot up the control plane as Static Pods from directory &lt;span class="s2">&amp;#34;/etc/kubernetes/manifests&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>init&lt;span class="o">]&lt;/span> this might take a minute or longer &lt;span class="k">if&lt;/span> the control plane images have to be pulled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>apiclient&lt;span class="o">]&lt;/span> All control plane components are healthy after 42.004178 seconds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>uploadconfig&lt;span class="o">]&lt;/span> storing the configuration used in ConfigMap &lt;span class="s2">&amp;#34;kubeadm-config&amp;#34;&lt;/span> in the &lt;span class="s2">&amp;#34;kube-system&amp;#34;&lt;/span> Namespace
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>kubelet&lt;span class="o">]&lt;/span> Creating a ConfigMap &lt;span class="s2">&amp;#34;kubelet-config-1.11&amp;#34;&lt;/span> in namespace kube-system with the configuration &lt;span class="k">for&lt;/span> the kubelets in the cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>markmaster&lt;span class="o">]&lt;/span> Marking the node c1 as master by adding the label &lt;span class="s2">&amp;#34;node-role.kubernetes.io/master=&amp;#39;&amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>markmaster&lt;span class="o">]&lt;/span> Marking the node c1 as master by adding the taints &lt;span class="o">[&lt;/span>node-role.kubernetes.io/master:NoSchedule&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>patchnode&lt;span class="o">]&lt;/span> Uploading the CRI Socket information &lt;span class="s2">&amp;#34;/var/run/dockershim.sock&amp;#34;&lt;/span> to the Node API object &lt;span class="s2">&amp;#34;c1&amp;#34;&lt;/span> as an annotation
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>bootstraptoken&lt;span class="o">]&lt;/span> using token: pbl4c9.b0ws1tfhjt6ra66a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>bootstraptoken&lt;span class="o">]&lt;/span> configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order &lt;span class="k">for&lt;/span> nodes to get long term certificate credentials
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>bootstraptoken&lt;span class="o">]&lt;/span> configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>bootstraptoken&lt;span class="o">]&lt;/span> configured RBAC rules to allow certificate rotation &lt;span class="k">for&lt;/span> all node client certificates in the cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>bootstraptoken&lt;span class="o">]&lt;/span> creating the &lt;span class="s2">&amp;#34;cluster-info&amp;#34;&lt;/span> ConfigMap in the &lt;span class="s2">&amp;#34;kube-public&amp;#34;&lt;/span> namespace
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>addons&lt;span class="o">]&lt;/span> Applied essential addon: CoreDNS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>addons&lt;span class="o">]&lt;/span> Applied essential addon: kube-proxy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Your Kubernetes master has initialized successfully!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">To start using your cluster, you need to run the following as a regular user:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mkdir -p &lt;span class="nv">$HOME&lt;/span>/.kube
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sudo cp -i /etc/kubernetes/admin.conf &lt;span class="nv">$HOME&lt;/span>/.kube/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sudo chown &lt;span class="k">$(&lt;/span>id -u&lt;span class="k">)&lt;/span>:&lt;span class="k">$(&lt;/span>id -g&lt;span class="k">)&lt;/span> &lt;span class="nv">$HOME&lt;/span>/.kube/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">You should now deploy a pod network to the cluster.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Run &lt;span class="s2">&amp;#34;kubectl apply -f [podnetwork].yaml&amp;#34;&lt;/span> with one of the options listed at:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> https://kubernetes.io/docs/concepts/cluster-administration/addons/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">You can now join any number of machines by running the following on each node
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">as root:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> kubeadm join 192.168.5.191:6443 --token xxxxxxxxxxx --discovery-token-ca-cert-hash sha256:xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="é…ç½®ä¿¡æ¯æ‹·è´åˆ°æ™®é€šç”¨æˆ·">é…ç½®ä¿¡æ¯æ‹·è´åˆ°æ™®é€šç”¨æˆ·&lt;/h3>
&lt;p>ä¸Šé¢æœ‰ä¸¤éƒ¨åˆ†æ˜¯ä¹‹åéœ€è¦ç”¨åˆ°çš„ã€‚&lt;/p>
&lt;p>é¦–å…ˆé€€å‡ºrootç”¨æˆ·ï¼Œåˆ‡æ¢åˆ°æ™®é€šç”¨æˆ·æ‰§è¡Œè¿™ä¸€æ®µï¼Œç›®çš„æ˜¯å°†ç”Ÿæˆçš„ç›¸å…³é…ç½®ä¿¡æ¯æ‹·è´åˆ°æ™®é€šç”¨æˆ·ç›®å½•ä¸‹ï¼Œä¹‹åç›´æ¥ä½¿ç”¨æ™®é€šç”¨æˆ·æ“ä½œé›†ç¾¤&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mkdir -p &lt;span class="nv">$HOME&lt;/span>/.kube
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sudo cp -i /etc/kubernetes/admin.conf &lt;span class="nv">$HOME&lt;/span>/.kube/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sudo chown &lt;span class="k">$(&lt;/span>id -u&lt;span class="k">)&lt;/span>:&lt;span class="k">$(&lt;/span>id -g&lt;span class="k">)&lt;/span> &lt;span class="nv">$HOME&lt;/span>/.kube/config
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ£€æŸ¥ä¸€ä¸‹èŠ‚ç‚¹ä¿¡æ¯&lt;/p>
&lt;p>&lt;code>kubectl get nodes --all-namespaces&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tian@c1:~$ kubectl get nodes --all-namespaces
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">c1 NotReady master 1m v1.11.0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å› ä¸ºç½‘ç»œè¿˜æ²¡æœ‰é…ç½®å¥½ï¼Œ çŠ¶æ€è¿˜æš‚æ—¶æ˜¯&lt;code>NotReady&lt;/code>ï¼Œ ä¸‹æ¥å®‰è£…ç½‘ç»œæ’ä»¶&lt;/p>
&lt;h3 id="å®‰è£…ç½‘ç»œæ’ä»¶">å®‰è£…ç½‘ç»œæ’ä»¶&lt;/h3>
&lt;p>é€‰æ‹©ä¸€ç§ç½‘ç»œæ’ä»¶ï¼Œ å‚è€ƒå®˜æ–¹æ–‡æ¡£&lt;a class="link" href="https://kubernetes.io/docs/setup/independent/create-cluster-kubeadm/#pod-network" target="_blank" rel="noopener"
>https://kubernetes.io/docs/setup/independent/create-cluster-kubeadm/#pod-network&lt;/a>&lt;/p>
&lt;p>æˆ‘ä»¬è¿™é‡Œä½¿ç”¨&lt;code>Flannel&lt;/code>&lt;/p>
&lt;p>æ‰§è¡Œ (For Kubernetes v1.7+)&lt;/p>
&lt;p>&lt;code>kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml&lt;/code>&lt;/p>
&lt;p>æ³¨æ„æ–°ç‰ˆæœ¬çš„ubuntu éœ€è¦æ›´æ”¹ &lt;code>/etc/sysctl.conf&lt;/code> æ·»åŠ  &lt;code>net.bridge.bridge-nf-call-iptables=1&lt;/code> å¼€å¯æ¡¥æ¥ç½‘ç»œçš„æµé‡è½¬å‘&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;net.bridge.bridge-nf-call-iptables=1&amp;#39;&lt;/span> &amp;gt;&amp;gt; /etc/sysctl.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sysctl -p
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å®‰è£…å®Œæˆåä½¿ç”¨&lt;code>kubectl get pods --all-namespaces&lt;/code>çœ‹ä¸‹æƒ…å†µï¼Œ
å› ä¸ºè¦ä¸‹è½½ç›¸å…³çš„dockeré•œåƒï¼Œå¯èƒ½éœ€è¦ä¸€ç‚¹æ—¶é—´ï¼Œç­‰åˆ°&lt;code>kube-flannel-XXXXXXX&lt;/code> è¿™ä¸ªå˜æˆ&lt;code>Running&lt;/code> ä¹‹åå°±å®Œæˆäº†&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tian@c1:~$ kubectl get pods --all-namespaces
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAMESPACE NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system coredns-78fcdf6894-8tkzx 1/1 Running &lt;span class="m">0&lt;/span> 2m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system coredns-78fcdf6894-cbdb8 1/1 Running &lt;span class="m">0&lt;/span> 2m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system etcd-c1 1/1 Running &lt;span class="m">0&lt;/span> 1m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-apiserver-c1 1/1 Running &lt;span class="m">0&lt;/span> 1m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-controller-manager-c1 1/1 Running &lt;span class="m">0&lt;/span> 2m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-flannel-ds-pqpgk 1/1 Running &lt;span class="m">0&lt;/span> 36s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-proxy-kpjrk 1/1 Running &lt;span class="m">0&lt;/span> 2m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-scheduler-c1 1/1 Running &lt;span class="m">0&lt;/span> 1m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>åˆ°è¿™é‡ŒMasterå°±é…ç½®å¥½äº†ï¼Œç°åœ¨å¯ä»¥å¼€å§‹åŠ å…¥å…¶å®ƒèŠ‚ç‚¹äº†&lt;/strong>&lt;/p>
&lt;h2 id="åˆå§‹åŒ–å…¶å®ƒ-node">åˆå§‹åŒ–å…¶å®ƒ Node&lt;/h2>
&lt;p>è¿›å…¥å…¶å®ƒçš„æ‰€æœ‰ä¸»æœºåˆ‡æ¢åˆ°rootç”¨æˆ·ï¼Œ æ‰§è¡Œä¹‹å‰Materåˆå§‹åŒ–æœ€åè¾“å‡ºçš„&lt;code>join&lt;/code>å‘½ä»¤æ®µï¼Œ ä¾‹å¦‚&lt;/p>
&lt;p>&lt;code>kubeadm join 192.168.5.191:6443 --token xxxxxxxxxxx --discovery-token-ca-cert-hash sha256:xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&lt;/code>&lt;/p>
&lt;p>å¦‚æœæ²¡æœ‰æŠ¥é”™çš„è¯å°±å®Œæˆäº†&lt;/p>
&lt;p>&lt;strong>æ¥ä¸‹æ¥å›åˆ°Masterä¸»æœº&lt;/strong>&lt;/p>
&lt;p>ä½¿ç”¨&lt;code>kubectl get nodes&lt;/code>æŸ¥çœ‹èŠ‚ç‚¹çš„çŠ¶æ€&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tian@c1:~$ kubectl get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">c1 Ready master 10m v1.11.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">c2 NotReady &amp;lt;none&amp;gt; 1m v1.11.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">c3 NotReady &amp;lt;none&amp;gt; 14s v1.11.0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åˆ°è¿™é‡Œå°±å®Œæˆäº†ï¼Œç¨ç­‰åˆå§‹åŒ–å®Œæˆå¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚&lt;/p>
&lt;h1 id="å®‰è£…å›¾å½¢åŒ–ç®¡ç†ç•Œé¢">å®‰è£…å›¾å½¢åŒ–ç®¡ç†ç•Œé¢&lt;/h1>
&lt;h2 id="å®‰è£…">å®‰è£…&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.1/aio/deploy/recommended.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#å¼€å¯proxy æ–¹ä¾¿å†…ç½‘è®¿é—®&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubectl proxy --address&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;0.0.0.0&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#(å¯é€‰)å¦‚æœåœ¨æœºæˆ¿å†…ç½‘éœ€è¦ç»è¿‡gatewayæ‰èƒ½è®¿é—®çš„è¯ï¼Œ å¯ä»¥ä¸´æ—¶å¼€å¯sshè½¬å‘ï¼Œç„¶åç›´æ¥è®¿é—® &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TMac :: ~ Â» ssh -L localhost:8001:192.168.5.191:8001 gateway-server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç®¡ç†åœ°å€&lt;/p>
&lt;p>&lt;a class="link" href="http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/" target="_blank" rel="noopener"
>http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://hitian.info/assets/images/201807/Kubernetes-dashboard-login.png" alt="Kubernetes-gui-login.png" />&lt;/p>
&lt;p>æ¥ä¸‹æ¥è¦åˆ›å»ºå¯ä»¥ç™»é™†ç®¡ç†ç•Œé¢çš„ç”¨æˆ·&lt;/p>
&lt;p>åˆ›å»ºç”¨æˆ·é…ç½® &lt;code>create_account.yaml&lt;/code>, ç”¨æˆ·åä¸ºadmin&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ServiceAccount&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">admin-user&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">kubernetes-dashboard&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åº”ç”¨é…ç½®&lt;code>kubectl create -f create_account.yaml&lt;/code>&lt;/p>
&lt;p>åˆ›å»ºæƒé™é…ç½® &lt;code>admin_account_role_binding.yaml&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rbac.authorization.k8s.io/v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ClusterRoleBinding&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">admin-user&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">roleRef&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">apiGroup&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rbac.authorization.k8s.io&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ClusterRole&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cluster-admin&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">subjects&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ServiceAccount&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">admin-user&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">kubernetes-dashboard&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åº”ç”¨é…ç½®&lt;code>kubectl create -f admin_account_role_binding.yaml&lt;/code>&lt;/p>
&lt;p>å¥½äº†ï¼Œ æ¥ä¸‹æ¥æŸ¥çœ‹åˆ›å»ºçš„ç”¨æˆ·token&lt;/p>
&lt;p>&lt;code>kubectl -n kubernetes-dashboard describe secret $(kubectl -n kubernetes-dashboard get secret | grep admin-user | awk '{print $1}')&lt;/code>&lt;/p>
&lt;p>ä½¿ç”¨è¾“å‡ºçš„å¾ˆé•¿å¾ˆé•¿çš„tokenç™»é™†&lt;/p>
&lt;p>&lt;img src="https://hitian.info/assets/images/201807/Kubernetes-dashboard.png" alt="Kubernetes-dashboard" />&lt;/p>
&lt;h2 id="é”€æ¯">é”€æ¯&lt;/h2>
&lt;p>&lt;em>&lt;strong>æ³¨æ„ï¼Œè¿™é‡Œæ˜¯é”€æ¯&lt;/strong>&lt;/em>&lt;/p>
&lt;h3 id="ç§»é™¤node">ç§»é™¤Node&lt;/h3>
&lt;p>åœ¨Mater ä¸Šæ‰§è¡Œ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubectl drain &amp;lt;node name&amp;gt; --delete-local-data --force --ignore-daemonsets
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubectl delete node &amp;lt;node name&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç„¶ååœ¨å¯¹åº”çš„Node ä¸Šæ‰§è¡Œ&lt;code>kubeadm reset&lt;/code>&lt;/p>
&lt;h3 id="åˆ é™¤master">åˆ é™¤Master&lt;/h3>
&lt;p>ç›´æ¥æ‰§è¡Œ &lt;code>kubeadm reset&lt;/code> å°±å¯ä»¥äº†&lt;/p>
&lt;p>å…¨æ–‡å®Œ&lt;/p></description></item><item><title>ä½¿ç”¨netplanç®¡ç†ubuntu çš„ç½‘ç»œé…ç½®</title><link>https://hitian.info/post/ubuntu-server-set-network-netplan/</link><pubDate>Tue, 10 Jul 2018 00:00:00 +0000</pubDate><guid>https://hitian.info/post/ubuntu-server-set-network-netplan/</guid><description>&lt;p>æœ€æ–°çš„ubuntuå·²ç»ä½¿ç”¨&lt;code>netplan&lt;/code>æ¥ç®¡ç†ç½‘ç»œé…ç½®äº†&lt;/p>
&lt;p>åˆ—å‡ºå½“å‰çš„é…ç½®æ–‡ä»¶&lt;code>ls -al /etc/netplan/&lt;/code>ï¼Œ æ³¨æ„é…ç½®æ–‡ä»¶ä¸ºyamlæ ¼å¼ï¼Œ å¦‚æœå½“å‰æ²¡æœ‰é…ç½®ï¼Œ å¯ä»¥åˆ›å»ºä¸€ä¸ªä¾‹å¦‚&lt;code>/etc/netplan/01-netcfg.yaml&lt;/code>&lt;/p>
&lt;h2 id="ä¾‹å­">ä¾‹å­&lt;/h2>
&lt;h3 id="é…ç½®ä¸ºä½¿ç”¨dhcp">é…ç½®ä¸ºä½¿ç”¨DHCP&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">network&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">renderer&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">networkd&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ethernets&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ens33&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dhcp4&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">yes&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dhcp6&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">yes&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="é…ç½®ä¸ºé™æ€ip">é…ç½®ä¸ºé™æ€ip&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">network&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">renderer&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">networkd&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ethernets&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ens33&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dhcp4&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">no&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dhcp6&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">no&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">addresses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">192.168.1.2&lt;/span>&lt;span class="l">/24]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">gateway4&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">192.168.1.1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">nameservers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">addresses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="m">8.8.8.8&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="m">8.8.4.4&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>é…ç½®æ–‡ä»¶ä¿®æ”¹å¥½ä¹‹åä½¿ç”¨&lt;code>sudo netplan apply&lt;/code>åº”ç”¨é…ç½®ï¼Œ å¯ä»¥åŠ debugå‚æ•°æ¥æŸ¥çœ‹å…·ä½“çš„è¿‡ç¨‹&lt;code>sudo netplan --debug apply&lt;/code>&lt;/p></description></item><item><title>å¸¸ç”¨çš„ x-callback é“¾æ¥</title><link>https://hitian.info/post/x-callback-links/</link><pubDate>Mon, 09 Jul 2018 00:00:00 +0000</pubDate><guid>https://hitian.info/post/x-callback-links/</guid><description>&lt;h3 id="omnifocus-change-language">OmniFocus change language&lt;/h3>
&lt;ul>
&lt;li>Reset &lt;a class="link" href="omnifocus:///change-preference?AppleLanguages=" >omnifocus:///change-preference?AppleLanguages=&lt;/a>&lt;/li>
&lt;li>ä¸­æ–‡ &lt;a class="link" href="omnifocus:///change-preference?AppleLanguages=zh" >omnifocus:///change-preference?AppleLanguages=zh&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="bear">Bear&lt;/h3>
&lt;ul>
&lt;li>Create note &lt;a class="link" href="bear://x-callback-url/create?title=Title&amp;amp;text=Text&amp;amp;tags=tag1,tag2" >bear://x-callback-url/create?title=Title&amp;amp;text=Text&amp;amp;tags=tag1,tag2&lt;/a>&lt;/li>
&lt;li>Open tag &lt;a class="link" href="bear://x-callback-url/open-tag?name=tag-name" >bear://x-callback-url/open-tag?name=tag-name&lt;/a>&lt;/li>
&lt;li>Search note &lt;a class="link" href="bear://x-callback-url/search?term=keyword" >bear://x-callback-url/search?term=keyword&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="due">Due&lt;/h3>
&lt;ul>
&lt;li>Add &lt;a class="link" href="due://x-callback-url/add?title=title" >due://x-callback-url/add?title=title&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Deploying an etcd cluster as a standalone cluster on docker</title><link>https://hitian.info/post/docker-run-etcd/</link><pubDate>Sun, 08 Jul 2018 00:00:00 +0000</pubDate><guid>https://hitian.info/post/docker-run-etcd/</guid><description>&lt;p>docker host ip addr &lt;code>192.168.5.170&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker run &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -p 2379:2379 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -p 2380:2380 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --volume&lt;span class="o">=&lt;/span>/dir/for/etcd/data:/etcd-data &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --name etcd --rm -d quay.io/coreos/etcd:latest &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> /usr/local/bin/etcd &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --data-dir&lt;span class="o">=&lt;/span>/etcd-data --name node1 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --initial-advertise-peer-urls http://192.168.5.170:2380 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --listen-peer-urls http://0.0.0.0:2380 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --advertise-client-urls http://192.168.5.170:2379 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --listen-client-urls http://0.0.0.0:2379 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --initial-cluster &lt;span class="nv">node1&lt;/span>&lt;span class="o">=&lt;/span>http://192.168.5.170:2380
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>with tls certificate.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker run --name etcd -d -p 2379:2379 -p 2380:2380 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -v /home/tian/workspace/certs:/etcd-ssl-certs-dir &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -v /home/tian/workspace/etcd:/etcd-data &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> quay.io/coreos/etcd:latest /usr/local/bin/etcd &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --name my-name &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --data-dir /etcd-data &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --listen-client-urls &lt;span class="s2">&amp;#34;https://0.0.0.0:2379&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --advertise-client-urls &lt;span class="s2">&amp;#34;https://hostname:2379&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --listen-peer-urls &lt;span class="s2">&amp;#34;https://0.0.0.0:2380&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --initial-advertise-peer-urls &lt;span class="s2">&amp;#34;https://hostname:2380&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --initial-cluster &lt;span class="s2">&amp;#34;my-name=https://hostname:2380&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --initial-cluster-token &lt;span class="s2">&amp;#34;tkn&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --initial-cluster-state &lt;span class="s2">&amp;#34;new&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --client-cert-auth &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --trusted-ca-file &lt;span class="s2">&amp;#34;/etcd-ssl-certs-dir/ca.pem&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --cert-file &lt;span class="s2">&amp;#34;/etcd-ssl-certs-dir/server.pem&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --key-file &lt;span class="s2">&amp;#34;/etcd-ssl-certs-dir/server-key.pem&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --peer-client-cert-auth &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --peer-trusted-ca-file &lt;span class="s2">&amp;#34;/etcd-ssl-certs-dir/ca.pem&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --peer-cert-file &lt;span class="s2">&amp;#34;/etcd-ssl-certs-dir/server.pem&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --peer-key-file &lt;span class="s2">&amp;#34;/etcd-ssl-certs-dir/server-key.pem&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>check&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker &lt;span class="nb">exec&lt;/span> -it etcd etcdctl member list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>test with golang&lt;/p>
&lt;p>{% gist 211bd79f3ce5a6e1fde607086a75c46b %}&lt;/p>
&lt;p>create golang client with certificate.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//load client certificate.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">cert&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">tls&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">LoadX509KeyPair&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;./client.pem&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;./client-key.pem&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//load ca certificate.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">rootCAPem&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">ioutil&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">ReadFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;ca.pem&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">caPool&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">x509&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">NewCertPool&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">ok&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">caPool&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">AppendCertsFromPEM&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">rootCAPem&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="p">!&lt;/span>&lt;span class="nx">ok&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;append ca cert failed.&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">cfg&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">client&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Config&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Endpoints&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;https://hostname:2379&amp;#34;&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Transport&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Transport&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">TLSClientConfig&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nx">tls&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Config&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Certificates&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>&lt;span class="nx">tls&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Certificate&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="nx">cert&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">RootCAs&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">caPool&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">HeaderTimeoutPerRequest&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">time&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Second&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>vmware esxi unregister invalid vm</title><link>https://hitian.info/post/esxi-unregister-invalid-vm/</link><pubDate>Sun, 05 Nov 2017 00:00:00 +0000</pubDate><guid>https://hitian.info/post/esxi-unregister-invalid-vm/</guid><description>&lt;p>*** ä»¥ä¸‹å†…å®¹é’ˆå¯¹ VMware ESXi 6.5.0 build-6765664 ***&lt;/p>
&lt;p>æ„å¤–åˆ é™¤äº†esxi çš„ä¸€ä¸ªvmfsæ‰€åœ¨çš„ç£ç›˜ï¼Œå¯¼è‡´vmåˆ—è¡¨ä¸‹ä¸€ç›´ä¼šæ˜¾ç¤ºä¸€ä¸ªinvalidçŠ¶æ€çš„VMï¼Œ æ— æ³•è¿›è¡Œä»»ä½•æ“ä½œï¼Œçœ‹ç€éå¸¸ç¢çœ¼ã€‚æ˜¾ç„¶é€šè¿‡webç•Œé¢å¯èƒ½æ— æ³•å¤„ç†è¿™ä¸ªé—®é¢˜äº†&lt;/p>
&lt;p>å¼€å¯SSHæœåŠ¡ï¼Œç™»å½•esxiã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@localhost:/vmfs&lt;span class="o">]&lt;/span> vim-cmd vmsvc/getallvms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Skipping invalid VM &lt;span class="s1">&amp;#39;6&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Vmid Name File Guest OS Version Annotation
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">1&lt;/span> ubuntu-desktop &lt;span class="o">[&lt;/span>HDD&lt;span class="o">]&lt;/span> ubuntu-desktop/ubuntu-desktop.vmx ubuntu64Guest vmx-13
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">11&lt;/span> ubuntu-server-1710 &lt;span class="o">[&lt;/span>HDD&lt;span class="o">]&lt;/span> ubuntu-server-1710/ubuntu-server-1710.vmx ubuntu64Guest vmx-13
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">2&lt;/span> ubuntu-server &lt;span class="o">[&lt;/span>HDD&lt;span class="o">]&lt;/span> ubuntu-server/ubuntu-server.vmx ubuntu64Guest vmx-13
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">3&lt;/span> windows-7 &lt;span class="o">[&lt;/span>HDD&lt;span class="o">]&lt;/span> windows-7/windows-7.vmx windows7_64Guest vmx-13
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä½¿ç”¨ &lt;code>vim-cmd vmsvc/getallvms&lt;/code> å‘½ä»¤å¯ä»¥çœ‹åˆ°æç¤ºå‡ºç°é—®é¢˜çš„æ˜¯ VM 6ï¼Œ æ¥ä¸‹æ¥ç›´æ¥åˆ é™¤å°±å¥½äº†ã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@localhost:/vmfs&lt;span class="o">]&lt;/span> vim-cmd vmsvc/unregister &lt;span class="m">6&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åˆ·æ–°webç•Œé¢ï¼Œ å°±å¯ä»¥çœ‹åˆ°å‡ºé”™çš„vmå·²ç»è¢«åˆ é™¤äº†ã€‚&lt;/p></description></item><item><title>ä½¿ç”¨ACME Shell scriptå’Œdnspodçš„apiè‡ªåŠ¨ç”ŸæˆLet's Encryptè¯ä¹¦</title><link>https://hitian.info/post/acme-sh-create-letsencrypt-certificates-with-dns-api/</link><pubDate>Thu, 16 Feb 2017 00:00:00 +0000</pubDate><guid>https://hitian.info/post/acme-sh-create-letsencrypt-certificates-with-dns-api/</guid><description>&lt;h3 id="å®‰è£…-acmesh">å®‰è£… acme.sh&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl https://get.acme.sh &lt;span class="p">|&lt;/span> sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å‚è€ƒ &lt;a class="link" href="https://github.com/Neilpang/acme.sh" target="_blank" rel="noopener"
>https://github.com/Neilpang/acme.sh&lt;/a>&lt;/p>
&lt;p>å®‰è£…å®Œæˆä¹‹åå¯æ‰§è¡Œæ–‡ä»¶ä½äº &lt;code>~/.acme.sh/acme.sh&lt;/code>&lt;/p>
&lt;h3 id="ç”Ÿæˆ-dnspod-çš„api-token">ç”Ÿæˆ dnspod çš„API Token&lt;/h3>
&lt;p>åœ°å€ &lt;a class="link" href="https://www.dnspod.cn/console/user/security" target="_blank" rel="noopener"
>https://www.dnspod.cn/console/user/security&lt;/a>&lt;/p>
&lt;p>ç”¨æˆ·ä¸­å¿ƒ &amp;gt; å®‰å…¨è®¾ç½® &amp;gt; API Token &amp;gt; åˆ›å»º API Token&lt;/p>
&lt;p>æ³¨æ„ï¼ŒToken åªæ˜¾ç¤ºä¸€æ¬¡ï¼Œ ä¿å­˜ä¸‹æ¥ï¼Œ å¦‚æœå¿˜è®°äº†ï¼Œ å°±åªèƒ½åˆ é™¤ç„¶åé‡æ–°ç”Ÿæˆäº†ã€‚&lt;/p>
&lt;p>è¿˜éœ€éœ€è¦è®°å½•ä¸‹ API Token çš„ ID&lt;/p>
&lt;h3 id="å¼€å§‹ç­¾å‘è¯ä¹¦">å¼€å§‹ç­¾å‘è¯ä¹¦&lt;/h3>
&lt;p>å‚è€ƒ &lt;a class="link" href="https://github.com/Neilpang/acme.sh/tree/master/dnsapi" target="_blank" rel="noopener"
>https://github.com/Neilpang/acme.sh/tree/master/dnsapi&lt;/a>&lt;/p>
&lt;p>é¦–å…ˆè®¾ç½®ç¯å¢ƒå˜é‡&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">DP_Id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;API Token çš„ ID&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">DP_Key&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;API Token&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç„¶åå¯ä»¥å¼€å§‹ç­¾å‘äº†&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">acme.sh --issue --dns dns_dp -d example.com -d www.example.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ¯ä¸ª &lt;code>-d&lt;/code> å‚æ•°å¯ä»¥æŒ‡å®šä¸€ä¸ªåŸŸåï¼Œ å¯ä»¥æŠŠéœ€è¦ç”¨åˆ°çš„å­åŸŸåä¹Ÿå…¨éƒ¨åˆ—å‡ºæ¥&lt;/p>
&lt;p>è‡ªåŠ¨è¿è¡Œçš„æµç¨‹å¤§æ¦‚æ˜¯è¿™æ ·çš„&lt;/p>
&lt;ul>
&lt;li>ä½¿ç”¨dnspodçš„api è‡ªåŠ¨ç”Ÿæˆæ‰€æœ‰çš„éªŒè¯åŸŸåtxtè®°å½• _acme-challenge.example.comï¼Œ æ¯ä¸ªå­åŸŸåä¹Ÿä¼šæœ‰_acme-challenge.www.example.com&lt;/li>
&lt;li>ç­‰å¾…dnsè®°å½•ç”Ÿæ•ˆï¼Œè‡ªåŠ¨è„šæœ¬ä¼šsleep 120 ç§’&lt;/li>
&lt;li>æ£€æŸ¥éªŒè¯çš„dnsè®°å½•ï¼Œ æ²¡æœ‰é—®é¢˜çš„è¯ç­¾å‘è¯ä¹¦ä¿å­˜åˆ°æœ¬åœ°ï¼Œ å†æ¬¡è°ƒç”¨api ç§»é™¤éªŒè¯çš„åŸŸå&lt;/li>
&lt;li>åˆ›å»ºcrontab è‡ªåŠ¨æ›´æ–°ç›¸å…³è¯ä¹¦ã€‚&lt;/li>
&lt;/ul>
&lt;p>ç”Ÿæˆå¥½çš„è¯ä¹¦ä½äº &lt;code>~/.acme.sh/www.example.com&lt;/code> ç›®å½•ä¸‹, è‡³æ­¤è¯ä¹¦å°±ç­¾å‘å¥½äº†ã€‚&lt;/p>
&lt;p>å¦å¤–è‡ªåŠ¨åˆ›å»ºçš„ crontab&lt;/p>
&lt;p>&lt;code>24 0 * * * &amp;quot;/home/tian/.acme.sh&amp;quot;/acme.sh --cron --home &amp;quot;/home/tian/.acme.sh&amp;quot; &amp;gt; /dev/null&lt;/code>&lt;/p>
&lt;p>åº”è¯¥ä¼šæ¯å¤©è¿è¡Œä¸€æ¬¡ï¼Œ åœ¨è¯ä¹¦è¿‡æœŸå‰è‡ªåŠ¨æ›´æ–°ã€‚&lt;/p></description></item><item><title>Ubuntu Server Install BBR</title><link>https://hitian.info/post/ubuntu-server-install-bbr/</link><pubDate>Tue, 07 Feb 2017 00:00:00 +0000</pubDate><guid>https://hitian.info/post/ubuntu-server-install-bbr/</guid><description>&lt;p>é¦–å…ˆéœ€è¦æ›´æ–°åˆ°4.9ä»¥ä¸Šçš„å†…æ ¸ç‰ˆæœ¬ï¼Œ ubuntuå’Œdebianå¯ä»¥å‚è€ƒ &lt;a class="link" href="https://hitian.info/notes/2017/02/07/ubuntu-server-install-mainline-kernel/" target="_blank" rel="noopener"
>è¿™é‡Œ&lt;/a>&lt;/p>
&lt;p>é‡å¯ç¡®è®¤å†…æ ¸ç‰ˆæœ¬å‡çº§å®Œæˆç»§ç»­&lt;/p>
&lt;p>ä»¥rootç”¨æˆ·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;net.core.default_qdisc=fq&amp;#34;&lt;/span> &amp;gt;&amp;gt; /etc/sysctl.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;net.ipv4.tcp_congestion_control=bbr&amp;#34;&lt;/span> &amp;gt;&amp;gt; /etc/sysctl.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sysctl -p
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ£€æŸ¥æ˜¯å¦ä¿®æ”¹æˆåŠŸ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sysctl net.ipv4.tcp_available_congestion_control
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#ç»“æœå¦‚ä¸‹ï¼Œ åŒ…å«bbr&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#net.ipv4.tcp_available_congestion_control = bbr cubic reno&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lsmod &lt;span class="p">|&lt;/span> grep bbr
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#ç»“æœå¦‚ä¸‹ï¼Œ åŒ…å« tcp_bbr&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#tcp_bbr 20480 40&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Ubuntu Server Install Mainline Kernel</title><link>https://hitian.info/post/ubuntu-server-install-mainline-kernel/</link><pubDate>Tue, 07 Feb 2017 00:00:00 +0000</pubDate><guid>https://hitian.info/post/ubuntu-server-install-mainline-kernel/</guid><description>&lt;h3 id="ä¸‹è½½æœ€æ–°çš„å†…æ ¸">ä¸‹è½½æœ€æ–°çš„å†…æ ¸&lt;/h3>
&lt;p>&lt;!-- raw HTML omitted -->&lt;a class="link" href="http://kernel.ubuntu.com/~kernel-ppa/mainline/?C=N;O=D" target="_blank" rel="noopener"
>http://kernel.ubuntu.com/~kernel-ppa/mainline/?C=N;O=D&lt;/a>&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>è¿›å…¥æœ€æ–°çš„ç‰ˆæœ¬ç›®å½•&lt;/p>
&lt;p>éœ€è¦ä¸‹è½½4ä¸ªæ–‡ä»¶&lt;/p>
&lt;ul>
&lt;li>linux-headers-XXXXX_XXXXX_all.deb&lt;/li>
&lt;li>linux-headers-XXXXX-generic_XXXXX_PLATFORM.deb&lt;/li>
&lt;li>linux-image-unsigned-XXXXX-generic_XXXXX_PLATFORM.deb&lt;/li>
&lt;li>linux-modules-XXXXX-generic_XXXXX_PLATFORM.deb&lt;/li>
&lt;/ul>
&lt;p>ä¾‹å¦‚ç›®å‰æœ€æ–°çš„æ˜¯v4.17.5 (2018-07-09), ä¸‹è½½è¿™4ä¸ªæ–‡ä»¶&lt;/p>
&lt;ul>
&lt;li>linux-headers-4.17.5-041705_4.17.5-041705.201807081431_all.deb&lt;/li>
&lt;li>linux-headers-4.17.5-041705-generic_4.17.5-041705.201807081431_amd64.deb&lt;/li>
&lt;li>linux-image-unsigned-4.17.5-041705-generic_4.17.5-041705.201807081431_amd64.deb&lt;/li>
&lt;li>linux-modules-4.17.5-041705-generic_4.17.5-041705.201807081431_amd64.deb&lt;/li>
&lt;/ul>
&lt;h3 id="å®‰è£…">å®‰è£…&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dpkg -i *.deb
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¦‚æœå®‰è£…æŠ¥é”™æç¤º&lt;code>libssl1.1&lt;/code>æ²¡æœ‰å®‰è£…&lt;/p>
&lt;pre tabindex="0">&lt;code>Unpacking openssl (1.1.0g-2ubuntu5) over (1.0.2g-1ubuntu4.13) ...
dpkg: dependency problems prevent configuration of openssl:
openssl depends on libssl1.1 (&amp;gt;= 1.1.0); however:
Package libssl1.1 is not installed.
dpkg: error processing package openssl (--install):
dependency problems - leaving unconfigured
&lt;/code>&lt;/pre>&lt;p>å¯ä»¥ä»&lt;a class="link" href="http://security.ubuntu.com/ubuntu/pool/main/o/openssl/" target="_blank" rel="noopener"
>http://security.ubuntu.com/ubuntu/pool/main/o/openssl/&lt;/a> ä¸‹è½½å®‰è£…&lt;/p>
&lt;p>æ³¨æ„: å¦‚æœä½¿ç”¨çš„æ˜¯linodeï¼Œ è¿˜éœ€è¦åœ¨åå°è°ƒæ•´ Configuration Profile &amp;gt; Boot Settings &amp;gt; Kernel ä¸º &lt;code>GRUB 2&lt;/code> æ‰èƒ½å¯åŠ¨åˆ°æ›´æ–°åçš„å†…æ ¸ã€‚&lt;/p>
&lt;h3 id="å®‰è£…å®Œæˆåé‡å¯ä¸€ä¸‹">å®‰è£…å®Œæˆåé‡å¯ä¸€ä¸‹&lt;/h3>
&lt;p>ç¡®è®¤ä¸€ä¸‹å†…æ ¸æ˜¯å¦å‡çº§æˆåŠŸ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">uname -a
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Google Compute Engine ç®€å•æµ‹è¯•</title><link>https://hitian.info/post/google-compute-engine-simple-test/</link><pubDate>Tue, 17 Jan 2017 00:00:00 +0000</pubDate><guid>https://hitian.info/post/google-compute-engine-simple-test/</guid><description>&lt;p>è¿™å‡ å¤©åœ¨è¯•ç”¨Google Cloud Platformï¼Œè§‰å¾—Compute Engineçš„è¿è¡Œé€Ÿåº¦è²Œä¼¼æŒºæ…¢çš„ï¼Œå°±æµ‹è¯•äº†ä¸€ä¸‹&lt;/p>
&lt;p>é€‰äº†è·ç¦»æ¯”è¾ƒè¿‘çš„åŒºåŸŸ asia-east1-a, è²Œä¼¼æ˜¯åœ¨å°æ¹¾çš„ã€‚&lt;/p>
&lt;p>åˆ›å»ºäº†3ä¸ªä¸åŒé…ç½®çš„å®ä¾‹&lt;/p>
&lt;ol>
&lt;li>f1-microï¼ˆ1 ä¸ª vCPUï¼Œ0.6 GB å†…å­˜ï¼‰ &lt;code>$5.00/æœˆ&lt;/code>&lt;/li>
&lt;li>g1-smallï¼ˆ1 ä¸ª vCPUï¼Œ1.7 GB å†…å­˜ï¼‰ &lt;code>$15.73/æœˆ&lt;/code>&lt;/li>
&lt;li>n1-standard-1ï¼ˆ1 ä¸ª vCPUï¼Œ3.75 GB å†…å­˜ï¼‰&lt;code>$28.50/æœˆ&lt;/code>&lt;/li>
&lt;/ol>
&lt;p>ç³»ç»Ÿéƒ½é€‰æ‹©äº† &lt;code>Ubuntu 16.04.1 LTS&lt;/code>&lt;/p>
&lt;h4 id="cpuæµ‹è¯•">CPUæµ‹è¯•&lt;/h4>
&lt;p>æµ‹è¯•æ–¹å¼ Node.js v7.4.0 æºä»£ç ç¼–è¯‘ (æ—¶é—´ç»Ÿè®¡æ–¹å¼ &lt;code>time make&lt;/code>)&lt;/p>
&lt;ol>
&lt;li>f1: 155m35.651s ï¼ˆä¸¤ä¸ªå¤šå°æ—¶ã€‚ã€‚ï¼‰&lt;/li>
&lt;li>g1: 55m9.996s&lt;/li>
&lt;li>n1: 28m27.362s&lt;/li>
&lt;/ol>
&lt;p>ç›¸æ¯”ä¹‹ä¸‹&lt;/p>
&lt;ul>
&lt;li>digitalocean &lt;code>$5.00/æœˆ&lt;/code> çš„æœ€ä½é…ç”¨æ—¶ 43m11.467s&lt;/li>
&lt;li>æœ¬åœ°çš„ç¬”è®°æœ¬i7-5557mçš„CPUä½¿ç”¨2ä¸ªæ ¸å¿ƒ 27m47.806s&lt;/li>
&lt;/ul>
&lt;p>å¦å¤–f1å’Œg1æ˜¯å…±äº«cpuçš„
&lt;img src="https://hitian.info/assets/images/201701/GCE-Screen-Shot-2017-01-14-at-09.57.07.png" alt="GCE-cpu-Screen-Shot" />&lt;/p>
&lt;p>å¯ä»¥çœ‹åˆ°åœ¨cpuè´Ÿè½½ä¸Šå‡åå¯ä»¥è¶…è¿‡é™åˆ¶è¿è¡ŒçŸ­æš‚çš„æ—¶é—´ã€‚&lt;/p>
&lt;h4 id="ç„¶åæµ‹è¯•ä¸€ä¸‹ç£ç›˜çš„io">ç„¶åæµ‹è¯•ä¸€ä¸‹ç£ç›˜çš„IO&lt;/h4>
&lt;p>æµ‹è¯•æ–¹å¼ ç›´æ¥ä½¿ç”¨ &lt;code>dd if=/dev/zero of=/var/swap.img bs=1024k count=1000&lt;/code> åˆ›å»ºä¸€ä¸ª1Gçš„å¤§æ–‡ä»¶&lt;/p>
&lt;ol>
&lt;li>f1: 1048576000 bytes (1.0 GB, 1000 MiB) copied, 25.6226 s, 40.9 MB/s&lt;/li>
&lt;li>g1: 1048576000 bytes (1.0 GB, 1000 MiB) copied, 21.2997 s, 49.2 MB/s&lt;/li>
&lt;li>n1: 1048576000 bytes (1.0 GB, 1000 MiB) copied, 4.83823 s, 217 MB/s&lt;/li>
&lt;/ol>
&lt;p>å¯ä»¥å› ä¸ºé€‰æ‹©çš„æ˜¯&lt;code>æ–°çš„ 10 GB æ ‡å‡†æ°¸ä¹…æ€§ç£ç›˜&lt;/code>ï¼Œ é€Ÿåº¦æ„Ÿè§‰ä¸€èˆ¬èˆ¬äº†&lt;/p>
&lt;p>ç›¸æ¯”ä¹‹ä¸‹digitaloceanå› ä¸ºç”¨çš„SSD, é€Ÿåº¦å¿«äº†ä¸æ­¢ä¸€ç‚¹
oc: 1048576000 bytes (1.0 GB, 1000 MiB) copied, 1.71034 s, 613 MB/s&lt;/p>
&lt;p>ä»ç®€å•çš„æµ‹è¯•æ•°æ®æ¥çœ‹ï¼Œ å¾ˆæ˜æ˜¾å¦‚æœæ˜¯å¹³æ—¶ç”¨æ¥æŠ˜è…¾çš„vpsçš„è¯GCEæ€§ä»·æ¯”å¤ªä½äº†ã€‚è€Œä¸”ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼ŒGCEåˆ›å»ºä¸€ä¸ªå®ä¾‹å·®ä¸å¤šè¦è€—æ—¶2åˆ†é’Ÿå·¦å³ğŸ˜‚&lt;/p>
&lt;h5 id="ps">ps&lt;/h5>
&lt;p>f1 é»˜è®¤çš„0.6Gå†…å­˜ç¼–è¯‘Node.jsç«Ÿç„¶ä¼šä¸å¤Ÿç”¨ã€‚åŠ äº†è™šæ‹Ÿå†…å­˜ä¹‹åæ‰é¡ºåˆ©çš„ç¼–è¯‘å®Œæˆ&lt;/p>
&lt;p>Ubuntu æ·»åŠ swap:&lt;/p>
&lt;p>&lt;code>dd if=/dev/zero of=/var/swap.img bs=1024k count=1000&lt;/code>&lt;/p>
&lt;p>&lt;code>mkswap /var/swap.img&lt;/code>&lt;/p>
&lt;p>&lt;code>swapon /var/swap.img&lt;/code>&lt;/p></description></item><item><title>OSXä¸Šä¸æ­£ç¡®çš„å­—ä½“è®¾ç½®å¯¼è‡´éƒ¨åˆ†è½¯ä»¶å´©æºƒçš„é—®é¢˜</title><link>https://hitian.info/post/sourcetree-crash-by-font-osx/</link><pubDate>Sun, 13 Mar 2016 00:00:00 +0000</pubDate><guid>https://hitian.info/post/sourcetree-crash-by-font-osx/</guid><description>&lt;p>SourceTree å’Œ FontBook æ‰“å¼€å°±å´©æºƒæœ‰ä¸€æ®µæ—¶é—´äº†. éƒ¨åˆ†crash log å¦‚ä¸‹;&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">Process: SourceTree &lt;span class="o">[&lt;/span>555&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Path: /Applications/SourceTree.app/Contents/MacOS/SourceTree
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Identifier: com.torusknot.SourceTreeNotMAS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Version: 2.2.2 &lt;span class="o">(&lt;/span>51&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Code Type: X86-64 &lt;span class="o">(&lt;/span>Native&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Parent Process: ??? &lt;span class="o">[&lt;/span>1&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Responsible: SourceTree &lt;span class="o">[&lt;/span>555&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User ID: &lt;span class="m">501&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Date/Time: 2016-03-13 15:34:07.628 +0800
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">OS Version: Mac OS X 10.11.3 &lt;span class="o">(&lt;/span>15D21&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Report Version: &lt;span class="m">11&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Time Awake Since Boot: &lt;span class="m">550&lt;/span> seconds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">System Integrity Protection: enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Crashed Thread: &lt;span class="m">15&lt;/span> Dispatch queue: com.apple.root.default-qos
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Exception Type: EXC_BAD_ACCESS &lt;span class="o">(&lt;/span>SIGSEGV&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Exception Codes: KERN_INVALID_ADDRESS at 0x000007fc4a1f7ab0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Exception Note: EXC_CORPSE_NOTIFY
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">VM Regions Near 0x7fc4a1f7ab0:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Process Corpse Info 0000000128acb000-0000000128ccb000 &lt;span class="o">[&lt;/span> 2048K&lt;span class="o">]&lt;/span> rw-/rwx &lt;span class="nv">SM&lt;/span>&lt;span class="o">=&lt;/span>COW
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> JS JIT generated code 00003a1034000000-00003a1034001000 &lt;span class="o">[&lt;/span> 4K&lt;span class="o">]&lt;/span> ---/rwx &lt;span class="nv">SM&lt;/span>&lt;span class="o">=&lt;/span>NUL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Application Specific Information:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">objc_msgSend&lt;span class="o">()&lt;/span> selector name: retain
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Thread 0:: Dispatch queue: com.apple.main-thread
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">0&lt;/span> com.apple.Foundation 0x000000010c558949 -&lt;span class="o">[&lt;/span>_NSCachedIndexSet autorelease&lt;span class="o">]&lt;/span> + &lt;span class="m">8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">1&lt;/span> com.apple.AppKit 0x000000010d09762c -&lt;span class="o">[&lt;/span>NSTableView&lt;span class="o">(&lt;/span>NSTableViewViewBased&lt;span class="o">)&lt;/span> hiddenRowIndexes&lt;span class="o">]&lt;/span> + &lt;span class="m">56&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">2&lt;/span> com.apple.AppKit 0x000000010d0974ea -&lt;span class="o">[&lt;/span>_NSTableRowHeightStorage _normalComputeRectOfRow:assumingExists:&lt;span class="o">]&lt;/span> + &lt;span class="m">151&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">3&lt;/span> com.apple.AppKit 0x000000010cfcbf46 -&lt;span class="o">[&lt;/span>_NSTableRowHeightStorage computeRectOfRow:assumingExists:&lt;span class="o">]&lt;/span> + &lt;span class="m">167&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">4&lt;/span> com.apple.AppKit 0x000000010cfcbe5c -&lt;span class="o">[&lt;/span>NSTableView _rectOfRowAssumingRowExists:&lt;span class="o">]&lt;/span> + &lt;span class="m">178&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">5&lt;/span> com.apple.AppKit 0x000000010cfcbb80 -&lt;span class="o">[&lt;/span>NSTableView rectOfRow:&lt;span class="o">]&lt;/span> + &lt;span class="m">88&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">6&lt;/span> com.apple.AppKit 0x000000010cfd5e40 -&lt;span class="o">[&lt;/span>NSTableView frameOfCellAtColumn:row:&lt;span class="o">]&lt;/span> + &lt;span class="m">308&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">7&lt;/span> com.torusknot.SourceTreeNotMAS 0x000000010a45922e 0x10a330000 + &lt;span class="m">1217070&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">8&lt;/span> com.apple.AppKit 0x000000010d09a1f3 -&lt;span class="o">[&lt;/span>NSTableView drawRow:clipRect:&lt;span class="o">]&lt;/span> + &lt;span class="m">1144&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">9&lt;/span> com.apple.AppKit 0x000000010d099aeb -&lt;span class="o">[&lt;/span>NSTableView drawRowIndexes:clipRect:&lt;span class="o">]&lt;/span> + &lt;span class="m">919&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">10&lt;/span> com.apple.AppKit 0x000000010d098403 -&lt;span class="o">[&lt;/span>NSTableView drawRect:&lt;span class="o">]&lt;/span> + &lt;span class="m">1480&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">11&lt;/span> com.apple.AppKit 0x000000010cf311fe -&lt;span class="o">[&lt;/span>NSView&lt;span class="o">(&lt;/span>NSInternal&lt;span class="o">)&lt;/span> _recursive:displayRectIgnoringOpacity:inGraphicsContext:CGContext:topView:shouldChangeFontReferenceColor:&lt;span class="o">]&lt;/span> + &lt;span class="m">1331&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">12&lt;/span> com.apple.AppKit 0x000000010cf30b98 __46-&lt;span class="o">[&lt;/span>NSView&lt;span class="o">(&lt;/span>NSLayerKitGlue&lt;span class="o">)&lt;/span> drawLayer:inContext:&lt;span class="o">]&lt;/span>_block_invoke + &lt;span class="m">242&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">13&lt;/span> com.apple.AppKit 0x000000010cf30843 -&lt;span class="o">[&lt;/span>NSView&lt;span class="o">(&lt;/span>NSLayerKitGlue&lt;span class="o">)&lt;/span> _drawViewBackingLayer:inContext:drawingHandler:&lt;span class="o">]&lt;/span> + &lt;span class="m">2403&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">14&lt;/span> com.apple.AppKit 0x000000010cf2fed5 -&lt;span class="o">[&lt;/span>NSView&lt;span class="o">(&lt;/span>NSLayerKitGlue&lt;span class="o">)&lt;/span> drawLayer:inContext:&lt;span class="o">]&lt;/span> + &lt;span class="m">108&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">15&lt;/span> com.apple.AppKit 0x000000010d0d0d8c -&lt;span class="o">[&lt;/span>_NSBackingLayerContents drawLayer:inContext:&lt;span class="o">]&lt;/span> + &lt;span class="m">157&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">16&lt;/span> com.apple.QuartzCore 0x000000010f6d3927 -&lt;span class="o">[&lt;/span>CALayer drawInContext:&lt;span class="o">]&lt;/span> + &lt;span class="m">257&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">17&lt;/span> com.apple.AppKit 0x000000010d0d0862 -&lt;span class="o">[&lt;/span>_NSTiledLayer drawTile:inContext:&lt;span class="o">]&lt;/span> + &lt;span class="m">625&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">18&lt;/span> com.apple.AppKit 0x000000010d0d0593 -&lt;span class="o">[&lt;/span>_NSTiledLayerContents drawLayer:inContext:&lt;span class="o">]&lt;/span> + &lt;span class="m">185&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">19&lt;/span> com.apple.QuartzCore 0x000000010f6d3927 -&lt;span class="o">[&lt;/span>CALayer drawInContext:&lt;span class="o">]&lt;/span> + &lt;span class="m">257&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">20&lt;/span> com.apple.AppKit 0x000000010d0d04d1 -&lt;span class="o">[&lt;/span>NSTileLayer drawInContext:&lt;span class="o">]&lt;/span> + &lt;span class="m">169&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">21&lt;/span> com.apple.QuartzCore 0x000000010f6d1e79 CABackingStoreUpdate_ + &lt;span class="m">3494&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">22&lt;/span> com.apple.QuartzCore 0x000000010f6d10cd ___ZN2CA5Layer8display_Ev_block_invoke + &lt;span class="m">59&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">23&lt;/span> com.apple.QuartzCore 0x000000010f6c4d31 CA::Layer::display_&lt;span class="o">()&lt;/span> + &lt;span class="m">1565&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">24&lt;/span> com.apple.AppKit 0x000000010d0d03e8 -&lt;span class="o">[&lt;/span>NSTileLayer display&lt;span class="o">]&lt;/span> + &lt;span class="m">119&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">25&lt;/span> com.apple.AppKit 0x000000010d850b34 -&lt;span class="o">[&lt;/span>_NSTiledLayerContents update:shouldCallPrepareContent:&lt;span class="o">]&lt;/span> + &lt;span class="m">7131&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">26&lt;/span> com.apple.AppKit 0x000000010cf7aca4 -&lt;span class="o">[&lt;/span>_NSTiledLayer display&lt;span class="o">]&lt;/span> + &lt;span class="m">368&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">27&lt;/span> com.apple.QuartzCore 0x000000010f6c310d CA::Layer::display_if_needed&lt;span class="o">(&lt;/span>CA::Transaction*&lt;span class="o">)&lt;/span> + &lt;span class="m">603&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">28&lt;/span> com.apple.QuartzCore 0x000000010f6c278d CA::Layer::layout_and_display_if_needed&lt;span class="o">(&lt;/span>CA::Transaction*&lt;span class="o">)&lt;/span> + &lt;span class="m">35&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">29&lt;/span> com.apple.QuartzCore 0x000000010f6c1cf1 CA::Context::commit_transaction&lt;span class="o">(&lt;/span>CA::Transaction*&lt;span class="o">)&lt;/span> + &lt;span class="m">277&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">30&lt;/span> com.apple.QuartzCore 0x000000010f6c1a24 CA::Transaction::commit&lt;span class="o">()&lt;/span> + &lt;span class="m">508&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">31&lt;/span> com.apple.QuartzCore 0x000000010f6d0917 CA::Transaction::observer_callback&lt;span class="o">(&lt;/span>__CFRunLoopObserver*, unsigned long, void*&lt;span class="o">)&lt;/span> + &lt;span class="m">71&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">32&lt;/span> com.apple.CoreFoundation 0x000000010b469e37 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + &lt;span class="m">23&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">33&lt;/span> com.apple.CoreFoundation 0x000000010b469da7 __CFRunLoopDoObservers + &lt;span class="m">391&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">34&lt;/span> com.apple.CoreFoundation 0x000000010b45b358 CFRunLoopRunSpecific + &lt;span class="m">328&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">35&lt;/span> com.apple.HIToolbox 0x00000001101cf935 RunCurrentEventLoopInMode + &lt;span class="m">235&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">36&lt;/span> com.apple.HIToolbox 0x00000001101cf76f ReceiveNextEventCommon + &lt;span class="m">432&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">37&lt;/span> com.apple.HIToolbox 0x00000001101cf5af _BlockUntilNextEventMatchingListInModeWithFilter + &lt;span class="m">71&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">38&lt;/span> com.apple.AppKit 0x000000010cecd0ee _DPSNextEvent + &lt;span class="m">1067&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">39&lt;/span> com.apple.AppKit 0x000000010d299943 -&lt;span class="o">[&lt;/span>NSApplication _nextEventMatchingEventMask:untilDate:inMode:dequeue:&lt;span class="o">]&lt;/span> + &lt;span class="m">454&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">40&lt;/span> com.apple.AppKit 0x000000010cec2fc8 -&lt;span class="o">[&lt;/span>NSApplication run&lt;span class="o">]&lt;/span> + &lt;span class="m">682&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">41&lt;/span> com.apple.AppKit 0x000000010ce45520 NSApplicationMain + &lt;span class="m">1176&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">42&lt;/span> libdyld.dylib 0x0000000111d135ad start + &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¯ä»¥çœ‹å‡ºæ¥åº”è¯¥æ˜¯å­—ä½“å¯¼è‡´çš„é—®é¢˜, å°è¯•äº†ç½‘ä¸Šçš„å¤§éƒ¨åˆ†è§£å†³æ–¹æ¡ˆ, åŒ…æ‹¬ æ¸…ç† &lt;code>Library/FontCollections&lt;/code>, é‡å»ºç¼“å­˜ä»€ä¹ˆçš„, éƒ½æ²¡æœ‰æ•ˆæœ.&lt;/p>
&lt;p>ä½†æ˜¯åœ¨GUESTè´¦æˆ·ä¸‹, å¹¶æ²¡æœ‰å´©æºƒçš„é—®é¢˜, çŒœæµ‹å’Œå½“å‰ç”¨æˆ·çš„æŸäº›é…ç½®æœ‰é—®é¢˜.&lt;/p>
&lt;p>ç»ˆç«¯æ‰§è¡Œ &lt;code>defaults read &amp;gt; ~/Downloads/defaults.txt&lt;/code> å¯¼å‡ºå½“å‰ç”¨æˆ·çš„é…ç½®ä¿¡æ¯.&lt;/p>
&lt;p>å…¨å±€æœç´¢&lt;code>NSFont&lt;/code>, åœ¨ &lt;code>Apple Global Domain&lt;/code> èŠ‚ç‚¹ä¸‹å‘ç°äº† &lt;code>NSFont = MicrosoftYaHei;&lt;/code>&lt;/p>
&lt;p>çœ‹èµ·æ¥æ˜¯ä¹‹å‰æµ‹è¯•MS Office ç•™ä¸‹çš„. å¸è½½ä¹‹åä¼°è®¡ MicrosoftYaHei ä¹Ÿæ²¡æœ‰äº†.&lt;/p>
&lt;p>æ‰“å¼€ &lt;code>TinkerTool&lt;/code> &amp;raquo; &lt;code>Fonts&lt;/code> ä½¿ç”¨ &lt;code>Set to default&lt;/code> ä¹‹åå´©æºƒçš„é—®é¢˜å…¨éƒ¨è§£å†³äº†.&lt;/p></description></item><item><title>ubuntu é€šè¿‡apt å®‰è£… mongodb 3.0</title><link>https://hitian.info/post/ubuntu-install-mongodb-3.0-with-apt/</link><pubDate>Sat, 11 Jul 2015 00:00:00 +0000</pubDate><guid>https://hitian.info/post/ubuntu-install-mongodb-3.0-with-apt/</guid><description>&lt;p>ubuntu version:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">DISTRIB_ID&lt;/span>&lt;span class="o">=&lt;/span>Ubuntu
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">DISTRIB_RELEASE&lt;/span>&lt;span class="o">=&lt;/span>15.04
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">DISTRIB_CODENAME&lt;/span>&lt;span class="o">=&lt;/span>vivid
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">DISTRIB_DESCRIPTION&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Ubuntu 15.04&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ–°å»ºæ–‡ä»¶ &lt;code>/etc/apt/sources.list.d/mongodb-org-3.0.list&lt;/code> å†…å®¹å¦‚ä¸‹ (ä½¿ç”¨aliyunçš„mirrorè¿›è¡ŒåŠ é€Ÿ)&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">deb http://mirrors.aliyun.com/mongodb/apt/ubuntu/ trusty/mongodb-org/3.0 multiverse
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ·»åŠ key &amp;amp; update apt:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 7F0CEB10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt-get update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å®‰è£… mongodb æœ€æ–°ç‰ˆæœ¬&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo apt-get install mongodb-org
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç›®å‰å®‰è£…çš„ç‰ˆæœ¬&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">~$ mongo --version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MongoDB shell version: 3.0.4
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>nodejs ç›¸å…³çš„å¢™å†…åŠ é€Ÿ</title><link>https://hitian.info/post/nodejs-npm-build-speed-up/</link><pubDate>Mon, 06 Apr 2015 00:00:00 +0000</pubDate><guid>https://hitian.info/post/nodejs-npm-build-speed-up/</guid><description>&lt;p>npmçš„åŠ é€Ÿæ¯”è¾ƒç®€å•, ç›´æ¥ä½¿ç”¨æ·˜å®çš„ &lt;a class="link" href="http://npm.taobao.org/" target="_blank" rel="noopener"
>http://npm.taobao.org/&lt;/a> å°±å¯ä»¥äº†.&lt;/p>
&lt;p>å»ºè®®ç›´æ¥å®‰è£… cnpm, æ–¹ä¾¿ä¸€ç‚¹&lt;/p>
&lt;p>&lt;code>npm install -g cnpm --registry=https://registry.npm.taobao.org&lt;/code>&lt;/p>
&lt;p>ä½¿ç”¨çš„æ—¶å€™ç›´æ¥ç”¨&lt;code>cnpm&lt;/code>æ›¿ä»£&lt;code>npm&lt;/code>å°±å¯ä»¥äº†. ä¾‹å¦‚:&lt;/p>
&lt;p>&lt;code>cnpm install mongodb&lt;/code>&lt;/p>
&lt;p>ä¹Ÿå¯ä»¥åœ¨ä½¿ç”¨npm çš„æ—¶å€™å•ç‹¬æŒ‡å®š&lt;/p>
&lt;p>&lt;code>npm install xxx --registry=https://registry.npm.taobao.org&lt;/code>&lt;/p>
&lt;p>è¿™æ ·å°±å¿«å¤šäº†.&lt;/p>
&lt;p>å¦å¤–æœ‰æ—¶å€™ node-gyp rebuild è¿‡ç¨‹ä¸­ä¸‹è½½ç›¸åº”nodeç‰ˆæœ¬ä¹Ÿå¾ˆæ…¢.&lt;/p>
&lt;p>çœ‹æç¤ºå»æ‰‹åŠ¨ä¸‹è½½éœ€è¦çš„nodeç‰ˆæœ¬.&lt;/p>
&lt;p>ä¾‹å¦‚ node-v0.12.2.tar.gz&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">tar zcvf node-v0.12.2.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv ./node-v0.12.2 ~/.node-gyp/0.12.2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">touch ~/.node-gyp/0.12.2/installVersion
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;9&amp;#34;&lt;/span> &amp;gt;~/.node-gyp/0.12.2/installVersion
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>TP-LINK TL-WR703N åˆ· OpenWRT</title><link>https://hitian.info/post/tp-link-tl-wr703n-v1.7-openwrt/</link><pubDate>Sat, 21 Mar 2015 00:00:00 +0000</pubDate><guid>https://hitian.info/post/tp-link-tl-wr703n-v1.7-openwrt/</guid><description>&lt;p>ç‰ˆæœ¬å·: ver 1.7&lt;/p>
&lt;p>åŸå§‹å›ºä»¶ç‰ˆæœ¬: 3.17.1 Build 140120 Rel.56593n&lt;/p>
&lt;p>å°è¯•äº†ä¸€ä¸‹, è¿™ä¸ªç‰ˆæœ¬æ˜¯ä¸èƒ½é€šè¿‡webä¸Šä¼ éå®˜æ–¹çš„å›ºä»¶, å°è¯•ä¸Šä¼ openwrtä¼šæŠ¥é”™&lt;/p>
&lt;p>&lt;code>é”™è¯¯ä»£ç ï¼š18005 ä¸Šä¼ çš„æ–‡ä»¶ç‰ˆæœ¬ä¸æœºå‹ä¸ç¬¦ã€‚&lt;/code>&lt;/p>
&lt;p>è¯„è®ºè¯´æ˜¯åŠ äº†ç­¾åçš„çš„åŸå› .&lt;/p>
&lt;p>googleäº†ä¸‹æ‰¾åˆ°è¿™ç¯‡æ–‡ç« :&lt;/p>
&lt;p>&lt;a class="link" href="http://www.shadowandy.net/2015/03/flashing-tp-link-tl-wr703n-v1-7-to-openwrt.htm" target="_blank" rel="noopener"
>http://www.shadowandy.net/2015/03/flashing-tp-link-tl-wr703n-v1-7-to-openwrt.htm&lt;/a>&lt;/p>
&lt;p>å¤§å®¶å¯ä»¥å‚ç…§åšä¸€ä¸‹.&lt;/p>
&lt;h2 id="ä¸¥é‡è­¦å‘Š-åˆ·æœºéœ€è°¨æ…-æˆ‘æ˜¯å‡†å¤‡å¥½ttlçº¿æ‰åŠ¨æ‰‹çš„-å¦‚æœæ²¡æœ‰æœ€å¥½ä¸è¦å†’é™©-å¾ˆå®¹æ˜“å˜ç –çš„">ä¸¥é‡è­¦å‘Š, åˆ·æœºéœ€è°¨æ…, æˆ‘æ˜¯å‡†å¤‡å¥½TTLçº¿æ‰åŠ¨æ‰‹çš„, å¦‚æœæ²¡æœ‰æœ€å¥½ä¸è¦å†’é™©, å¾ˆå®¹æ˜“å˜ç –çš„&amp;hellip;&lt;/h2>
&lt;p>å…ˆæŒ‰æ­¥éª¤ç”Ÿæˆæˆ–ä¸‹è½½è¿™å››ä¸ªè¦æ”¾åœ¨tftpä¸‹çš„æ–‡ä»¶:&lt;/p>
&lt;ol>
&lt;li>aa&lt;/li>
&lt;li>i1&lt;/li>
&lt;li>i2&lt;/li>
&lt;li>busybox&lt;/li>
&lt;/ol>
&lt;p>æˆ‘ä½¿ç”¨è¿‡çš„æ‰“åŒ…å…±äº«ä¸€ä¸‹ &lt;a class="link" href="http://pan.baidu.com/s/1bno6923" target="_blank" rel="noopener"
>ç™¾åº¦ç½‘ç›˜ä¸‹è½½&lt;/a>&lt;/p>
&lt;p>æ ¸å¿ƒçš„3æ¡å‘½ä»¤:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -o - -b &lt;span class="s2">&amp;#34;tLargeScreenP=1; subType=pcSub; Authorization=Basic%20YWRtaW46YWRtaW40Mg%3D%3D; ChgPwdSubTag=true&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;http://192.168.1.1/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -o - -b &lt;span class="s2">&amp;#34;tLargeScreenP=1; subType=pcSub; Authorization=Basic%20YWRtaW46YWRtaW40Mg%3D%3D; ChgPwdSubTag=&amp;#34;&lt;/span> --referer &lt;span class="s2">&amp;#34;http://192.168.1.1/userRpm/ParentCtrlRpm.htm&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;http://192.168.1.1/userRpm/ParentCtrlRpm.htm?ctrl_enable=1&amp;amp;parent_mac_addr=00-00-00-00-00-02&amp;amp;Page=1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -o - -b &lt;span class="s2">&amp;#34;tLargeScreenP=1; subType=pcSub; Authorization=Basic%20YWRtaW46YWRtaW40Mg%3D%3D; ChgPwdSubTag=&amp;#34;&lt;/span> --referer &lt;span class="s2">&amp;#34;http://192.168.1.1/userRpm/ParentCtrlRpm.htm?Modify=0&amp;amp;Page=1&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;http://192.168.1.1/userRpm/ParentCtrlRpm.htm?child_mac=00-00-00-00-00-01&amp;amp;lan_lists=888&amp;amp;url_comment=test&amp;amp;url_0=;cd%20/tmp;&amp;amp;url_1=;tftp%20-gl%20aa%20192.168.1.9;&amp;amp;url_2=;sh%20aa;&amp;amp;url_3=&amp;amp;url_4=&amp;amp;url_5=&amp;amp;url_6=&amp;amp;url_7=&amp;amp;scheds_lists=255&amp;amp;enable=1&amp;amp;Changed=1&amp;amp;SelIndex=0&amp;amp;Page=1&amp;amp;rule_mode=0&amp;amp;Save=%B1%A3+%B4%E6&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æœ‰å‡ ç‚¹è¦æ³¨æ„çš„:&lt;/p>
&lt;ol>
&lt;li>tftpéœ€è¦è¿è¡Œåœ¨windowsä¸Š, è€Œä¸”è¦ä½¿ç”¨32ä½çš„ç‰ˆæœ¬, (Macä¸Šçš„tftpå°è¯•è¿‡æ— æ•ˆçš„). å°†ipè°ƒæ•´ä¸º192.168.1.9&lt;/li>
&lt;li>å¦å¤–æ‰§è¡Œå‘½ä»¤ä¹‹å‰éœ€è¦å…ˆåœ¨ç®¡ç†ç•Œé¢æ‰§è¡Œ&lt;code>æ¢å¤å‡ºå‚&lt;/code>, é‡å¯å®Œä¸è¦è®¾ç½®å¯†ç , ç›´æ¥å¼€å§‹.&lt;/li>
&lt;li>windowséœ€è¦è‡ªå·±è£…curl.&lt;/li>
&lt;li>æœ€åçš„ä¸€æ¡å‘½ä»¤æ¯”è¾ƒæ…¢, ä¸€å®šè¦ç­‰åˆ°è·¯ç”±å™¨çš„ç¯ä¸åœ¨é—ªäº†, æˆ–è€…ç›´æ¥åœ¨ç”µè„‘ä¸Šæ‰“å¼€&lt;a class="link" href="http://192.168.1.1" target="_blank" rel="noopener"
>http://192.168.1.1&lt;/a>ä¸æ–­çš„åˆ·æ–°, ä»€ä¹ˆæ—¶å€™çœ‹åˆ°OpenWrtçš„ç•Œé¢äº†å°±å¥½äº†.&lt;/li>
&lt;/ol>
&lt;p>ç„¶åæ’ä¸ªUç›˜, å‡çº§ä¸€ä¸‹ç©ºé—´, å°±å¯ä»¥å°½æƒ…æŠ˜è…¾äº†.&lt;/p>
&lt;p>å®Œæˆå:&lt;/p>
&lt;p>&lt;a class="link" href="https://hitian.info/assets/images/201503/tl-wr703n-openwrt.png" >&lt;img src="https://hitian.info/assets/images/201503/tl-wr703n-openwrt.png" alt="image" title="å‡çº§ç”»é¢" />&lt;/a>&lt;/p>
&lt;p>æœ€åæ„Ÿè°¢ä¸€ä¸‹åŸæ–‡çš„ä½œè€…, å› ä¸ºæœ‰è¿™äº›æ— ç§å…±äº«çš„äºº, ä¸–ç•Œæ‰ä¼šæ›´ç¾å¥½.&lt;/p>
&lt;p>è¿˜è¦æ„Ÿè°¢ä¸€ä¸‹google, è®©æˆ‘å¾ˆå¿«æ‰¾åˆ°äº†è¿™ç¯‡æ–‡ç« .&lt;/p></description></item><item><title>æ‰‹åŠ¨ä»OTAåŒ…å‡çº§nexus 5</title><link>https://hitian.info/post/manually-update-nexus-5-from-ota/</link><pubDate>Fri, 20 Mar 2015 00:00:00 +0000</pubDate><guid>https://hitian.info/post/manually-update-nexus-5-from-ota/</guid><description>&lt;p>Android 5.1 å‘å¸ƒå·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†, nexus5çš„ROMå‡ºæ¥ä¹Ÿæœ‰ä¸€æ®µæ—¶é—´äº†, ä½†æ˜¯OTAä¸€ç›´ä¸æ¨é€, æŒºç€æ€¥çš„. googleäº†ä¸€ä¸‹, å†³å®šè‡ªå·±å‡çº§ä¸€ä¸‹.&lt;/p>
&lt;p>####å…ˆå»ä¸‹è½½OTAçš„å‡çº§åŒ…&lt;/p>
&lt;p>nexus5 ä»5.0.1 åˆ° 5.1 çš„åŒ…: &lt;a class="link" href="http://pan.baidu.com/s/1jGIe4KY" target="_blank" rel="noopener"
>ç™¾åº¦ç½‘ç›˜&lt;/a>&lt;/p>
&lt;p>å…¶ä»–çš„è¿™é‡Œä¸‹è½½: &lt;a class="link" href="http://www.androidguys.com/2015/03/17/all-the-android-5-1-ota-download-links/" target="_blank" rel="noopener"
>link&lt;/a>&lt;/p>
&lt;p>####å…¶ä»–çš„å‡†å¤‡&lt;/p>
&lt;ul>
&lt;li>æ²¡æœ‰adbçš„å…ˆå»è£…ä¸€ä¸‹&lt;/li>
&lt;li>å°†æ‰‹æœºçš„&lt;code>å¼€å‘è€…æ¨¡å¼&lt;/code>æ‰“å¼€(è¿æŒ‰&lt;code>å…³äºæ‰‹æœº&lt;/code>ä¸­çš„&lt;code>ç‰ˆæœ¬å·&lt;/code>)&lt;/li>
&lt;/ul>
&lt;p>####å¼€å§‹äº†&lt;/p>
&lt;ol>
&lt;li>å…ˆå…³æœº&lt;/li>
&lt;li>æŒ‰ä½ &lt;code>éŸ³é‡ä¸‹&lt;/code> å’Œ &lt;code>ç”µæºé”®&lt;/code> å¯åŠ¨è¿›å…¥&lt;code>FASTBOOT MODE&lt;/code>&lt;/li>
&lt;li>æŒ‰&lt;code>éŸ³é‡ä¸Šä¸‹&lt;/code> é€‰æ‹© &lt;code>Recovery mode&lt;/code>, æŒ‰&lt;code>ç”µæºé”®&lt;/code>è¿›å…¥&lt;/li>
&lt;li>è‡ªåŠ¨é‡å¯åä¼šæ˜¾ç¤ºä¸€ä¸ªæ„Ÿå¹å·çš„æœºå™¨äºº, ä¸‹é¢æ˜¾ç¤º&lt;code>æ— å‘½ä»¤&lt;/code>, æŒ‰ä½&lt;code>éŸ³é‡ä¸Š&lt;/code>å’Œ&lt;code>ç”µæºé”®&lt;/code>è¿›å…¥recovery çš„èœå•.&lt;/li>
&lt;li>é€‰æ‹©&lt;code>apply update from ADB&lt;/code> å¹¶ç¡®å®š&lt;/li>
&lt;li>è¿æ¥æ‰‹æœºåˆ°ç”µè„‘, å‘½ä»¤è¡Œè¿›å…¥ä¸‹è½½çš„åŒ…ç›®å½•, æ‰§è¡Œ&lt;code>adb sideload update.zip&lt;/code>&lt;/li>
&lt;li>ç­‰å¾…å®Œæˆ, å¤§æ¦‚éœ€è¦6åˆ†é’Ÿå·¦å³, ç„¶åé€‰æ‹© &lt;code>reboot system now&lt;/code>&lt;/li>
&lt;li>å®Œæˆäº†.&lt;/li>
&lt;/ol>
&lt;p>å‡çº§å®Œæˆäº†:&lt;/p>
&lt;p>&lt;a class="link" href="https://hitian.info/assets/images/201503/nexus5_ota_1.jpg" >&lt;img src="https://hitian.info/assets/images/201503/nexus5_ota_1.jpg" alt="image" title="å‡çº§ç”»é¢" />&lt;/a>&lt;/p>
&lt;p>é‡æ–°å¯åŠ¨è¿‡ç¨‹ä¸­ä¼šå‡çº§å·²æœ‰çš„App, è¿™ä¸ªåªèƒ½è€å¿ƒç­‰å¾…äº†..&lt;/p>
&lt;p>å‚è€ƒ: &lt;a class="link" href="http://www.androidbeat.com/2014/12/manually-sideload-android-lollipop-update-nexus-5/" target="_blank" rel="noopener"
>http://www.androidbeat.com/2014/12/manually-sideload-android-lollipop-update-nexus-5/&lt;/a>&lt;/p></description></item><item><title>æˆ‘çš„ç¬¬ä¸€ä¸ªæ¸¸æˆå¼€å‘å†ç¨‹</title><link>https://hitian.info/post/my-first-game/</link><pubDate>Thu, 22 Jan 2015 00:00:00 +0000</pubDate><guid>https://hitian.info/post/my-first-game/</guid><description>&lt;p>åˆ°ä»Šå¤©ä¸ºæ­¢, æŠ˜è…¾äº†10ä¸ªæœˆçš„æ¸¸æˆç»ˆäºç»“æŸäº†, è™½ç„¶google play storeçš„ç‰ˆæœ¬å·²ç»ä¸Šæ¶æœ‰ä¸€æ®µæ—¶é—´äº†, iOSçš„è¿˜æ­£åœ¨å®¡æ ¸ä¸­, ä¸è¿‡åç»­çš„ç‰ˆæœ¬åº”è¯¥å·²ç»ä¸ä¼šå†å¼€å‘äº†. ä¹Ÿç®—æ˜¯è¿™10ä¸ªæœˆçš„åŠªåŠ›æ²¡æœ‰ç™½è´¹.&lt;/p>
&lt;p>###2013å¹´3æœˆ###&lt;/p>
&lt;p>æ­£åœ¨ç»´æŠ¤åç«¯çš„æ¸¸æˆè¿›å…¥äº†æœ€åé˜¶æ®µ, è™½ç„¶æ¯å¤©éƒ½è¿˜æœ‰ä¸å°‘çš„æ”¶å…¥, ä½†å¯¹äºä¸€ä¸ªä¸ç®—å°çš„æ¸¸æˆå…¬å¸æ¥è¯´è·¨å›½çš„è¿è¥å·²ç»å¤ªè´¹åŠ›äº†. äºæ˜¯å†³å®šä¸€æ®µæ—¶é—´åå°±ä¸åœ¨è¿›è¡Œæ›´æ–°äº†, ç­‰ç©å®¶æµå¤±,ç„¶åå…³æœ. é¡¹ç›®ç»„çš„äººå‘˜å¼€å§‹æ…¢æ…¢çš„è°ƒåˆ°å…¶ä»–çš„é¡¹ç›®ç»„. ç„¶å, leaderé—®æˆ‘æ„¿ä¸æ„¿æ„è·Ÿä»–å»å¼€å‘ä¸ªæ–°æ¸¸æˆ, ç„¶åå°±å»äº†.&lt;/p>
&lt;p>è¯è¯´ä»å¤§ä¸‰èµ·å°±ä¸€ç›´åœ¨è¿›è¡Œwebå¼€å‘, æ¯•ä¸šåçš„3å¹´ä¹Ÿæ˜¯, å¯¹æ‰‹æœºç«¯æ¸¸æˆå¼€å‘æ¯«æ— æ¦‚å¿µ, è€å¤§ä»¬å†³å®šè¦ç”¨jsä½œä¸ºä¸»è¦çš„å¼€å‘è¯­è¨€, ç„¶åå°±çªç„¶æƒ³æ¢ä¸€ä¸‹å£å‘³, æ­£å¥½å…¬å¸ä¹Ÿå…è®¸æˆ‘ä»¬è¾¹å­¦è¾¹åš, ç„¶åå°±å¼€å§‹è½¬åˆ°å®¢æˆ·ç«¯å¼€å‘äº†.&lt;/p>
&lt;p>###cocos2d-x + javascript###&lt;/p>
&lt;p>åšwebæ—¶ä¹Ÿä¸€ç›´åœ¨æ¥è§¦js, è¿™æ–¹é¢ä¸ç®—é™Œç”Ÿ. cocos2d-xæ¸¸æˆå¼•æ“å¯¹æˆ‘æ¥è¯´æ˜¯ä¸ªæ–°çš„äº‹ç‰©, ä½†æ˜¯å­¦ä¹ æ–°çš„äº‹ç‰©å¦‚æœæœ‰ä¸€å¥—è‡ªå·±çš„å­¦ä¹ æ–¹å¼å…¶å®ä¹Ÿæ˜¯å¾ˆå¿«çš„, æ¸¸æˆuiç”»é¢çš„ç»„ç»‡å…¶å®å’Œå¤§å­¦æ—¶è¯¾è®¾åšçš„javaå›¾å½¢ç•Œé¢æœ‰ç‚¹ç±»ä¼¼, æŠŠæ‰€æœ‰çš„å…ƒç´ æ·»åŠ åˆ°ä¸€ä¸ªæ ‘çŠ¶çš„UIæ ‘ä¸Šå», ç„¶ååœ¨sceneä¸Šæ˜¾ç¤ºå‡ºæ¥, ä¸åŒçš„æ˜¯æ¸¸æˆæœ‰ä¸€ä¸ªä¸»å¾ªç¯, åœ¨é‡Œé¢è¿›è¡Œå¿…è¦çš„åŠ¨ç”»æ“ä½œ, å“åº”ç”¨æˆ·çš„æ“ä½œæˆ–è€…æ˜¯æœåŠ¡å™¨çš„è¿”å›å€¼å¯¹UIæ ‘è¿›è¡Œæ›´æ”¹.&lt;/p>
&lt;p>ä»0å¼€å§‹, åœ¨ä¼Ÿå¤§çš„googleçš„å¸®åŠ©ä¸‹, ä»…ä»…ç¬¬10å¤©ç¬¬ä¸€ä¸ªdemoå°±å‡ºæ¥äº†, è™½ç„¶åªæœ‰ä¸€ä¸ªåœºæ™¯, ä½†æ˜¯æ ¸å¿ƒçš„æ¶ˆé™¤é€»è¾‘å·²ç»å¯ä»¥åˆæ­¥ä½¿ç”¨äº†. ç„¶åå°±ç«‹å³æœ‰ä¿¡å¿ƒäº†. é¡¹ç›®ä¹Ÿå°±æ­£å¼å¼€å§‹äº†.&lt;/p>
&lt;p>###å‘çš„å¼€å§‹â€¦###&lt;/p>
&lt;p>Facebook, å› ä¸ºæ˜¯è¦åœ¨å°æ¹¾å‘è¡Œçš„æ¸¸æˆ, å†³å®šæ·±åº¦æ•´åˆFacebook. ç”±äºæŸäº›åŸå› , å³ä½¿æœ‰ä¸“çº¿,å’ŒFacebookæœåŠ¡çš„é€šè®¯é€šç•…åº¦ä¹Ÿæ ¹æœ¬å°±æ˜¯ä¸ªæ‚²å‰§, å¼€å‘å’Œæµ‹è¯•è¿‡ç¨‹ä¸­å„ç§è°ƒç”¨å¼‚å¸¸, ä¸€å¥è¯, ä¸è¦åœ¨å›½å†…åšè¿™æ–¹é¢çš„å¼€å‘.&lt;/p>
&lt;p>jsä½œä¸ºå¼€å‘è¯­è¨€æ˜¯å¾ˆæ–¹ä¾¿, ä½†æ˜¯å¦‚æœå’Œç¬¬ä¸‰æ–¹sdkçš„äº¤äº’æ¯”è¾ƒå¤š, æƒ³è±¡ä¸€ä¸‹æ“ä½œé“¾: js =&amp;gt; jsè§£é‡Šå™¨ =&amp;gt; c++ =&amp;gt; jni =&amp;gt; java, ç‰¹åˆ«æ˜¯jså’Œc++ æ˜¯å®Œå…¨ä¸åŒçš„è¯­è¨€ç±»å‹, æˆ‘ä»¬éœ€è¦åšå¥½å¤šçš„æ¥å£å’Œå›è°ƒ, åˆæ˜¯åœ¨androidä¸Šè¿è¡Œ, äº’ç›¸è°ƒç”¨æ—¶ä¼šå‘ç”Ÿå„ç§å„æ ·çš„å´©æºƒé—®é¢˜. è¦ç‰¹åˆ«æ„Ÿè°¢ä¸€ä¸‹iOSæ²¡è®©æˆ‘ä»¬åœ¨è¿™æ–¹ä¾¿èŠ±è´¹å¤ªå¤šçš„æ—¶é—´.&lt;/p>
&lt;p>###äººæ°¸è¿œéƒ½æ˜¯å¾ˆç¼ºçš„###&lt;/p>
&lt;p>è¯´èµ·æ¥ç¨‹åºåº”è¯¥æ˜¯å¾ˆå¤šçš„, ä½†æ˜¯æ„Ÿè§‰ä¸€ç›´æ‹›ä¸åˆ°äºº, æ•´ä¸ªé¡¹ç›®ç¨‹åºæœ€å¤šçš„æ—¶å€™ä¹Ÿå°±3ä¸ªæ­£å¼å‘˜å·¥åŠ ä¸¤ä¸ªå®ä¹ ç”Ÿ. å¤§éƒ¨åˆ†æ—¶é—´éƒ½åªæœ‰ä¸¤ä¸ªç¨‹åº, è€Œä¸”æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯éƒ½è¦åš. è¿˜å¥½åªæ˜¯ä¸æŒ‡æœ›èµšå¤šå°‘é’±çš„ä¼‘é—²ç±»æ¸¸æˆ, å¤§éƒ¨åˆ†æ—¶é—´ä¹Ÿæ²¡æœ‰é‚£ä¹ˆèµ¶è¿›åº¦. å¦å¤–, å› ä¸ºæ‹›ä¸åˆ°æ­£å¼å‘˜å·¥, å°±æ‹›å¾ˆå¤šå®ä¹ ç”Ÿæ¥è¡¥ç©ºç¼ºå…¶å®æŒºä¸é“å¾·çš„, æ ¹æœ¬ç®—ä¸ä¸ŠåŸ¹å…», å¯¹åˆ«äººçš„é˜…å†å…¶å®ä¹Ÿæ²¡ä»€ä¹ˆä½œç”¨. å¦å¤–, äººå°‘å°±æ„å‘³ç€å„ä¸ªæ–¹é¢éƒ½è¦è‡ªå·±åŠ¨æ‰‹åš, ç§¯ç´¯ç»éªŒç¡®å®æ˜¯å¿«.&lt;/p>
&lt;p>###è¯´åˆ°åº•è¿˜æ˜¯è¦èµšé’±###&lt;/p>
&lt;p>è™½ç„¶ä¸€å¼€å§‹ç«‹é¡¹å°±è¯´æ²¡æŒ‡æœ›èµšå¤šå°‘é’±, å°è¯•ä¸€ä¸‹æ–°æ¸¸æˆç±»å‹, ç§¯ç´¯ç”¨æˆ·. å…¶å®å…¬å¸è¿˜æ˜¯å¾ˆåœ¨ä¹é’±çš„é—®é¢˜, æ¯•ç«Ÿå¼€å‘æ˜¯è¦æˆæœ¬çš„. å¼€å§‹è¿˜æ˜¯å¾ˆå¼€å¿ƒçš„, å…³æ³¨çš„éƒ½æ˜¯å¦‚ä½•æé«˜æ¸¸æˆæ ¸å¿ƒç©æ³•çš„å“è´¨, ç„¶åæ…¢æ…¢çš„æ…¢æ…¢çš„å…³æ³¨çš„é—®é¢˜å°±å˜æˆäº†æ€ä¹ˆèµšé’±, å‘¨è¾¹çš„å†…å®¹å„ç§æ”¹åŠ¨, å•†åº—, é“å…·æ”¹äº†åˆæ”¹. ç®—äº†ä¸€ä¸‹, å…¶å®æ¸¸æˆçš„æ ¸å¿ƒå†…å®¹å¼€å‘çš„æ—¶é—´åŠ èµ·æ¥4ä¸ªæœˆéƒ½ä¸åˆ°, æˆ‘ä»¬åˆ°åº•åœ¨åšä»€ä¹ˆ? ç°å®å’Œç†æƒ³çš„åŒºåˆ«è¿˜æ˜¯æ¯”è¾ƒå¤§çš„. æˆ‘ä¹Ÿä¸€ç›´åœ¨çº³é—·ä¸ºä»€ä¹ˆå›½äººå°±åšä¸å‡ºåƒçºªå¿µç¢‘è°·è¿™æ ·çš„æ¸¸æˆâ€¦&lt;/p>
&lt;p>###In the end,###&lt;/p>
&lt;p>æ¸¸æˆcbtä¹‹å, å…¶å®èƒ½æ„Ÿè§‰åˆ°ç­–åˆ’åŒå­¦å¿ƒä¸åœ¨ç„‰å·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†. è¿™å°±æ„å‘³ç€æ¸¸æˆçš„å¼€å‘ä¹Ÿè¦å‘Šä¸€æ®µè½äº†. åªæ˜¯æ²¡æƒ³åˆ°ä¼šè¿™ä¹ˆå¿«åˆ°æ¥. androidç‰ˆæœ¬ä¸Šçº¿ä¹‹åçš„æ•°æ®å¹¶ä¸æ˜¯å¾ˆç†æƒ³(å…¶å®æ˜¯èµšçš„é’±ä¸æ˜¯å¾ˆç†æƒ³), ä¸æ¨å¹¿æ¸¸æˆæ˜¯è‚¯å®šæ˜¯ä¸è¡Œçš„, ä½†æ˜¯æ¨å¹¿çš„çš„æˆæœ¬èƒ½ä¸èƒ½èµšå›æ¥å°±æ˜¯ä¸ªé—®é¢˜äº†, ä¸èµšé’±æ˜¯ä¸ªç¡¬ä¼¤å•Š.. ç„¶åå°±æ²¡æœ‰ç„¶åäº†&amp;hellip;&lt;/p>
&lt;p>å¯¹äºå…¬å¸æ¥è¯´, å‡ ä¸ªäººåšäº†ä¸€æŠŠå°è¯•, ä¹ŸåŸ¹å…»äº†äººæ‰, æ²¡ä»€ä¹ˆæŸå¤±, å¯¹äºæˆ‘ä»¬æ¥è¯´ä¹Ÿæ˜¯, ä»0å¼€å§‹å­¦äº†ä¸å°‘ä¸œè¥¿, ä¹Ÿç§¯ç´¯äº†ä¸å°‘ç»éªŒ. æ²¡æœ‰åƒå…¶ä»–é¡¹ç›®ç»„æœ‰kpiè¿½ç€ç»å¸¸æ²¡æ—¥æ²¡å¤œçš„åŠ ç­. æ—¥å­è¿‡çš„è¿˜ç®—é€é¥. åªæ˜¯å°±è¿™æ ·åŒ†åŒ†çš„ç»“æŸäº†, éš¾å…æœ‰äº›å‡„å‡‰. æ¯•ç«Ÿè¿™æ˜¯æˆ‘å¼€å‘çš„ç¬¬ä¸€ä¸ªæ¸¸æˆ, æ€»æƒ³ç€æœ‰å§‹æœ‰ç»ˆ. æˆ‘ä»¬æ˜¯ç©ç€æ¸¸æˆé•¿å¤§çš„ä¸€ä»£äºº, å°æ—¶å€™ä¹Ÿæ€»æƒ³ç€æœ‰ä¸€å¤©èƒ½è‡ªå·±äº²è‡ªå¼€å‘ä¸€ä¸ªæ¸¸æˆ, ä¹Ÿç®—å®ç°äº†ä¸€ä¸ªå¿ƒæ„¿å§.&lt;/p>
&lt;p>å¥½å§, å°±åˆ°è¿™é‡Œäº†. è¿™å°±æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ªæ¸¸æˆçš„å¼€å‘å†ç¨‹äº†.&lt;/p>
&lt;p>é™„ä¸Šæ¸¸æˆçš„ä¸‹è½½é“¾æ¥:&lt;/p>
&lt;p>Google Play Store(å°æ¹¾åœ°åŒº): &lt;a class="link" href="https://play.google.com/store/apps/details?id=tw.mobage.g22000019" target="_blank" rel="noopener"
>link&lt;/a>&lt;/p>
&lt;p>è¯è¯´googleçš„åˆ†åŒºå¤ªæ¶å¿ƒäº†, ç»™ä¸ªapké“¾æ¥å§ &lt;a class="link" href="http://pan.baidu.com/s/1mgzbOqG" target="_blank" rel="noopener"
>link&lt;/a>&lt;/p>
&lt;p>App Store: &lt;a class="link" href="https://itunes.apple.com/tw/app/yi-qi-fa/id907047131?l=zh&amp;amp;ls=1&amp;amp;mt=8" target="_blank" rel="noopener"
>link&lt;/a>&lt;/p></description></item><item><title>cocos2d-x å‡ºç° call to OpenGL ES API with no current context</title><link>https://hitian.info/post/cocos2d-x-android-call-to-opengl-es-api-with-no-current-context/</link><pubDate>Fri, 05 Sep 2014 00:00:00 +0000</pubDate><guid>https://hitian.info/post/cocos2d-x-android-call-to-opengl-es-api-with-no-current-context/</guid><description>&lt;p>ç¯å¢ƒ cocos2d-x 2.2.2 + js&lt;/p>
&lt;p>æ¸¸æˆçš„æŸäº›åŠŸèƒ½ç•Œé¢åœ¨Androidå‡ºç°äº†å¾ˆå¥‡æ€ªçš„é»‘å—, LOGè®°å½•åˆ°&lt;/p>
&lt;p>&lt;code>E/libEGL (30687): call to OpenGL ES API with no current context (logged once per thread)&lt;/code>&lt;/p>
&lt;p>googleä¸€ä¸‹, å¤§æ¦‚çš„åŸå› å¯èƒ½æ˜¯åœ¨éUIçº¿ç¨‹ä¸Šæ“ä½œåœºæ™¯ä¸Šçš„å›¾ç‰‡èµ„æºå¯¼è‡´çš„. ä½†æ˜¯ç½‘ä¸Šçš„æƒ…å†µç»å¤§å¤šæ•°æƒ…å†µå‡ºç°åœ¨ java æ“ä½œ c++ å±‚æ—¶å‡ºç°çš„, è€Œæˆ‘ä»¬æ˜¯ç›´æ¥å‡ºç°åœ¨jsçš„å›è°ƒæ–¹æ³•ä¸­.&lt;/p>
&lt;p>å›è°ƒæ˜¯ç”±æŸsdkæ‰§è¡Œçš„, é€šè¿‡ &lt;code>java -&amp;gt; c++ -&amp;gt; js&lt;/code> ä¸€å±‚å±‚å›æ¥çš„.&lt;/p>
&lt;p>ä¹Ÿå°±æ˜¯è¯´æœ€ç»ˆjsçš„å›è°ƒæœ‰å¯èƒ½æ˜¯æ‰§è¡Œåœ¨éuiçº¿ç¨‹é‡Œçš„, æ‰€ä»¥åœ¨è¿™é‡Œæ›´æ–°ç•Œé¢æœ‰å¯èƒ½ä¼šå‡ºç°é—®é¢˜.&lt;/p>
&lt;p>å›§&amp;hellip;&lt;/p>
&lt;p>æ¨æµ‹&lt;/p>
&lt;p>jsæ— æ³•å†³å®šè‡ªå·±è¿è¡Œåœ¨ä»€ä¹ˆçº¿ç¨‹é‡Œ, ä½†æ˜¯å¯ä»¥æ§åˆ¶ç•Œé¢æ›´æ–°åœ¨UIçº¿ç¨‹é‡Œæ“ä½œ.&lt;/p>
&lt;p>æˆ‘ä»¬çš„æµç¨‹æ˜¯è¿™æ ·çš„.&lt;/p>
&lt;p>&lt;code>sdk -&amp;gt; someService -&amp;gt; controller -&amp;gt; view&lt;/code>&lt;/p>
&lt;p>é‚£å…¶å®æˆ‘ä»¬å¯ä»¥æ‰“æ–­someService å’Œ controller ä¹‹é—´çš„ç›´æ¥è°ƒç”¨å…³ç³». åˆ†æˆä¸¤æ­¥æ¥æ‰§è¡Œ.&lt;/p>
&lt;p>&lt;code>sdk -&amp;gt; someService -&amp;gt; [write status mark &amp;amp; store params]&lt;/code>&lt;/p>
&lt;p>å†™å®ŒçŠ¶æ€å°±å¯ä»¥ç›´æ¥è¿”å›äº†. å‰©ä¸‹çš„äº‹æƒ…ç”±æ¸¸æˆçš„å¾ªç¯æ¥åš. æ¸¸æˆçš„å¾ªç¯æœ¬æ¥å°±æ˜¯è´Ÿè´£ç•Œé¢æ›´æ–°çš„, æ‰€ä»¥è‚¯å®šä¸ä¼šæœ‰é—®é¢˜.&lt;/p>
&lt;p>&lt;code>gameloop -&amp;gt; [check status mark &amp;amp; do it]&lt;/code>&lt;/p>
&lt;p>å¯ä»¥é‡‡ç”¨åœ¨æ¸¸æˆå¾ªç¯é‡Œå»é‡å¤æ£€æµ‹éœ€è¦æ‰§è¡Œçš„æ–¹æ³•. å½“ç„¶å¦‚æœåªæ˜¯ä¸€æ¬¡è°ƒç”¨æœ€çœèµ„æºçš„è¿˜æ˜¯ç›´æ¥ç”¨cocos2d-x æä¾›çš„schedulerç›¸å…³çš„æ–¹æ³•.&lt;/p>
&lt;p>androidåœ¨æ¸¸æˆå¼€å‘æ–¹é¢çš„è¡¨ç°ç¡®å®å¾ˆå¥‡è‘©, åŠ ä¸ŠæŸäº›ä¸å¼€æºçš„SDK, ä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜å°±å¾ˆéš¾é¢„æµ‹äº†, ä¸ºäº†ä»¥é˜²ä¸‡ä¸€, ç”šè‡³å¯ä»¥åœ¨someService -&amp;gt; controller ä¹‹å‰åŠ ä¸€ä¸ªçš„æ“ä½œé˜Ÿåˆ—æ¥å½»åº•éš”ç¦»æœ‰å¯èƒ½åœ¨é”™è¯¯çš„çº¿ç¨‹æ‰§è¡Œçš„é—®é¢˜.&lt;/p></description></item><item><title>cocos2d-x2.2.2 è§¦æ‘¸äº‹ä»¶çš„é®æŒ¡</title><link>https://hitian.info/post/cocos2d-x-touch-layer-block/</link><pubDate>Wed, 02 Apr 2014 00:00:00 +0000</pubDate><guid>https://hitian.info/post/cocos2d-x-touch-layer-block/</guid><description>&lt;p>ç¯å¢ƒ cocos2d-x 2.2.2 + js&lt;/p>
&lt;p>ä¾‹å¦‚ä¸€ä¸ªè¿™æ ·çš„ç•Œé¢&lt;/p>
&lt;p>&lt;a class="link" href="https://hitian.info/assets/images/201404/2014-04-02-cocos2dx-layer-block.png" >&lt;img src="https://hitian.info/assets/images/201404/2014-04-02-cocos2dx-layer-block.png" alt="image" title="image" />&lt;/a>&lt;/p>
&lt;p>å·¦ä¸Šè§’çš„è®¾ç½®ä½¿ç”¨ cc.MenuItemSprite, å¼¹å‡ºçš„é®ç½©å±‚å’Œä¸Šé¢çš„æŒ‰é’®éœ€è¦ä¼˜å…ˆè·å–touchäº‹ä»¶, å¹¶é˜»æ­¢å‘åç»§ç»­ä¼ æ’­.&lt;/p>
&lt;p>è¿™é‡Œéœ€è¦ä¸¤ä¸ªç‚¹å°±å¯ä»¥åšåˆ°.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">bgLayer&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">cc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">LayerColor&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">extend&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ctor&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_super&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">associateWithNative&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">cc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">LayerColor&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">registerTargetedDelegate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">129&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">//1.è®¾ç½®è§¦æ‘¸çš„ä¼˜å…ˆçº§
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">setTouchEnabled&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">onTouchBegan&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">touches&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">event&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;TouchBegan: &amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">//2. åœ¨onTouchXXX å›è°ƒé‡Œè¿”å›trueæ¥åå™¬æ‰touchäº‹ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">onTouchesBegan&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">touches&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">event&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">loc&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">touches&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="nx">getLocation&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;TouchesBegan: &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">loc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">x&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34; : &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">loc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">y&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="1è®¾ç½®è§¦æ‘¸çš„ä¼˜å…ˆçº§">1.è®¾ç½®è§¦æ‘¸çš„ä¼˜å…ˆçº§&lt;/h3>
&lt;p>åœ¨layeråˆ›å»ºçš„æ—¶å€™ä½¿ç”¨ &lt;code>cc.registerTargetedDelegate(-129, true, this);&lt;/code> æ¥è®¾ç½®ä¼˜å…ˆçº§(ç¬¬1ä¸ªå‚æ•°)&lt;/p>
&lt;p>è¿™é‡Œçš„æ•°å­—è¶Šå°, ä¼˜å…ˆçº§è¶Šé«˜,&lt;/p>
&lt;p>å¦å¤–è¦æ³¨æ„çš„æ˜¯ MenuItem çš„ä¼˜å…ˆçº§æ˜¯&lt;code>-128&lt;/code>, æ‰€ä»¥è¦é®æŒ¡ä¸Šä¸Šé¢çš„è®¾ç½®æŒ‰é’®, é®ç›–å±‚çš„ä¼˜å…ˆçº§å¿…é¡»å°äºå®ƒ.&lt;/p>
&lt;h3 id="2åœ¨ontouchxxx-å›è°ƒé‡Œè¿”å›trueæ¥åå™¬æ‰touchäº‹ä»¶">2.åœ¨onTouchXXX å›è°ƒé‡Œè¿”å›trueæ¥åå™¬æ‰touchäº‹ä»¶.&lt;/h3>
&lt;p>è¿™é‡Œæ³¨æ„ä¸æ˜¯ onTouchesXXX, çœ‹äº†ä¸‹c++çš„è¯´æ˜, å› ä¸ºå¤šç‚¹çš„è§¦æ‘¸ä½¿ç”¨çš„StandardDelegateå¹¶æ²¡æœ‰åƒæ‰è¯¥äº‹ä»¶çš„ç›¸å…³å‚æ•°, æ‰€ä»¥åœ¨onTouchesXXX é‡Œ &lt;code>return true&lt;/code> æ˜¯æ²¡æœ‰ç”¨çš„.&lt;/p>
&lt;p>PS ä¹‹å‰ä¸€ç›´ç”¨çš„onTouchesXXX æ¥å¤„ç†è§¦æ‘¸çš„, æ²¡å‘ç°å±…ç„¶ä¸ä¸€æ ·, è¿™ä¸ªé—®é¢˜æŠ˜è…¾äº†2ä¸ªå¤šå°æ—¶, apié‡Œæ²¡æœ‰, ç½‘ä¸ŠæŸ¥åˆ°çš„å„ç§è¯´æ˜éƒ½æ˜¯c++çš„. å‘å•Š&amp;hellip;&lt;/p></description></item><item><title>cocos2d-x2.2.2åœ¨xcode5.1ä¸‹ç¼–è¯‘é—®é¢˜ä¸´æ—¶è§£å†³</title><link>https://hitian.info/post/xcode5.1-cocos2d-x-error/</link><pubDate>Sat, 15 Mar 2014 00:00:00 +0000</pubDate><guid>https://hitian.info/post/xcode5.1-cocos2d-x-error/</guid><description>&lt;p>iOS7.1å‘å¸ƒä¹‹åXcodeä¹Ÿæ›´æ–°åˆ°5.1äº†, ç„¶åä¹‹å‰çš„ç¨‹åºå°±è·‘ä¸èµ·æ¥äº†. ç½‘ä¸Šæ‰¾çš„è§£å†³.&lt;/p>
&lt;p>å¦‚æœå‡ºç°&lt;/p>
&lt;p>&lt;code>Unknown register name 'q0' in asm&lt;/code>&lt;/p>
&lt;p>è¯·å‚ç…§ &lt;a class="link" href="http://stackoverflow.com/questions/21510187/unknown-register-name-q0-in-asm" target="_blank" rel="noopener"
>http://stackoverflow.com/questions/21510187/unknown-register-name-q0-in-asm&lt;/a>&lt;/p>
&lt;p>å°† &lt;code>neon_matrix_impl.c&lt;/code> ä¸­çš„ &lt;code>#if defined(ARM_NEON)&lt;/code> ä¿®æ”¹ä¸º &lt;code>#if defined(_ARM_ARCH_7)&lt;/code>&lt;/p>
&lt;p>å¦å¤–å‡ºç°çš„&lt;/p>
&lt;p>&lt;code>EAGLView.mm:408:18: Cast from pointer to smaller type 'int' loses information&lt;/code>&lt;/p>
&lt;p>å¯ä»¥å‚ç…§ &lt;a class="link" href="http://www.cocoachina.com/bbs/read.php?tid=193991#902811" target="_blank" rel="noopener"
>http://www.cocoachina.com/bbs/read.php?tid=193991#902811&lt;/a> 5æ¥¼ç»™å‡ºçš„æ–¹æ¡ˆä¿®æ”¹ Targetsâ€”&amp;gt;Build Settingsâ€”&amp;gt;Architectures çš„é…ç½®, å°†64bitçš„ç»™å»æ‰.&lt;/p>
&lt;p>PS. çªç„¶è§‰å¾—ä½œä¸ºåˆšå¼€å§‹å…¥é—¨çš„æ–°æ‰‹, è¿˜æ˜¯å¾—è°¨æ…å‡çº§. ç‰¹åˆ«æ˜¯è§£é‡Šå‹è„šæœ¬è¯­è¨€ç”¨ä¹ æƒ¯, å¤„ç†ç¼–è¯‘é—®é¢˜çœŸå¤´å¤§.&lt;/p></description></item><item><title>cocos2d-x å…¥é—¨ç¬”è®°</title><link>https://hitian.info/post/cocos2d-x-note/</link><pubDate>Thu, 13 Mar 2014 00:00:00 +0000</pubDate><guid>https://hitian.info/post/cocos2d-x-note/</guid><description>&lt;p>é¦–å…ˆcocos2d-xå¼€å‘æ¸¸æˆç¡®å®è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„. å› ä¸ºå¯ä»¥ä½¿ç”¨jsä½œä¸ºå¼€å‘è¯­è¨€, æœ¬æ¥å°±ä¼šjsçš„äººå…¥é—¨ä¼šæ›´å¿«, ä¸è¿‡å¸‚é¢ä¸Šçš„ä¹¦å’Œç½‘ä¸Šçš„å„ç§æ•™ç¨‹åŸºæœ¬éƒ½æ˜¯ç”¨c++çš„, æ‰€ä»¥å­¦ä¹ è¿‡ç¨‹ä¸­è¿˜æ˜¯èµ°äº†ä¸å°‘å¼¯è·¯.&lt;/p>
&lt;p>ç›®å‰ä½¿ç”¨jsä½œä¸ºå¼€å‘è¯­è¨€çš„è¯, å¯ä»¥åœ¨iOS, Android, Windows ä¸Šè¿è¡Œ, å¼€å‘ç¯å¢ƒå¯ä»¥æ˜¯MacOS+Xcode æˆ–è€…Windows+VS, ä¸è¿‡Windowsä¸Šé‚£æ˜¯éå¸¸çš„æ…¢. æ‰€ä»¥ä¸‹é¢çš„éƒ½æ˜¯åœ¨Macä¸‹çš„.&lt;/p>
&lt;p>å¼€å§‹äº†&amp;hellip;&lt;/p>
&lt;p>å®˜ç½‘: &lt;a class="link" href="http://www.cocos2d-x.org/" target="_blank" rel="noopener"
>http://www.cocos2d-x.org/&lt;/a>
&lt;code>å¦‚æœå¾ˆæ…¢è¯·å°è¯•ä½¿ç”¨ä»£ç†&lt;/code>&lt;/p>
&lt;p>##apiæ–‡æ¡£##&lt;/p>
&lt;p>&lt;a class="link" href="http://www.cocos2d-x.org/wiki/Reference" target="_blank" rel="noopener"
>å®˜æ–¹apiæ–‡æ¡£åœ°å€&amp;raquo;&lt;/a>&lt;/p>
&lt;p>å¯¹apiçš„ä½¿ç”¨å»ºè®®: å¦‚æœæ˜¯ä½¿ç”¨jså¼€å‘æ‰‹æœºnativeçš„æ¸¸æˆçš„è¯, å¯ä»¥ä½¿ç”¨Cocos2d-html5 çš„apiæ–‡æ¡£é…åˆCocos2d-Xçš„æ–‡æ¡£çœ‹, å› ä¸ºCocos2d-xçš„æ–‡æ¡£ä¸»è¦ä»¥c++çš„ä¸ºä¸», çœ‹jsçš„è¯ç”¨èµ·æ¥éå¸¸çš„ä¸æ–¹ä¾¿, æ‰€ä»¥æˆ‘å¹³æ—¶éƒ½æ˜¯ç›´æ¥çœ‹html5çš„, æœ‰é—®é¢˜çš„è¯å†æŸ¥ä¸€ä¸‹c++çš„.&lt;/p>
&lt;p>##åˆ›å»ºé¡¹ç›®##&lt;/p>
&lt;p>è¿™æ˜¯ç¬¬ä¸€ä¸ªå‘, ç›®å‰çš„ç¨³å®šç‰ˆæœ¬æ˜¯2.2.2. å¤§éƒ¨åˆ†ä¹¦è¿˜æ˜¯2.2çš„ç‰ˆæœ¬, ä¹¦é‡Œä»‹ç»çš„å¯¼å…¥xcodeæ¨¡æ¿çš„è„šæœ¬ç°åœ¨å·²ç»æ²¡æœ‰äº†, ç°åœ¨éœ€è¦æ‰§è¡Œè„šæœ¬ç›´æ¥ç”Ÿæˆå·¥ç¨‹.&lt;/p>
&lt;p>è„šæœ¬åœ°å€ &lt;code>cocos2d-x-2.2.2/tools/project-creator/create_project.py&lt;/code>&lt;/p>
&lt;p>å»ºè®®ä½¿ç”¨ &lt;code>python2.7&lt;/code> æ¥æ‰§è¡Œ, æœ€æ–°ç‰ˆçš„pythonè²Œä¼¼æœ‰é—®é¢˜&lt;/p>
&lt;p>ç›´æ¥æ‰§è¡Œä¼šæœ‰å‚æ•°çš„æç¤º, æŠŠå‚æ•°éƒ½è¡¥ä¸Šå†æ‰§è¡Œä¸€éé¡¹ç›®å°±åº”è¯¥åˆ›å»ºå¥½äº†.&lt;/p>
&lt;p>ç”Ÿæˆçš„é¡¹ç›®ä¼šæ”¾åœ¨ &lt;code>cocos2d-x-2.2.2/projects/&lt;/code> ç›®å½•ä¸‹. iOSçš„xcodeå·¥ç¨‹åœ¨ proj.ios ä¸‹é¢. è¦è¿è¡Œéå¸¸ç®€å•, ç›´æ¥åœ¨Xcodeé‡Œç‚¹è¿è¡Œå°±å¯ä»¥ç›´æ¥åœ¨æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œè‡ªå¸¦çš„HelloWorldç¨‹åºäº†. androidçš„è¿è¡Œå¯èƒ½è¦ç¨å¾®éº»çƒ¦ä¸€ç‚¹, å¯ä»¥è‡ªè¡ŒGoogle.&lt;/p>
&lt;p>##å­¦ä¹ ##&lt;/p>
&lt;p>å› ä¸ºè¿™æ–¹é¢çš„èµ„æ–™å¤§éƒ¨åˆ†éƒ½æ˜¯c++çš„, æ‰€ä»¥å­¦ä¹ ä¹ŸåŸºæœ¬æ˜¯ä»çœ‹c++çš„ä¹¦å¼€å§‹, å…¶å®ä¹Ÿä¸ç”¨ä¼šc++, çœ‹ä¹¦ä¸»è¦æ˜¯ä¸ºäº†å¤§æ¦‚çŸ¥é“cocos2d-xæ˜¯å¦‚ä½•å·¥ä½œçš„, éƒ½æœ‰ä»€ä¹ˆæ ·çš„æ–¹æ³•æˆ–è€…å·¥å…·å¯ä»¥ä½¿ç”¨, æ¥ä¸‹æ¥å°±æ˜¯çœ‹æºä»£ç åŒ…é‡Œæä¾›çš„jsçš„ç¤ºä¾‹é¡¹ç›®, çœ‹ä¸€ä¸‹jsæ˜¯æ€ä¹ˆå®ç°å„ç§åŠŸèƒ½çš„.&lt;/p>
&lt;p>å®˜æ–¹ç»™äº†5ä¸ªjsçš„ç¤ºä¾‹é¡¹ç›®, åœ¨ç›®å½•: &lt;code>cocos2d-x-2.2.2/samples/Javascript/&lt;/code> ä¸‹, æ³¨æ„jsçš„æºä»£ç æ”¾åœ¨å…¬ç”¨çš„ &lt;code>cocos2d-x-2.2.2/samples/Javascript/Shared/games&lt;/code> ç›®å½•ä¸‹. è®¤çœŸç ”ç©¶ä¸€ä¸‹è¿™äº›ä»£ç , åœ¨é…åˆapiæ–‡æ¡£åŸºæœ¬ä¸Šå°±å¯ä»¥å¼€å§‹å°è¯•ç€å¼€å‘è‡ªå·±çš„æ¸¸æˆäº†. å…¥é—¨è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„.&lt;/p></description></item><item><title>virtualbox ç¦æ­¢æ—¶é—´åŒæ­¥</title><link>https://hitian.info/post/virtualbox-disable-time-sync/</link><pubDate>Fri, 20 Sep 2013 00:00:00 +0000</pubDate><guid>https://hitian.info/post/virtualbox-disable-time-sync/</guid><description>&lt;p>virtualbox ä¼šè‡ªåŠ¨åŒæ­¥è™šæ‹Ÿæœºçš„æ—¶é—´, çœ‹èµ·æ¥å¾ˆæ–¹ä¾¿, å´ç»™å¼€å‘é€ æˆäº†ä¸å°çš„éº»çƒ¦.&lt;/p>
&lt;p>cmdè¿›å…¥virtualboxçš„ç›®å½• ,ä¸€èˆ¬åœ¨&lt;/p>
&lt;p>&lt;code>C:\Program Files\Oracle\VirtualBox\&lt;/code>&lt;/p>
&lt;p>ç½‘ä¸Šè¯´å‘½ä»¤çš„æ ¼å¼ä¸º&lt;/p>
&lt;p>&lt;code>vboxmanage setextradata &amp;lt;vmname&amp;gt; &amp;quot;VBoxInternal/Devices/VMMDev/0/Config/GetHostTimeDisabled&amp;quot; &amp;quot;1&amp;quot;&lt;/code>&lt;/p>
&lt;p>çœ‹äº†ä¸‹è¯´æ˜. å¦‚æœæ‡’å¾—å»æ‰¾ &lt;!-- raw HTML omitted -->, å¯ä»¥ä½¿ç”¨global ç›´æ¥ä¿®æ”¹å…¨å±€çš„é…ç½®&lt;/p>
&lt;p>æ‰§è¡Œ&lt;/p>
&lt;p>&lt;code>./vboxmanage.exe setextradata global &amp;quot;VBoxInternal/Devices/VMMDev/0/Config/GetHostTimeDisabled&amp;quot; &amp;quot;1&amp;quot;&lt;/code>&lt;/p>
&lt;p>ç„¶åé‡å¯è™šæ‹Ÿæœºå®æµ‹å¯¹guestæ˜¯linux çš„æœ‰æ•ˆ&lt;/p></description></item><item><title>è®¾ç½®gitå¿½ç•¥æœåŠ¡å™¨è¯ä¹¦æ ¡éªŒé”™è¯¯</title><link>https://hitian.info/post/git-ignore-certificate-check/</link><pubDate>Sun, 23 Jun 2013 00:00:00 +0000</pubDate><guid>https://hitian.info/post/git-ignore-certificate-check/</guid><description>&lt;p>å°†è‡ªå·±çš„gitæœåŠ¡å™¨åˆ‡æ¢åˆ°httpsåcloneæ—¶å‘ç”Ÿé”™è¯¯&lt;/p>
&lt;pre tabindex="0">&lt;code>error: SSL certificate problem, verify that the CA cert is OK. Details:
error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed while accessing https://...
&lt;/code>&lt;/pre>&lt;p>å› ä¸ºè¯ä¹¦æ˜¯è‡ªå·±é¢å‘çš„æ— æ³•é€šè¿‡CAçš„æ ¡éªŒ&lt;/p>
&lt;p>&lt;code>git config --global http.sslVerify false&lt;/code>&lt;/p>
&lt;p>è¿™æ ·å°±å¯ä»¥å¿½ç•¥æ ¡éªŒäº†.&lt;/p>
&lt;p>è¯è¯´gitlabç‰ˆæœ¬ä»5.2å‡çº§åˆ°5.3è¿˜çœŸé¡ºåˆ©, å‡çº§æ–‡æ¡£:Â &lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/gitlabhq/gitlabhq/blob/master/doc/update/5.2-to-5.3.md" title="https://github.com/gitlabhq/gitlabhq/blob/master/doc/update/5.2-to-5.3.md"
target="_blank" rel="noopener"
>https://github.com/gitlabhq/gitlabhq/blob/master/doc/update/5.2-to-5.3.md&lt;/a>&lt;/p></description></item><item><title>redisä½¿ç”¨ç¬”è®°</title><link>https://hitian.info/post/redis-notes/</link><pubDate>Fri, 12 Apr 2013 00:00:00 +0000</pubDate><guid>https://hitian.info/post/redis-notes/</guid><description>&lt;p>æ ¹æ® &lt;a class="link" href="http://redis.io" target="_blank" rel="noopener"
>http://redis.io&lt;/a> çš„è¯´æ˜ï¼Œ redisæ”¯æŒ stringï¼Œ listï¼Œ setï¼Œ sorted set å’Œ hash è¿™äº”ç§æ•°æ®ç±»å‹ï¼Œ phpä¸­å¯èƒ½ç»å¸¸éœ€è¦ç›´æ¥æŠŠarray ç›´æ¥å­˜èµ·æ¥ã€‚&lt;/p>
&lt;p>ä»”ç»†çœ‹äº†ä¸‹Â &lt;a class="link" href="https://github.com/nicolasff/phpredis" target="_blank" rel="noopener"
>https://github.com/nicolasff/phpredis&lt;/a> Â ä¸Šçš„è¯´æ˜ï¼Œ å…¶å®æœ‰ä¸ªæ–¹æ³•setOption å¯ä»¥è®¾ç½®å®¢æˆ·ç«¯çš„ä¸€äº›å±æ€§&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;?&lt;/span>&lt;span class="nx">php&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$redis&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">setOption&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Redis&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">OPT_SERIALIZER&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Redis&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">SERIALIZER_PHP&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// use built-in serialize/unserialize
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™æ ·å°±å¯ä»¥ä½¿ç”¨phpå†…ç½®çš„serialize/unserialize æ–¹æ³•å¯¹æ•°æ®è¿›è¡Œå¤„ç†&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;?&lt;/span>&lt;span class="nx">php&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * redis test
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * @author jia.tian@me.com
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$redis&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Redis&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$redis&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">connect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;127.0.0.1&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;6379&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$redis&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">setOption&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Redis&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">OPT_SERIALIZER&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">Redis&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="na">SERIALIZER_PHP&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$redis&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;tian&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;tian&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;passwd&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;123456&amp;#39;&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">var_dump&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$redis&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;tian&amp;#39;&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$redis&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;tian&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;test&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">var_dump&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$redis&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;tian&amp;#39;&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿è¡Œç»“æœï¼š&lt;/p>
&lt;p>&lt;code>array(2) { [&amp;quot;name&amp;quot;]=&amp;gt; string(4) &amp;quot;tian&amp;quot; [&amp;quot;passwd&amp;quot;]=&amp;gt; string(6) &amp;quot;123456&amp;quot; } string(4) &amp;quot;test&amp;quot;&lt;/code>&lt;/p>
&lt;p>å¯ä»¥çœ‹åˆ°å°†arrayå­˜å…¥å’Œå–å‡ºæ—¶ä¼šè‡ªåŠ¨è¿›è¡Œäº†å¤„ç†è¿™æ˜¯ç›´æ¥åœ¨githubä¸Šä¸‹è½½çš„zipåŒ…åœ¨ubuntuä¸Šå®‰è£…çš„ï¼Œå¯ä»¥çœ‹åˆ°ç‰ˆæœ¬å·æ˜¯2.2.2&lt;/p>
&lt;p>&lt;a class="link" href="https://hitian.info/assets/images/2013/04/Snip20130412_7.png" >&lt;img src="https://hitian.info/assets/images/2013/04/Snip20130412_7.png" alt="Snip20130412_7" />&lt;/a>&lt;/p>
&lt;p>å› ä¸ºå…¬å¸ç”µè„‘æ˜¯winç¯å¢ƒï¼Œ æ‰¾äº†ä¸ªwinçš„redisæ‰©å±•ï¼Œä½†æ˜¯åœ¨setOptionè¿™æ­¥æœ‰ç‚¹éº»çƒ¦ï¼Œ åªè¦ä¸€è®¾ç½®å°±ç™½å±ã€‚ åŸå› ä»åœ¨æµ‹è¯•ä¸­ã€‚ã€‚ã€‚&lt;/p>
&lt;p>psï¼šé¡¹ç›®ç»ˆäºè¦å¼€å§‹å¤§é‡ä½¿ç”¨redisäº†ï¼Œ èƒ½åˆ°è¿™ä¸€å¤©çœŸä¸å®¹æ˜“å•Šã€‚&lt;/p></description></item><item><title>nginx ä½¿ç”¨ç¬”è®°</title><link>https://hitian.info/post/nginx-notes/</link><pubDate>Thu, 04 Apr 2013 00:00:00 +0000</pubDate><guid>https://hitian.info/post/nginx-notes/</guid><description>&lt;p>æ·»åŠ phpmyadmin alias&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">location /phpmyadmin &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> root /usr/share/&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> index index.php index.html index.htm&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location ~ ^/phpmyadmin/&lt;span class="o">(&lt;/span>.+&lt;span class="se">\.&lt;/span>php&lt;span class="o">)&lt;/span>$ &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> try_files &lt;span class="nv">$uri&lt;/span> &lt;span class="o">=&lt;/span>404&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> root /usr/share/&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fastcgi_pass 127.0.0.1:9000&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fastcgi_index index.php&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fastcgi_param SCRIPT_FILENAME &lt;span class="nv">$document_root$fastcgi_script_name&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> include /etc/nginx/fastcgi_params&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> location ~* ^/phpmyadmin/&lt;span class="o">(&lt;/span>.+&lt;span class="se">\.&lt;/span>&lt;span class="o">(&lt;/span>jpg&lt;span class="p">|&lt;/span>jpeg&lt;span class="p">|&lt;/span>gif&lt;span class="p">|&lt;/span>css&lt;span class="p">|&lt;/span>png&lt;span class="p">|&lt;/span>js&lt;span class="p">|&lt;/span>ico&lt;span class="p">|&lt;/span>html&lt;span class="p">|&lt;/span>xml&lt;span class="p">|&lt;/span>txt&lt;span class="o">))&lt;/span>$ &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> root /usr/share/&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>é™æ€æ–‡ä»¶ç¼“å­˜ï¼Œ å¹¶ä¸”ä¸è®°å½•æ—¥å¿—&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">location ~ &lt;span class="se">\.&lt;/span>&lt;span class="o">(&lt;/span>jpg&lt;span class="p">|&lt;/span>jpeg&lt;span class="p">|&lt;/span>gif&lt;span class="p">|&lt;/span>css&lt;span class="p">|&lt;/span>png&lt;span class="p">|&lt;/span>js&lt;span class="p">|&lt;/span>ico&lt;span class="p">|&lt;/span>xml&lt;span class="o">)&lt;/span>$ &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> access_log off&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> expires 30d&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>adbè¿æ¥åˆ°rk30sdk</title><link>https://hitian.info/post/adb-connect-to-rk30sdk/</link><pubDate>Sun, 24 Feb 2013 00:00:00 +0000</pubDate><guid>https://hitian.info/post/adb-connect-to-rk30sdk/</guid><description>&lt;p>ä¿®æ”¹Â &lt;code>~/.android/adb_usb.ini&lt;/code> æ–‡ä»¶&lt;/p>
&lt;p>æ·»åŠ &lt;/p>
&lt;p>&lt;code>0x2207&lt;/code>&lt;/p>
&lt;p>æ³¨æ„æ–‡ä»¶ä¸­ä¸èƒ½æœ‰ç©ºè¡Œ, å¦åˆ™å¯èƒ½æŠ¥é”™:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">* daemon not running. starting it now on port &lt;span class="m">5037&lt;/span> *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ADB server didn&lt;span class="err">&amp;#39;&lt;/span>t ACK
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">* failed to start daemon *
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ–‡ä»¶ä¿®æ”¹å¥½åé‡å¯ä¸€ä¸‹æœåŠ¡&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">tianMac:platform-tools tian$ ./adb kill-server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tianMac:platform-tools tian$ ./adb start-server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">* daemon not running. starting it now on port &lt;span class="m">5037&lt;/span> *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">* daemon started successfully *
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç„¶ååº”è¯¥å°±å¯ä»¥çœ‹è§è®¾å¤‡äº†.&lt;/p></description></item><item><title>brew install httpd å‘ç”Ÿé”™è¯¯</title><link>https://hitian.info/post/brew-install-httpd/</link><pubDate>Sun, 30 Dec 2012 00:00:00 +0000</pubDate><guid>https://hitian.info/post/brew-install-httpd/</guid><description>&lt;p>ä»Šå¤©å®‰è£…subversionçš„è¿‡ç¨‹ä¸­æŠŠhttpdå¸æ‰äº†ï¼Œ ç»“æœé‡æ–°å®‰è£…çš„æ—¶å€™å‘ç”Ÿé”™è¯¯äº†&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">tian-mac:~ tian$ brew install &lt;span class="nv">httpd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&lt;/span>&amp;gt; Downloading http://www.apache.org/dist/httpd/httpd-2.2.22.tar.bz2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Already downloaded: /Library/Caches/Homebrew/httpd-2.2.22.tar.bz2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&lt;/span>&amp;gt; ./configure --prefix&lt;span class="o">=&lt;/span>/usr/local/Cellar/httpd/2.2.22 --mandir&lt;span class="o">=&lt;/span>/usr/local/Cellar/httpd/2.2.22/share/man --enable-layout&lt;span class="o">=&lt;/span>GNU --enable-mods-shared&lt;span class="o">=&lt;/span>all --with-ssl&lt;span class="o">=&lt;/span>/usr --wit
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">checking whether to &lt;span class="nb">enable&lt;/span> mod_substitute... shared &lt;span class="o">(&lt;/span>all&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">checking whether to &lt;span class="nb">enable&lt;/span> mod_charset_lite... no
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">checking whether to &lt;span class="nb">enable&lt;/span> mod_deflate... checking dependencies
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">checking &lt;span class="k">for&lt;/span> zlib location... not found
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">checking whether to &lt;span class="nb">enable&lt;/span> mod_deflate... configure: error: mod_deflate has been requested but can not be built due to prerequisite failures
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">READ THIS: https://github.com/mxcl/homebrew/wiki/troubleshooting
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">These open issues may also help:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">https://github.com/mxcl/homebrew/issues/14884
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>çœ‹äº†ä¸€ä¸‹ zlib å·²ç»å®‰è£…äº†ï¼Œ æ‰€ä»¥ç¼–è¾‘ä¸€ä¸‹å®‰è£…çš„è„šæœ¬åŠ ä¸Šzlibçš„è·¯å¾„&lt;/p>
&lt;p>&lt;code>brew edit httpd&lt;/code>&lt;/p>
&lt;p>åŠ ä¸Šä¸€è¡Œ Â &lt;code>--with-z=/usr/local/opt/zlib/&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">def install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> system &lt;span class="s2">&amp;#34;./configure&amp;#34;&lt;/span>, &lt;span class="s2">&amp;#34;--disable-debug&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;--disable-dependency-tracking&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;--prefix=#{prefix}&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;--mandir=#{man}&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;--enable-layout=GNU&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;--enable-mods-shared=all&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;--with-ssl=/usr&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;--with-z=/usr/local/opt/zlib/&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;--with-mpm=prefork&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;--disable-unique-id&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;--enable-ssl&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;--enable-dav&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;--enable-cache&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;--enable-proxy&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;--enable-logio&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;--enable-deflate&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;--with-included-apr&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;--enable-cgi&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;--enable-cgid&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;--enable-suexec&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;--enable-rewrite&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> system &lt;span class="s2">&amp;#34;make&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> system &lt;span class="s2">&amp;#34;make install&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> end
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>é‡æ–°å®‰è£…ä¸€ä¸‹å°±å¥½äº†ã€‚&lt;/p></description></item><item><title>æ¨èä¸€ä¸ªzendstudioè°ƒæ ·å¼çš„æ–°æ–¹å¼</title><link>https://hitian.info/post/zendstudio-install-theme/</link><pubDate>Sat, 01 Dec 2012 00:00:00 +0000</pubDate><guid>https://hitian.info/post/zendstudio-install-theme/</guid><description>&lt;p>é»˜è®¤çš„ç™½åº•é»‘å­—å…¶å®çœ‹ä¹…äº†ä¹ŸæŒºçƒ¦ï¼Œ æ— å¥ˆå®¡ç¾å¤ªå·®ï¼Œ è‡ªå·±è°ƒé¢œè‰²åªä¼šè¶Šå¼„è¶Šå·®ã€‚&lt;/p>
&lt;p>æ— æ„ä¸­å‘ç°äº†è¿™ä¸ªä¸œè¥¿ï¼Œ æ¢ä¸»é¢˜å°±å¾ˆæ–¹ä¾¿äº†&lt;/p>
&lt;p>é€‰æ‹© Install New Softwareâ€¦ Â æ–°å¢ä¸€ä¸ª&lt;/p>
&lt;p>&lt;code>http://eclipse-color-theme.github.com/update/&lt;/code>&lt;/p>
&lt;p>ç„¶åå®‰è£…é‡Œé¢çš„ &lt;code>Eclipse Color Theme&lt;/code>&lt;/p>
&lt;p>é‡å¯ä¹‹åå°±å¯ä»¥çœ‹åˆ°äº†&lt;/p>
&lt;p>&lt;img src="https://hitian.info/assets/images/2012/12/Snip20121201_21.png" alt="Snip20121201_21 5" title="Snip20121201_21.png" />&lt;/p>
&lt;p>è¦æ¢ä¸»é¢˜ä¼šéå¸¸æ–¹ä¾¿ã€‚&lt;/p>
&lt;p>ps: è‡ªä»å®‰è£…äº†sublime text ä¹‹åï¼Œ å¯¹å®ƒçš„é…è‰²ä¸€ç›´å¿µå¿µä¸å¿˜ã€‚ã€‚ã€‚&lt;/p></description></item><item><title>ä¸ºDiffMergeåˆ›å»ºfinderå³é”®èœå•</title><link>https://hitian.info/post/diffmerge/</link><pubDate>Sat, 01 Dec 2012 00:00:00 +0000</pubDate><guid>https://hitian.info/post/diffmerge/</guid><description>&lt;p>ä¹ æƒ¯äº†winä¸‹ç›´æ¥é€‰ä¸­æ–‡ä»¶å³é”®å¯¹æ¯”ï¼Œ åœ¨macä¸‹æ‰¾äº†å¥½ä¹…ï¼Œè¦ä¹ˆè´µçš„è¦æ­»ï¼Œè¦ä¹ˆæ²¡æœ‰ï¼Œæ‰€ä»¥å†³å®šè‡ªå·±åˆ›å»ºä¸€ä¸ªã€‚&lt;/p>
&lt;ol>
&lt;li>æ‰“å¼€ç³»ç»Ÿè‡ªå¸¦çš„ Automator&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://hitian.info/assets/images/2012/12/Snip20121201_3.png" alt="Snip20121201 3" title="Snip20121201_3.png" />&lt;/p>
&lt;ol start="2">
&lt;li>åˆ›å»ºä¸€ä¸ªæœåŠ¡&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://hitian.info/assets/images/2012/12/Snip20121201_5.png" alt="Snip20121201 5" title="Snip20121201_5.png" />&lt;/p>
&lt;ol start="3">
&lt;li>
&lt;p>å³ä¸Š Â â€œæœåŠ¡â€æ”¶åˆ°é€‰å®šçš„ Â æ”¹ä¸º æ–‡ä»¶è´§æ–‡ä»¶å¤¹ Â ï¼Œ ä½äºæ”¹ä¸ºFinder.app&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å·¦è¾¹é€‰ ä½¿ç”¨å·¥å…· Â åŒå‡»ä¸‹é¢çš„ è¿è¡ŒShell è„šæœ¬&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å³è¾¹ ä¼ é€è¾“å…¥ æ”¹ä¸º ä½œä¸ºè‡ªå˜é‡ï¼Œ Â ä¸‹é¢è¾“å…¥ Â &lt;code>/Applications/DiffMerge.app/Contents/MacOS/DiffMerge &amp;quot;$1&amp;quot; &amp;quot;$2&amp;quot;&lt;/code>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>Â  Â  å‚è€ƒè‡ªå·±çš„DiffMergeçš„ä½ç½®&lt;/p>
&lt;p>å¥½äº†ï¼Œ ç°åœ¨å–ä¸ªåå­—å¹¶ä¿å­˜&lt;/p>
&lt;p>&lt;img src="https://hitian.info/assets/images/2012/12/Snip20121201_7.png" alt="Snip20121201 7" title="Snip20121201_7.png" />&lt;/p>
&lt;p>é€‰ä¸­è¦å¯¹æ¯”çš„æ–‡ä»¶ï¼Œ å³é”® -ã€‹æœåŠ¡ Â  å°±å¯ä»¥çœ‹åˆ°äº†ã€‚&lt;/p></description></item><item><title>macä¸‹å®‰è£…dnsmasqç¬”è®°</title><link>https://hitian.info/post/macos-install-dnsmasq/</link><pubDate>Sun, 25 Nov 2012 00:00:00 +0000</pubDate><guid>https://hitian.info/post/macos-install-dnsmasq/</guid><description>&lt;p>å®‰è£…&lt;/p>
&lt;p>&lt;code>brew update &amp;amp;&amp;amp; brew install dnsmasq&lt;/code>&lt;/p>
&lt;p>Â &lt;/p>
&lt;p>é…ç½®&lt;/p>
&lt;p>#ä»æ¨¡æ¿åˆ›å»ºé…ç½®æ–‡ä»¶&lt;/p>
&lt;p>&lt;code>cp /usr/local/Cellar/dnsmasq/2.63/dnsmasq.conf.example /usr/local/etc/dnsmasq.conf&lt;/code>&lt;/p>
&lt;p>#å¼€æœºè‡ªå¯åŠ¨&lt;/p>
&lt;p>&lt;code>sudo cp /usr/local/Cellar/dnsmasq/2.63/homebrew.mxcl.dnsmasq.plist /Library/LaunchDaemons/&lt;/code>&lt;/p>
&lt;p>&lt;code>sudo launchctl load -w /Library/LaunchDaemons/homebrew.mxcl.dnsmasq.plistÂ &lt;/code>&lt;/p>
&lt;p>Â &lt;/p>
&lt;p>ç¼–è¾‘ Â Â &lt;code>/usr/local/etc/dnsmasq.conf&lt;/code>&lt;/p>
&lt;p>ä¿®æ”¹Â &lt;code>resolv-file=/etc/resolv.dnsmasq.conf&lt;/code>&lt;/p>
&lt;p>å¦‚æœåªæƒ³æœ¬æœºä½¿ç”¨ è¿™é‡Œä¹Ÿä¿®æ”¹ä¸€ä¸‹&lt;/p>
&lt;p>&lt;code>listen-address=127.0.0.1&lt;/code>&lt;/p>
&lt;p>Â &lt;/p>
&lt;p>ä¿®æ”¹maxosçš„é…ç½®ä½¿ç”¨æœ¬åœ°çš„dnsmasq&lt;/p>
&lt;p>ç¼–è¾‘Â &lt;code>/etc/resolv.conf&lt;/code>&lt;/p>
&lt;p>ä¿®æ”¹ Â &lt;code>nameserver 127.0.0.1&lt;/code>&lt;/p>
&lt;p>Â &lt;/p>
&lt;p>å‚è€ƒåŸå§‹é¡µé¢Â &lt;a class="link" href="http://blog.philippklaus.de/2012/02/install-dnsmasq-locally-on-mac-os-x-via-homebrew/" target="_blank" rel="noopener"
>http://blog.philippklaus.de/2012/02/install-dnsmasq-locally-on-mac-os-x-via-homebrew/&lt;/a>&lt;/p>
&lt;p>Â &lt;/p>
&lt;p>Â &lt;/p></description></item><item><title>openwrt dnsé…ç½®</title><link>https://hitian.info/post/openwrt-dns-configuration/</link><pubDate>Sun, 25 Nov 2012 00:00:00 +0000</pubDate><guid>https://hitian.info/post/openwrt-dns-configuration/</guid><description>&lt;p>æƒ³ä½¿ç”¨v2exçš„dnsæ¥åŠ é€Ÿapp storeï¼Œ åˆä¸æƒ³å› ä¸ºdnsçš„åŸå› å¯¼è‡´æŸäº›ç½‘ç«™çš„åŒºåŸŸæ€§cdnåŠ é€Ÿå¤±æ•ˆ&lt;/p>
&lt;p>å…¶å®ç”¨dnsmasqå¾ˆå®¹æ˜“è§£å†³è¿™ä¸ªé—®é¢˜&lt;/p>
&lt;p>ç»™è·¯ç”±å™¨åˆ·ä¸ªopenwrtï¼Œ ç„¶åè®¾ç½®å°±ç®€å•å¤šäº†&lt;/p>
&lt;p>æ‰“å¼€ Â ç½‘ç»œ Â  =ã€‹ Â  DHCP/DNS Â  é¡µé¢&lt;/p>
&lt;p>è®¾ç½®ä¸€ä¸‹é‡Œé¢çš„DNSè½¬å‘ï¼Œ æŠŠv2exçš„ä¸¤ä¸ªipåŠ è¿›å», å°†è‹¹æœçš„äºŒçº§åŸŸåä½¿ç”¨v2exè¿›è¡Œè§£æï¼Œ è€Œå…¶ä»–åŸŸåè¿˜æ˜¯é€šè¿‡æœ¬åœ°ispçš„dnsè§£æã€‚&lt;/p>
&lt;p>&lt;code>/.apple.com/199.91.73.222&lt;/code>&lt;/p>
&lt;p>&lt;code>/.apple.com/178.79.131.110&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://hitian.info/assets/images/2012/11/Snip20121125_4.png" alt="Snip20121125 4" title="Snip20121125_4.png" />&lt;/p>
&lt;p>ä¿å­˜ï¼Œ å¤§åŠŸå‘Šæˆ&lt;/p>
&lt;p>Â &lt;/p></description></item><item><title>æ¨èä¸ªwinä¸‹é¢å¥½ç”¨çš„æ–‡ä»¶å¯¹æ¯”è½¯ä»¶WinMerge</title><link>https://hitian.info/post/winmerge/</link><pubDate>Fri, 12 Oct 2012 00:00:00 +0000</pubDate><guid>https://hitian.info/post/winmerge/</guid><description>&lt;blockquote>
&lt;/blockquote>
&lt;p>&lt;strong>WinMerge&lt;/strong>&lt;/p>
&lt;p>å®˜ç½‘ï¼š&lt;a class="link" href="http://winmerge.org/" target="_blank" rel="noopener"
>http://winmerge.org/&lt;/a>&lt;/p>
&lt;p>ä¸€æ¬¾ Windows ä¸‹çš„å¼€æºå…è´¹æ–‡ä»¶æ¯”è¾ƒ/åˆå¹¶å·¥å…·ï¼Œæ”¯æŒæ–‡ä»¶/æ–‡ä»¶å¤¹æ¯”è¾ƒï¼Œå¯ä»¥å¤„ç†DOSã€UNIX å’Œ MAC ä¸­çš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ”¯æŒ Unicode æ ‡å‡†ä¸‡å›½ç ï¼Œå¯ä»¥å¯¹æ–‡æœ¬æ–‡æ¡£çš„å¯è§†åŒ–ç¼–è¾‘ä»¥åŠåˆå¹¶ï¼Œä¹Ÿæœ‰è¯­æ³•é«˜äº®å’Œæ”¯æŒå‹ç¼©åŒ…åŠŸèƒ½ï¼ˆé€šè¿‡7-Zipæ”¯æŒï¼‰ã€‚&lt;/p>
&lt;p>ä¹‹å‰æ–‡ä»¶å¯¹æ¯”ä¸€ç›´ç”¨çš„TortoiseSVNè‡ªå¸¦çš„diff,Â  ä¸è¿‡ä¸æ˜¯å¾ˆç›´è§‚, WinMerge ç”¨èµ·æ¥æ›´æ–¹ä¾¿ä¸€ç‚¹, å¯ä»¥ç›´æ¥æ˜¾ç¤ºä¸åŒçš„ä½ç½®, å¯ä»¥ç›´æ¥æ›¿æ¢æ‰TortoiseSVNé‡Œçš„. Â 
&lt;a class="link" href="https://hitian.info/assets/images/2012/10/image.png" >&lt;img src="https://hitian.info/assets/images/2012/10/image_thumb.png" alt="image" title="image" />&lt;/a>&lt;/p></description></item><item><title>macä¸Šæœ€ç®€å•çš„ä»£ç†æ–¹å¼</title><link>https://hitian.info/post/macos-simple-proxy/</link><pubDate>Mon, 01 Oct 2012 00:00:00 +0000</pubDate><guid>https://hitian.info/post/macos-simple-proxy/</guid><description>&lt;p>åœ¨macä¸Šä½¿ç”¨sshä»£ç†å…¶å®å¾ˆæ–¹ä¾¿&lt;/p>
&lt;p>å‰ææ˜¯æœ‰ä¸€ä¸ªsshè´¦å·&lt;/p>
&lt;p>å‘½ä»¤&lt;/p>
&lt;p>&lt;code>$ ssh -D 1089 tian@domain.com&lt;/code>&lt;/p>
&lt;p>ä¼šæ‰“å¼€ç«¯å£1089 ç›‘å¬&lt;/p>
&lt;p>æŸ¥çœ‹ç«¯å£å¯ä»¥å‘ç°&lt;/p>
&lt;pre tabindex="0">&lt;code>Active Internet connections (including servers)
Proto Recv-Q Send-Q Local Address Foreign Address (state)
tcp6 0 0 ::1.1089 *.* LISTEN
tcp4 0 0 127.0.0.1.1089 *.* LISTEN
&lt;/code>&lt;/pre>&lt;p>è¿™æ ·è¿æ¥å°±å»ºç«‹å¥½äº†ï¼Œ ç„¶åé…ç½®ä¸€ä¸‹&lt;/p>
&lt;p>è¿›å…¥ç½‘ç»œåå¥½è®¾ç½®ï¼Œ é€‰è‡ªå·±æ­£åœ¨ç”¨çš„ç½‘ç»œè¿æ¥ -ã€‹ç‚¹é«˜çº§-ã€‹é€‰æ‹©ä»£ç†æ ‡ç­¾&lt;/p>
&lt;p>&lt;img src="https://hitian.info/assets/images/2012/10/Snip20121001_3.png" alt="Snip20121001 3" title="Snip20121001_3.png" />&lt;/p>
&lt;p>ä½¿ç”¨socksä»£ç†ï¼Œ å¡«ä¸Šåˆšæ‰çš„ç«¯å£å·&lt;/p>
&lt;p>ç¡®å®éå¸¸æ–¹ä¾¿ã€‚&lt;/p></description></item><item><title>blogè¯„è®ºååƒåœ¾</title><link>https://hitian.info/post/blog-comments/</link><pubDate>Mon, 10 Sep 2012 00:00:00 +0000</pubDate><guid>https://hitian.info/post/blog-comments/</guid><description>&lt;p>è¿‘å‡ å¤©åšå®¢çš„åƒåœ¾è¯„è®ºè¶Šæ¥è¶Šå¤šï¼Œ ä¸€å¤©ç”šè‡³å¥½å‡ åä¸ªã€‚ è¿«ä¸å¾—å·²è£…ä¸ªæ’ä»¶æ¥é˜²åƒåœ¾ã€‚&lt;/p>
&lt;p>ç”±äºç©ºé—´ç¦ç”¨äº†php çš„fsockopen å‡½æ•°å¯¼è‡´Akismet æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨ã€‚&lt;/p>
&lt;p>æµ‹è¯•ä¸€ä¸‹å‘ç°pfsockopen æ²¡æœ‰è¢«ç¦ç”¨ï¼Œ è¿›å…¥akismetçš„ç›®å½•æ‰¹é‡æ›¿æ¢æ‰€æœ‰fsockopenä¸ºpfsockopenã€‚&lt;/p>
&lt;p>&lt;img src="https://hitian.info/assets/images/2012/09/QQ20120910-1.png" alt="QQ20120910 1" title="QQ20120910-1.png" />&lt;/p>
&lt;p>ç„¶åå°±æ£€æµ‹æ­£å¸¸äº†&lt;/p>
&lt;p>å…·ä½“çš„åŠŸèƒ½å¥½ä¸å¥½ä½¿å¾—è§‚å¯Ÿä¸€æ®µæ—¶é—´å†çœ‹äº†ã€‚&lt;/p></description></item><item><title>æ³¨å…¥é£é™©æé†’</title><link>https://hitian.info/post/sql-injection-risk/</link><pubDate>Sun, 29 Apr 2012 00:00:00 +0000</pubDate><guid>https://hitian.info/post/sql-injection-risk/</guid><description>&lt;p>å‰å‡ å¤©å‘ç°çš„æ•°æ®åº“æ³¨å…¥æ€»ç»“ä¸€ä¸‹&lt;/p>
&lt;p>å‘ç”Ÿé—®é¢˜çš„è¿‡æ»¤:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;?&lt;/span>&lt;span class="nx">php&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="nx">in_array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$_GET&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;t&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="k">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="p">)&lt;/span>&lt;span class="o">?&lt;/span>&lt;span class="nv">$_GET&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;t&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™ä¸ªè¿‡æ»¤å®é™…ä¸ä¸¥æ ¼, å½“ä¼ è¿›æ¥çš„å˜é‡ä»¥ 1,2,3ä¸­çš„ä»»æ„æ•°å­—å¼€å¤´æ—¶è¿‡æ»¤å°†å¤±è´¥&lt;/p>
&lt;p>å½“ç”¨æˆ· ä¼  &lt;code>t=1' or '1'='1&lt;/code> æ—¶, $typeè·å–åˆ°çš„å˜é‡å°†ç»´æŒåŸæ ·, ç›´æ¥ä¼ åˆ°æ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢æ—¶ä¼šæœ‰æ³¨å…¥å±é™©&lt;/p>
&lt;p>æ€»ç»“å’Œå»ºè®®:æ‰€æœ‰ç”±ç”¨æˆ·ä¼ å…¥int å€¼ å¿…é¡»ä½¿ç”¨ &lt;code>intval()&lt;/code> è¿›è¡Œè¿‡æ»¤&lt;/p>
&lt;p>å­—ç¬¦ä¸²å¿…é¡»ä½¿ç”¨&lt;code>mysql_real_escape_string()&lt;/code> è¿›è¡Œè¿‡æ»¤&lt;/p>
&lt;p>åœ¨è¯»å– &lt;code>$_GET $_REQUEST $_POST $_COOKIE&lt;/code> æ—¶ å¿…é¡»è¿›è¡Œè¿‡æ»¤, ä¸€èˆ¬è®¤ä¸ºç”¨æˆ·ä¼ å…¥çš„æ•°æ®éƒ½æ˜¯ä¸å®‰å…¨çš„.&lt;/p></description></item><item><title>sqlç¬”è®°</title><link>https://hitian.info/post/sql-note/</link><pubDate>Thu, 12 Apr 2012 00:00:00 +0000</pubDate><guid>https://hitian.info/post/sql-note/</guid><description>&lt;p>ä¸€èˆ¬æ•°æ®åº“ä¼šæ ¹æ®ä½¿ç”¨çš„æƒ…å†µæ¥è®¾è®¡, ä¸ºäº†ä¿è¯æ€§èƒ½ä¸€èˆ¬é“¾æ¥çš„è¡¨ä¸åº”è¯¥è¶…è¿‡2ä¸ª,&lt;/p>
&lt;p>ä½†æ˜¯åœ¨æ•°æ®ç»Ÿè®¡æ±‡æ€»è¿ç®—çš„æ—¶å€™å°±éº»çƒ¦äº†, å¾€å¾€éœ€è¦æŸ¥å¥½å¤šå¼ è¡¨æ‰èƒ½å¾—åˆ°éœ€è¦çš„æ•°æ®.&lt;/p>
&lt;p>å¦‚æœæŸ¥è¯¢å¾ˆå¤æ‚çš„æ—¶å€™ä¸€æ¬¡joinå¥½å¤šå¼ è¡¨ä¼šå¯¼è‡´æŸ¥è¯¢é€Ÿåº¦å·¨æ…¢.&lt;/p>
&lt;p>å½“ç„¶ç”¨phpç­‰åŠ¨æ€è¯­è¨€æŠŠæ•°æ®å–å‡ºæ¥è¿›è¡Œè¿ç®—ä¹Ÿä¸é”™,å°±æ˜¯éœ€è¦å†™ä»£ç .&lt;/p>
&lt;p>Â &lt;/p>
&lt;p>èƒ½åœ¨æ•°æ®åº“å†…å®Œæˆçš„è¿ç®— å½“ç„¶æƒ³è¦ç›´æ¥åœ¨åº“å†…å®Œæˆ&lt;/p>
&lt;p>ä½¿ç”¨ä¸´æ—¶è¡¨å­˜å‚¨è®¡ç®—è¿‡ç¨‹ä¸­çš„ä¸­é—´æ•°æ®æ—¶éš”ä¸é”™çš„é€‰æ‹©&lt;/p>
&lt;p>ä½¿ç”¨ä¸´æ—¶è¡¨è¿›è¡Œæ•°æ®ç»Ÿè®¡ï¼Œ é¿å…å‡ºç°è¶…è¿‡3ä¸ªä»¥ä¸Šçš„joinæ“ä½œ&lt;/p>
&lt;p>&amp;ndash;ä»¥é˜²ä¸‡ä¸€å…ˆåˆ é™¤è¡¨&lt;/p>
&lt;p>&lt;code>drop table if exists tmp_table;&lt;/code>&lt;/p>
&lt;p>&amp;ndash;åˆ›å»ºä¸´æ—¶è¡¨çš„æ—¶å€™åŠ ä¸Štemporary å…³é”®å­—å°±è¡Œäº†&lt;/p>
&lt;p>&lt;code>create temporary table tmp_table(uid bigint not null primary key, cityid int(10) unsigned, prov varchar(50), city varchar(50), group_id tinyint );&lt;/code>&lt;/p>
&lt;p>Â &lt;/p>
&lt;p>&amp;ndash;æŠŠå¤šä¸ªè¡¨ä¸­éœ€è¦çš„æ•°æ®ç»„åˆåœ¨ä¸€èµ·æ’å…¥ä¸´æ—¶è¡¨ä¸­, æš‚æ—¶æ²¡æœ‰çš„æ•°æ®æ’å…¥ç©ºå­—ç¬¦ä¸²&lt;/p>
&lt;p>&lt;code>insert into tmp_table select a.uid as uid, a.cityid as cityid,'','',0 from my_city a inner join my_op b on a.uid=b.uid where a.reg_date='2012-04-10' and b.ctime&amp;gt;0;&lt;/code>&lt;/p>
&lt;p>&amp;ndash;è”åˆå¤šè¡¨æ›´æ–°&lt;/p>
&lt;p>&lt;code>update tmp_table a, my_city bÂ  set a.prov=b.prov, a.city=b.area where a.cityid=b.id;&lt;/code>&lt;/p>
&lt;p>&amp;ndash;è¿˜æ˜¯è”åˆå¤šè¡¨æ›´æ–°&lt;/p>
&lt;p>&lt;code>update tmp_table a, my_city_auth bÂ  set a.group_id=b.group_id where a.prov=b.prov;&lt;/code>&lt;/p>
&lt;p>Â &lt;/p>
&lt;p>&amp;ndash;å‰©ä¸‹çš„å°±åªæ˜¯æŠŠç®—å¥½çš„æ•°æ®è¯»å‡ºæ¥äº†.&lt;/p>
&lt;p>è€Œä¸”ä¸´æ—¶è¡¨æ˜¯sessionçº§åˆ«çš„, åªæœ‰å½“å‰ç”¨æˆ·å¯è§, è€Œä¸”æ–­å¼€é“¾æ¥åå°±è‡ªåŠ¨æ¸…ç†äº†.&lt;/p></description></item><item><title>ç”¨latin1æ¥å­˜å‚¨æ±‰å­—çœŸæŠ“ç‹‚</title><link>https://hitian.info/post/latin1/</link><pubDate>Thu, 12 Apr 2012 00:00:00 +0000</pubDate><guid>https://hitian.info/post/latin1/</guid><description>&lt;p>mysql æ˜¯ä»4.0 å‡çº§ä¸Šæ¥çš„ï¼Œ ç›´æ¥ä½¿ç”¨äº†latin1_swedish_ci å­˜å‚¨æ±‰å­—ï¼Œæ²¡æƒ³åˆ°å¸¦æ¥äº†å¥½å¤šéº»çƒ¦ã€‚&lt;/p>
&lt;p>é¦–å…ˆæ˜¯æŸ¥è¯¢çš„é—®é¢˜&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">mysql&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">my_city&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">city&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">â€™æ¸©å·â€™&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="err">â€”&lt;/span>&lt;span class="o">-+&lt;/span>&lt;span class="err">â€”â€”&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">city&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="err">â€”&lt;/span>&lt;span class="o">-+&lt;/span>&lt;span class="err">â€”â€”&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">æ¸©å·&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">æ¢§å·&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="err">â€”&lt;/span>&lt;span class="o">-+&lt;/span>&lt;span class="err">â€”â€”&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">rows&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">in&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">set&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sec&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å½“ç„¶, å¦‚æœåœ¨cityä¸Šå»ºäº†å”¯ä¸€ç´¢å¼•, å°±ä¼šå€’å¤§éœ‰&amp;hellip;&lt;/p>
&lt;p>Â 
ç„¶åæ˜¯æ’åºçš„é—®é¢˜&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">mysql&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">my_city&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">order&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">by&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">city&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">asc&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="err">â€”&lt;/span>&lt;span class="o">-+&lt;/span>&lt;span class="err">â€”â€”&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">city&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="err">â€”&lt;/span>&lt;span class="o">-+&lt;/span>&lt;span class="err">â€”â€”&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">ä¸Šæµ·&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">æ¸©å·&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">æ¢§å·&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">è¥¿å®‰&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">é‡åº†&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">å®‰å¾½&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">åŒ—äº¬&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="err">â€”&lt;/span>&lt;span class="o">-+&lt;/span>&lt;span class="err">â€”â€”&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">rows&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">in&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">set&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sec&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™ä¸ªé¡ºåºçœ‹èµ·æ¥æ›´è®©äººéƒé—·&amp;hellip;&lt;/p>
&lt;p>ä¸´æ—¶è§£å†³æ–¹æ¡ˆ:&lt;/p>
&lt;p>&lt;code>ALTER TABLEÂ  `my_city` CHANGEÂ  `city`Â  `city` VARCHAR( 25 ) CHARACTER SET latin1 COLLATE latin1_bin NULL DEFAULT NULL&lt;/code>&lt;/p>
&lt;p>ä¿®æ”¹å­—æ®µçš„collate ä¸º latin1_bin&lt;/p>
&lt;p>ç„¶åå†æ¥çœ‹&lt;/p>
&lt;p>æŸ¥è¯¢æ­£å¸¸&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">mysql&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">my_city&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">where&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">city&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">â€™æ¸©å·â€™&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="err">â€”&lt;/span>&lt;span class="o">-+&lt;/span>&lt;span class="err">â€”â€”&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">city&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="err">â€”&lt;/span>&lt;span class="o">-+&lt;/span>&lt;span class="err">â€”â€”&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">æ¸©å·&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="err">â€”&lt;/span>&lt;span class="o">-+&lt;/span>&lt;span class="err">â€”â€”&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">row&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">in&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">set&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sec&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ’åºéƒ¨åˆ†æ­£å¸¸&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">mysql&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">my_city&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">order&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">by&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">city&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">asc&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="err">â€”&lt;/span>&lt;span class="o">-+&lt;/span>&lt;span class="err">â€”â€”&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">city&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="err">â€”&lt;/span>&lt;span class="o">-+&lt;/span>&lt;span class="err">â€”â€”&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">å®‰å¾½&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">åŒ—äº¬&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">ä¸Šæµ·&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">æ¸©å·&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">æ¢§å·&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">è¥¿å®‰&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="err">é‡åº†&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="err">â€”&lt;/span>&lt;span class="o">-+&lt;/span>&lt;span class="err">â€”â€”&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">rows&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">in&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">set&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sec&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¦å½»åº•è§£å†³è¿˜æ˜¯è¦æ•´ä¸ªè½¬æ¢ä¸ºgbk ,Â  å½“ç„¶utf-8 ä¼šæ›´å¥½ä¸€ç‚¹.&lt;/p></description></item><item><title>å…³äºå¼‚æ­¥çš„ä¸€ç‚¹ç‚¹å…¶ä»–ä¸œè¥¿</title><link>https://hitian.info/post/a-little-things-about-asynchronous/</link><pubDate>Thu, 09 Feb 2012 00:00:00 +0000</pubDate><guid>https://hitian.info/post/a-little-things-about-asynchronous/</guid><description>&lt;p>å½“ä¸€ä¸ªç½‘é¡µåŒ…å«å¤§é‡çš„å†…å®¹, è€Œåªæœ‰å…¶ä¸­çš„ä¸€å°éƒ¨åˆ†éœ€è¦æ˜¯åŠ¨æ€å†…å®¹(æ˜¾ç¤ºç”¨æˆ·å, ç§¯åˆ†ç­‰)æ—¶, é€šå¸¸æ•´ä¸ªé¡µé¢é‡‡ç”¨htmlé™æ€é¡µé¢, å¹¶ä½¿ç”¨jsæ¥åŠ è½½å’Œæ”¹å˜åŠ¨æ€çš„éƒ¨åˆ†.&lt;/p>
&lt;p>ä½†æ˜¯åƒè¿™æ ·, å¦‚æœjsåŠ è½½é€Ÿåº¦å¾ˆæ…¢çš„è¯, ä¼šå¯¼è‡´ä¹‹ä¸‹çš„é¡µé¢åœæ­¢æ¸²æŸ“&amp;hellip;&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>demo6-1&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>content...&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;text/javascript&amp;#34;&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;get_something_api.php&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>content...&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>äºæ˜¯æˆ‘ä»¬å°†jså†™åœ¨é¡µé¢ä¸‹é¢, ç­‰é¡µé¢æ¸²æŸ“çš„å·®ä¸å¤šäº†å†åŠ è½½å®ƒ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>demo6-1&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>content...&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>content...&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">p&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;demo6.html&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>demo6.html&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;demo6-2.html&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>demo6-2.html&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span> |
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;demo6-3.html&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>demo6-3.html&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">img&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;27218b6e.jpg&amp;#34;&lt;/span> &lt;span class="na">width&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;1920&amp;#34;&lt;/span> &lt;span class="na">height&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;1200&amp;#34;&lt;/span> &lt;span class="na">border&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;0&amp;#34;&lt;/span> &lt;span class="na">alt&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;text/javascript&amp;#34;&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;get_something_api.php&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>çœ‹èµ·æ¥æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„è§£å†³æ–¹æ¡ˆ, ä½†æ˜¯æ–°çš„é—®é¢˜å‡ºç°äº†.&lt;/p>
&lt;p>å½“ç”±äºç½‘ç»œæˆ–è€…ç¨‹åºæ‰§è¡Œæ•ˆç‡çš„é—®é¢˜jsçš„é€Ÿåº¦å¾ˆæ…¢çš„æ—¶å€™, ç­‰å¾…jsåŠ è½½è¿‡ç¨‹ä¸­, é¡µé¢æ˜¯å¯ä»¥æ­£å¸¸æ“ä½œçš„, ä½†æ˜¯ä¸€æ—¦æ“ä½œæœ‰åŒä¸€æœåŠ¡å™¨ä¸Šä¸åŒèµ„æºçš„è¯·æ±‚æ—¶, è¿™ä¸ªè¯·æ±‚å°±å®Œå…¨å¡ä½äº†, ä¾‹å¦‚ç‚¹å‡»é¡µé¢ä¸Šçš„é“¾æ¥.Â  åŒä¸€æœåŠ¡å™¨ä¸‹èµ„æºå¹¶ä¸èƒ½å¾ˆå¥½çš„å¤šçº¿ç¨‹åŒæ—¶è¯·æ±‚.&lt;/p>
&lt;p>æœ¬åœ°ç”¨sleepæ¨¡æ‹Ÿä¸€ä¸ªéœ€è¦é•¿æ—¶é—´æ‰èƒ½å®Œæˆçš„å“åº”.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;?&lt;/span>&lt;span class="nx">php&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//do something and need some times
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">header&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Content-Type:application/x-javascript&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sleep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">echo&lt;/span> &lt;span class="s2">&amp;#34;alert(&amp;#39;results&amp;#39;);&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">?&amp;gt;&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åœ¨å¯¹get_something_api.php çš„è¯·æ±‚è¿‡ç¨‹ä¸­, ç‚¹å‡»é¡µé¢å†…åŒåŸŸåä¸‹çš„é“¾æ¥, è€Œè·³è½¬åœ¨jsåŠ è½½å®Œæˆåæ‰ä¼šæ‰§è¡Œ. ä¸€èˆ¬è¾“å‡ºjså¯èƒ½ä¸ä¼šæ‰§è¡Œå¤ªä¹…, ä½†æ˜¯å½“ä½¿ç”¨é•¿è¿æ¥è¿›è¡Œä¸€äº›é¡µé¢ä¿¡æ¯çš„å®æ—¶æ¨é€æ—¶, è¿™ä¸ªé—®é¢˜ä¼šå¾ˆå¤§.&lt;/p>
&lt;p>è§£å†³æ–¹æ¡ˆå°±æ˜¯å°†get_something_api.php æ”¾åˆ°ä¸åŒçš„åŸŸåä¸‹å», å³ä½¿ä¸¤ä¸ªåŸŸåæŒ‡çš„æ˜¯åŒä¸€ä¸ªè™šæ‹Ÿä¸»æœº, ä¹Ÿå¯ä»¥è®©èµ„æºå¹¶è¡Œçš„åŠ è½½.&lt;/p></description></item><item><title>æˆ‘è‡ªå·±çš„å¹´åº¦æ€»ç»“(2011)</title><link>https://hitian.info/post/annual-summary-2011/</link><pubDate>Fri, 30 Dec 2011 00:00:00 +0000</pubDate><guid>https://hitian.info/post/annual-summary-2011/</guid><description>&lt;p>2010å¹´11æœˆ15æ—¥æ¥ä¸Šæµ·çš„,Â Â  å·²ç»ä¸€å¹´å¤šäº†, åœ¨è¿™ä¸€å¹´å¿™ç¢Œçš„å·¥ä½œä¸­æˆé•¿äº†ä¸å°‘ï¼Œå¾—åˆ°äº†å¾ˆå¤š, ä¹Ÿå¤±å»äº†å¾ˆå¤šã€‚
è¿™ä¸€å¹´ä¸­ï¼Œå·¥ä½œä¸Šå€’æ˜¯å‚ä¸äº†ä¸å°‘é¡¹ç›®çš„å¼€å‘ï¼Œå­¦ä¹ åˆ°äº†å¾ˆå¤š, ç„¶åå°±æ˜¯è¿™ç§å„æ ·çš„æ— å¥ˆ.&lt;/p>
&lt;p>1.é¦–é¡µä¸ªæ€§è®¾ç½®çš„å‰ç«¯å¼€å‘ï¼š è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡ä½¿ç”¨jså¼€å‘äº†ä¸€ä¸ªè¾ƒå¤æ‚çš„å®Œæ•´åŠŸèƒ½æ¨¡å—ï¼Œ ä¹Ÿæ˜¯è¿›å…¬å¸ä¹‹åå®Œæˆçš„ç¬¬äºŒä¸ªæ¯”è¾ƒå¤§çš„é¡¹ç›®ï¼Œå¼€å‘å’Œæµ‹è¯•ä¿®æ”¹å†æ—¶ä¸€ä¸ªå¤šæœˆï¼Œç”±äºä¸ç†Ÿæ‚‰å¼€å‘æµç¨‹ï¼Œ éœ€æ±‚ä¸€å†æ›´æ”¹ï¼Œå¼€å‘å‘¨æœŸä¹Ÿè¢«è¿«å»¶é•¿ï¼Œ ç®—æ˜¯ä¸€ä¸ªæ•™è®­å§ã€‚ ä¸è¿‡jsåŠŸåŠ›å¤§å¹…å¢é•¿ï¼Œç‰¹åˆ«æ˜¯æµè§ˆå™¨å…¼å®¹æ€§å’Œæµè§ˆå™¨æœ¬åœ°å­˜å‚¨ç§¯ç´¯äº†ä¸å°‘å®ç”¨ç»éªŒã€‚&lt;/p>
&lt;p>2.ç§»åŠ¨å¯¼èˆªç¬¬äºŒç‰ˆçš„å‰å°å¼€å‘ï¼š ç”±äºæ˜¯ä¸€ä¸ªè§¦å±æ‰‹æœºç‰ˆçš„ç½‘ç«™ï¼Œå¯ä»¥ä½¿ç”¨ä¸€äº›å‰æ²¿çš„æŠ€æœ¯ï¼Œ è®©æˆ‘æœ‰å¹¸æ¥è§¦åˆ°äº†html5ï¼Œè¿˜æœ‰å¼ºå¤§çš„jquery-mobileæ¡†æ¶ã€‚æ¯•ç«Ÿæ˜¯æ–°æ¥è§¦çš„ä¸œè¥¿ï¼Œ ç”±äºå‰æœŸçš„æ¡†æ¶å­¦ä¹ å’Œå¯è¡Œæ€§åˆ†æä¸å¤Ÿå¯¼è‡´äº†å¼€å‘ä¸­é‡åˆ°äº†å¾ˆå¤šæ£˜æ‰‹çš„é—®é¢˜ï¼Œè®©æˆ‘å……åˆ†äº†è§£äº†æ–°æŠ€æœ¯åº”ç”¨å¯èƒ½ç»™é¡¹ç›®å¸¦æ¥çš„é£é™©ï¼Œä¸è¿‡è¿˜å¥½é¡¹ç›®é¡ºåˆ©å®Œå·¥å¹¶ä¸Šçº¿ã€‚&lt;/p>
&lt;p>3.ç½‘å€å¯¼èˆªé«˜çº§ç‰ˆå¼€å‘ï¼š å®Œæ•´å‚ä¸äº†å‰æœŸçš„éœ€æ±‚å’Œå¼€å‘å’Œç»´æŠ¤ï¼Œå¸å–å‰å‡ æ¬¡çš„æ•™è®­ï¼Œåœ¨é¡¹ç›®å‰æœŸåšäº†å¤§é‡çš„æŠ€æœ¯æµ‹è¯•ï¼Œ åŒ…æ‹¬éœ€è¦ç”¨åˆ°çš„jsæ‹–åŠ¨æ¡†æ¶ï¼Œ æœ¬åœ°å­˜å‚¨ï¼Œ ä»¥åŠç¼“å­˜æŠ€æœ¯ï¼Œ ä½†æ˜¯å¯¹å¼€å‘å‘¨æœŸçš„ç›²ç›®ä¹è§‚å¯¼è‡´åˆ°æœ€åä¸å¾—ä¸åŠ ç­åŠ ç‚¹æ‰èƒ½æŒ‰æ—¶å®Œæˆé¡¹ç›®ï¼Œè¿˜æœ‰æœªæ•´ç†è¯¦ç»†çš„å¼€å‘æ–‡æ¡£å¯¼è‡´åé¢çš„ç»´æŠ¤é‡åˆ°äº†å¾ˆå¤šé—®é¢˜ã€‚è¿™ä¸ªé¡¹ç›®æ¶‰åŠä»å‰å°jsä¸€ç›´åˆ°åå°æ•°æ®åº“è®¾è®¡çš„ä¸€æ•´å¥—çš„ä¸œè¥¿ï¼Œç§¯ç´¯äº†å¾ˆå¤šç½‘ç«™æ€§èƒ½æ–¹é¢çš„çŸ¥è¯†ï¼Œä¹Ÿè®©æˆ‘æ˜ç™½äº†ç‰µå¤´åšä¸€ä¸ªé¡¹ç›®æœ‰å¤šä¹ˆä¸å®¹æ˜“ã€‚&lt;/p>
&lt;p>4.ç§¯åˆ†ç³»ç»Ÿç»´æŠ¤ï¼šååŠå¹´æ­£å¼å¼€å§‹ä¸“èŒç»´æŠ¤ç§¯åˆ†ç³»ç»Ÿï¼Œå¯¹æˆ‘æ¥è¯´è¿™æ˜¯ä¸€ä¸ªæ–°çš„æŒ‘æˆ˜ï¼Œä¹‹å‰ä»æ¥æ²¡æœ‰æ¥è§¦è¿‡è¿™ä¹ˆå¤§é‡çš„æ•°æ®éœ€è¦è¿ç®—ã€å­˜å‚¨ï¼Œéœ€è¦å…³å¿ƒçš„ä¸åªæ˜¯åŠŸèƒ½èƒ½ä¸èƒ½å®ç°ï¼Œæ•°æ®é‡å¤§äº†ä¹‹åï¼Œ æ€§èƒ½çš„é‡è¦æ€§è¶Šæ¥è¶Šçªå‡ºï¼Œå¯èƒ½åªæ˜¯å¾ˆå°çš„æ”¹åŠ¨éƒ½å¯ä»¥è®©è¿ç®—æ—¶é—´å¤§å¹…å‡å°ï¼Œå½“ç„¶ä¹Ÿå¿…é¡»éå¸¸å°å¿ƒï¼Œå› ä¸ºä»»ä½•çš„å°å¤±è¯¯éƒ½å¯èƒ½å¯¼è‡´ä¸¥é‡çš„é—®é¢˜ã€‚&lt;/p>
&lt;p>æµæ°´å¸å†™å®Œäº†, ç„¶åå°±æ˜¯ä¸€äº›æ„Ÿå—å’Œåæ§½:&lt;/p>
&lt;p>1.æ¯•ç«Ÿæ˜¯ç¬¬ä¸€ä»½æ­£å¼çš„å·¥ä½œ, æˆ‘ä¸çŸ¥é“100å¤šäººçš„å…¬å¸ç®—å¤§è¿˜æ˜¯å°,Â  ä¸è¿‡å¿«é€Ÿå‘å±•å¯¼è‡´ç®¡ç†è·Ÿä¸ä¸Šç¡®å®æ˜¯ä¸€ä»¶ä¸¥é‡çš„äº‹æƒ….&lt;/p>
&lt;p>2.é«˜å±‚çš„ç›®æ ‡æ˜¯å®ä¼Ÿçš„, ä¸­å±‚åªæƒ³å°½å¿«æœ‰ä¸šç»©, ä½œä¸ºåº•å±‚å‘˜å·¥å°±åªæ˜¯æ— å¥ˆ.&lt;/p>
&lt;p>3.æˆ‘ä»¬ç”¨ä¸€æˆä¸å˜çš„æŠ€æœ¯æ¥åº”å¯¹äº§å“ç­–åˆ’æ—¥ç›Šæ›´æ–°çš„éœ€æ±‚, è¿™æ ·çœŸä¼šæ­»äººçš„.&lt;/p>
&lt;p>4.åˆæœŸèµ¶è¿›åº¦å¯¼è‡´çš„è€ƒè™‘å’Œè®¾è®¡ä¸è¶³å°†åœ¨ä¸€æ®µæ—¶é—´åå¤§è§„æ¨¡æ‰©å¤§.&lt;/p>
&lt;p>5.å¦‚æœæ‰€æœ‰äº§å“ç­–åˆ’æœªç»ä»»ä½•å®¡æ ¸çš„æƒ³æ³•éƒ½æäº¤ç»™å¼€å‘äººå‘˜å¿…é¡»å®ç°, æ²¡æœ‰è§„åˆ’,æ²¡æœ‰é•¿è¿œçš„è€ƒè™‘, ç”šè‡³éš”å‡ å¤©å°±è¦æ”¹æ•°æ®ç»“æ„, æ”¹ä¸šåŠ¡é€»è¾‘, é‚£ä¹ˆç³»ç»Ÿå´©æºƒæ˜¯è¿Ÿæ—©çš„äº‹, è¿™ç»å¯¹ä¸æ˜¯å±è¨€è€¸å¬.&lt;/p>
&lt;p>6.å°çš„é€»è¾‘é”™è¯¯è‡ªå·±æ˜¯å¾ˆéš¾å‘ç°çš„, è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ä»£ç å®¡æŸ¥æœºåˆ¶å’Œä¸“ä¸šçš„æµ‹è¯•äººå‘˜.&lt;/p>
&lt;p>7.æ²¡æœ‰è§„èŒƒçš„ä»£ç ã€æ¶æ„ã€ æ³¨é‡Šæ˜¯å¾ˆå¯æ€•çš„ï¼Œç­‰åˆ°å¼€å§‹ç»´æŠ¤çš„æ—¶å€™å°±çŸ¥é“äº†ã€‚&lt;/p>
&lt;p>8.åˆ°ä¸€å®šè§„æ¨¡æ—¶ï¼Œå†…éƒ¨è‡ªå·±è¿›è¡Œä¸€äº›ç ”å‘æ˜¯å¿…è¦çš„ï¼ŒæŠŠåˆ«äººçš„æœ€å¥½çš„ä¸œè¥¿å †èµ·æ¥ä¸ä¸€å®šæ˜¯é€‚åˆè‡ªå·±çš„æœ€ä¼˜è§£ å°±å†™è¿™ä¹ˆå¤šäº†ã€‚ã€‚ã€‚&lt;/p>
&lt;p>æ™šå®‰ 2011-12-30&lt;/p></description></item><item><title>chrome æœ€æ–°ç‰ˆä¸‹è½½åœ°å€(win)</title><link>https://hitian.info/post/chrome-installer-downloads-for-win/</link><pubDate>Wed, 28 Dec 2011 00:00:00 +0000</pubDate><guid>https://hitian.info/post/chrome-installer-downloads-for-win/</guid><description>&lt;p>åœ¨çº¿å®‰è£…:Â &lt;/p>
&lt;p>&lt;a class="link" href="http://www.google.com/chrome/eula.html?hl=zh-CN" target="_blank" rel="noopener"
>ç¨³å®šç‰ˆ&lt;/a>Â Â &lt;/p>
&lt;p>&lt;a class="link" href="http://www.google.com/chrome/eula.html?hl=zh-CN&amp;amp;extra=betachannel" target="_blank" rel="noopener"
>æµ‹è¯•ç‰ˆ&lt;/a>Â Â &lt;/p>
&lt;p>&lt;a class="link" href="http://www.google.com/chrome/eula.html?hl=zh-CN&amp;amp;extra=devchannel" target="_blank" rel="noopener"
>å¼€å‘ç‰ˆ&lt;/a>Â &lt;/p>
&lt;p>&lt;a class="link" href="http://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?path=Win/&amp;amp;sort=desc" target="_blank" rel="noopener"
>chromium&lt;/a>&lt;/p>
&lt;p>Â &lt;/p>
&lt;p>ç¦»çº¿å®‰è£…åŒ…:Â &lt;/p>
&lt;p>&lt;a class="link" href="http://www.google.com/chrome/eula.html?hl=zh-CN&amp;amp;standalone=1" target="_blank" rel="noopener"
>ç¨³å®šç‰ˆ&lt;/a>Â &lt;/p>
&lt;p>&lt;a class="link" href="http://www.google.com/chrome/eula.html?hl=zh-CN&amp;amp;standalone=1&amp;amp;extra=betachannel" target="_blank" rel="noopener"
>æµ‹è¯•ç‰ˆ&lt;/a>Â &lt;/p>
&lt;p>&lt;a class="link" href="http://www.google.com/chrome/eula.html?hl=zh-CN&amp;amp;standalone=1&amp;amp;extra=devchannel" target="_blank" rel="noopener"
>å¼€å‘ç‰ˆ&lt;/a>&lt;/p></description></item><item><title>php æ–‡ä»¶ä¸‹è½½ header è®¾ç½®</title><link>https://hitian.info/post/php-file-download-set-header/</link><pubDate>Tue, 20 Dec 2011 00:00:00 +0000</pubDate><guid>https://hitian.info/post/php-file-download-set-header/</guid><description>&lt;p>è¯»å–æ–‡ä»¶, å¼ºåˆ¶æµè§ˆå™¨è¿›è¡Œä¸‹è½½&lt;/p>
&lt;p>&lt;code>Content-Encoding: none&lt;/code>&lt;/p>
&lt;p>æ²¡æœ‰çš„è¯ è¿…é›·7ä¼šè‡ªåŠ¨åŠ ä¸Šæ‰©å±•å.gzip&lt;/p>
&lt;p>Content-type&lt;/p>
&lt;p>æˆ‘è¦ä¸‹è½½çš„æ˜¯.exeæ–‡ä»¶, æ‰€ä»¥è®¾ç½®ä¸º&lt;code>application/octet-stream&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;?&lt;/span>&lt;span class="nx">php&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">ob_end_clean&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">header&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;HTTP/1.1 200 OK&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">header&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Cache-control: max-age=31536000&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">header&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Content-Encoding: none&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">header&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Content-type:application/octet-stream&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">header&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Content-Disposition: attachment; filename=&amp;#39;&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="nv">$file_name&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">header&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Content-Length: &amp;#39;&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="nx">filesize&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$file_path&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// æ‰“å¼€æ–‡ä»¶(äºŒè¿›åˆ¶åªè¯»æ¨¡å¼)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nv">$fp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">fopen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$file_path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;rb&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è¾“å‡ºæ–‡ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">fpassthru&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$fp&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// å…³é—­æ–‡ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">fclose&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$fp&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>å…³äº(13) phpmyadmin Permission denied</title><link>https://hitian.info/post/permission-denied-access-to-phpmyadmin/</link><pubDate>Tue, 13 Dec 2011 00:00:00 +0000</pubDate><guid>https://hitian.info/post/permission-denied-access-to-phpmyadmin/</guid><description>&lt;p>centos5.4 é…ç½®å®Œapache+php+mysql ç¯å¢ƒåå‡ºç°äº†ä¸€ä¸ªå¾ˆæ£˜æ‰‹çš„é—®é¢˜&lt;/p>
&lt;p>ä½¿ç”¨ Alias /phpmyadmin &amp;ldquo;/var/www/html/phpmyadmin/&amp;rdquo;&lt;/p>
&lt;p>ä¹‹åè®¿é—® http://localhost/phpmyadmin/index.php ä¸€ç›´å‡º403&lt;/p>
&lt;p>/var/www/html/phpmyadmin/Â  ç›®å½•çš„owner æ”¹ä¸ºapache&lt;/p>
&lt;p>å¹¶ç»™äº†æ•´ä¸ªç›®å½•755çš„æƒé™&lt;/p>
&lt;p>åœ¨è®¿é—®çš„æ—¶å€™ä»ç„¶å‡ºç°äº†403&lt;/p>
&lt;p>è§£å†³æ–¹æ¡ˆ:&lt;/p>
&lt;p>&lt;code>#chcon -R -h -t httpd_sys_content_tÂ  /var/www/html/phpmyadmin/&lt;/code>&lt;/p>
&lt;p>æœ¬æ¥ä¸€ç›´ä½¿ç”¨ubuntu server çš„, æ²¡æœ‰ç”¨è¿‡centos, ä¸ºäº†æ˜å¤©çš„è€ƒæ ¸ä¸å¾—ä¸è¯•äº†ä¸‹centos , ç»“æœå°±å‡ºç°è¿™æ ·çº ç»“çš„é—®é¢˜, ç¿»äº†å¥½ä¹…çš„è‹±æ–‡ç½‘é¡µæ‰æ‰¾åˆ°è§£å†³åŠæ³•, æ„Ÿè°¢google&amp;hellip;&lt;/p></description></item><item><title>win7å®‰è£…å®Œæˆåå°†ç¡¬ç›˜ä»ATAæ¨¡å¼åˆ‡æ¢åˆ°AHCI</title><link>https://hitian.info/post/win7-hd-ata-to-ahci/</link><pubDate>Sat, 03 Dec 2011 00:00:00 +0000</pubDate><guid>https://hitian.info/post/win7-hd-ata-to-ahci/</guid><description>&lt;p>ahciæ¨¡å¼åŒ…å«äº†ncqç­‰é«˜çº§æ¨¡å¼, å¯ä»¥æé«˜ç¡¬ç›˜çš„æ€§èƒ½, è€Œä¸”win7å†…ç½®äº†é©±åŠ¨, ä¸å¿…æ‹…å¿ƒåƒxpä¼šè“å±.&lt;/p>
&lt;p>ä½†æ˜¯å¦‚æœæ˜¯åœ¨ataæ¨¡å¼ä¸‹å®‰è£…å®Œæˆçš„win7, å†ä¿®æ”¹bios åˆ‡æ¢åˆ°ahciæ¨¡å¼è¿˜æ˜¯ä¼šå¯¼è‡´é‡æ–°å¯åŠ¨æ—¶è“å±.&lt;/p>
&lt;p>è§£å†³:&lt;/p>
&lt;p>åœ¨ataæ¨¡å¼ä¸‹è¿›å…¥ç³»ç»Ÿ&lt;/p>
&lt;p>æ‰“å¼€æ³¨å†Œè¡¨ç¼–è¾‘å™¨&lt;/p>
&lt;p>ä¿®æ”¹ &lt;code>HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\Msahci&lt;/code> ä¸­ Start çš„å€¼ä¸º0&lt;/p>
&lt;p>é‡å¯ç”µè„‘ è¿›bios åˆ‡æ¢åˆ°ahciæ¨¡å¼&lt;/p>
&lt;p>å¯åŠ¨ç³»ç»Ÿ&lt;/p>
&lt;p>è¿›å…¥æ¡Œé¢åä¼šæ˜¾ç¤ºæœ‰é©±åŠ¨æ­£åœ¨å®‰è£….&lt;/p>
&lt;p>å†æ‰‹åŠ¨ä¸‹è½½å®‰è£…ä¸€ä¸‹intelçš„å¿«é€Ÿå­˜å‚¨æŠ€æœ¯é©±åŠ¨å°±å¥½äº†&amp;hellip;&lt;/p></description></item><item><title>mysqlè¡¨é”å®šä¸­ä¸æ”¯æŒæ¸…ç©ºæ“ä½œ?</title><link>https://hitian.info/post/mysql-table-lock/</link><pubDate>Thu, 01 Dec 2011 00:00:00 +0000</pubDate><guid>https://hitian.info/post/mysql-table-lock/</guid><description>&lt;p>å¶ç„¶å‘ç°è¿™ä¸ªé—®é¢˜&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">mysql&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">lock&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">table&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">test_my&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">write&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Query&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">OK&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">rows&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">affected&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sec&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">mysql&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">test_my&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Empty&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">set&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sec&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">mysql&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">insert&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">into&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">test_my&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">values&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="no">null&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Query&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">OK&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">row&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">affected&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sec&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">mysql&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">test_my&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="err">â€”&lt;/span>&lt;span class="o">-+&lt;/span>&lt;span class="err">â€”â€”&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="err">â€”â€”â€“&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">pid&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">enable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="err">â€”&lt;/span>&lt;span class="o">-+&lt;/span>&lt;span class="err">â€”â€”&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="err">â€”â€”â€“&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="err">â€”&lt;/span>&lt;span class="o">-+&lt;/span>&lt;span class="err">â€”â€”&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="err">â€”â€”â€“&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">row&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">in&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">set&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sec&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">mysql&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">truncate&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">table&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">test_my&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">ERROR&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1192&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">HY000&lt;/span>&lt;span class="p">):&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Can&lt;/span>&lt;span class="s1">&amp;#39;t execute the given command because you have active lock
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">ed tables or an active transaction
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>TRUNCATE TABLE was not allowed under LOCK TABLES.&lt;/code>&lt;/p>
&lt;p>è¡¨é”ä¸­ä¸å¯ä»¥ä½¿ç”¨æ¸…ç©ºæ“ä½œ, è¿™ä¸ªè®©æˆ‘å¾ˆéƒé—·.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">mysql&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">delete&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">test_my&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Query&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">OK&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">row&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">affected&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sec&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">mysql&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">alter&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">table&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">test_my&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kp">auto_increment&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Query&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">OK&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">rows&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">affected&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">05&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sec&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Records&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Duplicates&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Warnings&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">mysql&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">test_my&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Empty&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">set&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sec&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">mysql&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">insert&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">into&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">test_my&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">values&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="no">null&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">99&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">Query&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">OK&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">row&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nf">affected&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sec&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">mysql&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">select&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">from&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">test_my&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="err">â€”&lt;/span>&lt;span class="o">-+&lt;/span>&lt;span class="err">â€”â€”&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="err">â€”â€”â€“&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">pid&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">enable&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="err">â€”&lt;/span>&lt;span class="o">-+&lt;/span>&lt;span class="err">â€”â€”&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="err">â€”â€”â€“&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">99&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="err">â€”&lt;/span>&lt;span class="o">-+&lt;/span>&lt;span class="err">â€”â€”&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="err">â€”â€”â€“&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">row&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">in&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kt">set&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mi">00&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sec&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">mysql&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åˆ†å¸ƒæ“ä½œ: å…ˆåˆ é™¤æ‰€æœ‰æ•°æ®, ç„¶åé‡æ–°è®¾ç½®è‡ªå¢é•¿çš„èµ·å§‹ç‚¹å´å¯ä»¥.&lt;/p></description></item><item><title>thinkpad ubuntu 11.10 æš‚æ—¶ç¦ç”¨è§¦æ§æ¿</title><link>https://hitian.info/post/thinkpad-ubuntu-disable-touchpad/</link><pubDate>Sun, 27 Nov 2011 00:00:00 +0000</pubDate><guid>https://hitian.info/post/thinkpad-ubuntu-disable-touchpad/</guid><description>&lt;p>æ‰“å­—çš„æ—¶å€™ç»å¸¸ç¢°åˆ°è§¦æ§æ¿å¾ˆéƒé—·, åœ¨ä½¿ç”¨usbé¼ æ ‡çš„æ—¶å€™å¯ä»¥æš‚æ—¶ç¦ç”¨è§¦æ§æ¿å’Œå°çº¢ç‚¹&lt;/p>
&lt;p>&lt;code>sudo modprobe -r psmouse&lt;/code>&lt;/p>
&lt;p>é‡æ–°å¯ç”¨&lt;/p>
&lt;p>&lt;code>sudo modprobe -i psmouse&lt;/code>&lt;/p></description></item><item><title>è§£å†³ie6 æ¶å¿ƒçš„åŠ¨æ€gifå›¾ç‰‡é—®é¢˜</title><link>https://hitian.info/post/ie6-gif-bug/</link><pubDate>Fri, 25 Nov 2011 00:00:00 +0000</pubDate><guid>https://hitian.info/post/ie6-gif-bug/</guid><description>&lt;p>å°†æ”¹å˜imgæ ‡ç­¾çš„srcçš„äº‹ä»¶è§¦å‘å†™åœ¨aæ ‡è®°çš„onclické‡Œé¢ åœ¨ie6ä¸‹ä¼šå¯¼è‡´åˆ‡æ¢åæ–°çš„å›¾ç‰‡æ— æ³•åŠ è½½.&lt;/p>
&lt;p>ä»Šå¤©åˆå‘ç°äº†å¦ä¸€ä¸ªæ¶å¿ƒçš„é—®é¢˜&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">img&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;/images/pic1.gif&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">img&lt;/span> &lt;span class="na">src&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;/images/pic2.gif&amp;#34;&lt;/span> &lt;span class="na">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;display:none&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">a&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;javascript:;&amp;#34;&lt;/span> &lt;span class="na">onclick&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;chenge_pic();&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>åˆ‡æ¢å›¾ç‰‡&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">a&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åƒè¿™æ ·, å¦‚æœpic2.gif æ˜¯ä¸€ä¸ªåŠ¨æ€çš„å›¾ç‰‡, å½“ç‚¹å‡»aæ ‡ç­¾åˆ‡æ¢å›¾ç‰‡åˆ°pic2.gid æ—¶, å®é™…çœ‹åˆ°çš„pic2.gif æ˜¯ä¸ä¼šåŠ¨çš„.&lt;/p>
&lt;p>ç›´æ¥å°†ç¬¬ä¸€ä¸ªæ ‡ç­¾çš„src æ”¹æˆpic2.gif å›¾ç‰‡ä¹Ÿæ˜¯ä¸ä¼šåŠ¨çš„.&lt;/p>
&lt;p>å’Œä¹‹å‰çš„è§£å†³æ–¹æ¡ˆä¸€æ ·, å°†aæ ‡è®°æ¢æˆ &lt;code>&amp;lt;input type=&amp;quot;button&amp;quot;Â  /&amp;gt;&lt;/code> å°±å¥½äº†.æ¶å¿ƒçš„ie6, å¤©å¤©ç”»åœˆåœˆè¯…å’’å®ƒå¿«ç‚¹æ¶ˆå¤±&amp;hellip;.&lt;/p></description></item><item><title>ä½¿ç”¨ç±»ä¼¼äºå¥–æ± æ–¹å¼çš„æŠ½å¥–æ¨¡æ‹Ÿ</title><link>https://hitian.info/post/lottery-simulation/</link><pubDate>Wed, 23 Nov 2011 00:00:00 +0000</pubDate><guid>https://hitian.info/post/lottery-simulation/</guid><description>&lt;p>ä¸€èˆ¬æ¥è¯´è¦åšä¸€ä¸ªæŠ½å¥–ç¨‹åºä¼šç«‹å³æƒ³åˆ°ç”¨éšæœºæ•°. ä½†æ˜¯é€šå¸¸æƒ…å†µä¸‹éšæœºæ•°ä¹Ÿä¸æ˜¯é‚£ä¹ˆçš„éšæœº, æ•°é‡æ¯”è¾ƒå¤§çš„æ—¶å€™æ‰èƒ½ä½“ç°å‡ºæ¯”è¾ƒå¹³å‡, æ•°é‡è¾ƒå°çš„æ—¶å€™ä¸­å¥–æ¦‚ç‡çš„å¯æ§æ€§å°†ä¼šå¾ˆå·®. ä¸€ä¸å°å¿ƒå¤šè¢«æŠ½ä¸­å‡ ä¸ªéº»çƒ¦å°±å¤§äº†.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;?&lt;/span>&lt;span class="nx">php&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">class&lt;/span> &lt;span class="nc">T_prize&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="nv">$item&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">var&lt;/span> &lt;span class="nv">$table&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * æŠ½å¥–ä¸»ç¨‹åº å¤–éƒ¨è°ƒç”¨å…¥å£
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * @param unknown_type $db æ•°æ®åº“é“¾æ¥
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * @param unknown_type $id æŠ½å¥–ç±»å‹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">function&lt;/span> &lt;span class="nf">prize&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$db&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$id&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">global&lt;/span> &lt;span class="nv">$prize_set&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="nx">isset&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$prize_set&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">$id&lt;/span>&lt;span class="p">])){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">item&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$prize_set&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">$id&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$table&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;my_prize_store_table_&amp;#39;&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="nv">$id&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//æŠ½å¥–å¹¶å‘è¾ƒå¤§æ—¶å¯ä»¥è¿›è¡Œåˆ†è¡¨, å¤šç”Ÿæˆå‡ ä¸ªå¥–æ± 
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">//$table = &amp;#39;my_prize_store_table_&amp;#39; . $id . &amp;#39;_&amp;#39; . rand(0, 4);
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">table&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$table&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//é˜²æ­¢å¤šä¸ªç”¨æˆ·æŠ½åˆ°åŒä¸€ä¸ªæ¡ç›®, è¿›è¡Œé”è¡¨
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nv">$db&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">query&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;lock table &amp;#34;&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="nv">$table&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="s2">&amp;#34; write&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$pid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">get_one&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$db&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$id&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//å¥–æ± ä¸­æ²¡æœ‰å¥–å“æ—¶é‡æ–°åˆå§‹åŒ–å¥–æ± 
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$pid&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;-1&amp;#39;&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">create_pool&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$db&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$id&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$pid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">get_one&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$db&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$id&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//é‡Šæ”¾é” è¿”å›æŠ½å¥–ç»“æœ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nv">$db&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">query&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;unlock table&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nv">$pid&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * æŠ½å¥–ä¸€æ¬¡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * @param unknown_type $db
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * @param unknown_type $id
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">function&lt;/span> &lt;span class="nf">get_one&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$db&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$id&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$table&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">table&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$sql&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;SELECT * FROM &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">table&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2"> WHERE enable = &amp;#39;1&amp;#39; LIMIT 1&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$row&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$db&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$db&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">query&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$sql&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$success&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$re&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">array&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$row&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$row&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;id&amp;#39;&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$pid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$row&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;pid&amp;#39;&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$update_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">array&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;enable&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$db&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$table&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$update_data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;id=&amp;#39;&lt;/span>&lt;span class="si">$id&lt;/span>&lt;span class="s2">&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$db&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">getAffectedRows&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$result&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$success&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$re&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$row&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">my_log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;æŠ½å¥–æ± æ¡ç›®çŠ¶æ€ä¿®æ”¹å‘ç”Ÿé”™è¯¯ id:&amp;#39;&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="nv">$id&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s1">&amp;#39;-1&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$success&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nv">$pid&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * å¥–å“æ± åˆå§‹åŒ–
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * @param unknown_type $db
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> * @param unknown_type $id
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">function&lt;/span> &lt;span class="nf">create_pool&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$db&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$id&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$table&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">table&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">my_log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;init prize pool id:&amp;#39;&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="nv">$id&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$item&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">item&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$total_num&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$item&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;total&amp;#39;&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$item&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;list&amp;#39;&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$tprize_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">array&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">foreach&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">$list&lt;/span> &lt;span class="k">as&lt;/span> &lt;span class="nv">$key&lt;/span>&lt;span class="o">=&amp;gt;&lt;/span>&lt;span class="nv">$one&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$tnum&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">intval&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$total_num&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nv">$one&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;probability&amp;#39;&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$tnum&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">my_log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;create prize pool create alert: total_num:&amp;#39;&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="nv">$total_num&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="s1">&amp;#39; item_name:&amp;#39;&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="nv">$item&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="s1">&amp;#39; probability:&amp;#39;&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="nv">$item&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;probability&amp;#39;&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">continue&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nv">$i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nv">$i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nv">$tnum&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nv">$i&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">do&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">rand&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$total_num&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>&lt;span class="k">while&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">isset&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$tprize_list&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">$id&lt;/span>&lt;span class="p">]));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$tprize_list&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">$id&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$key&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">my_log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;start&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$db&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">query&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;TRUNCATE &amp;#39;&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="nv">$table&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$insert_str_arr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">array&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$i&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nv">$i&lt;/span>&lt;span class="o">&amp;lt;=&lt;/span>&lt;span class="nv">$total_num&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nv">$i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$this_pid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$inset_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;pid&amp;#39;&lt;/span>&lt;span class="o">=&amp;gt;&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">isset&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$tprize_list&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">$i&lt;/span>&lt;span class="p">])){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$this_pid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$tprize_list&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nv">$i&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//æ¯100æ¡è®°å½•æ’å…¥ä¸€æ¬¡å¯ä»¥å¤§å¹…å‡å°æ•°æ®åº“æ’å…¥æ—¶é—´æ—¶é—´
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nv">$insert_str_arr&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;(&lt;/span>&lt;span class="si">$this_pid&lt;/span>&lt;span class="s2">)&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$i&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mi">100&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$insert_str&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">implode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;,&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$insert_str_arr&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$insert_str&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;insert into &amp;#39;&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="nv">$table&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="s1">&amp;#39;(pid) values&amp;#39;&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="nv">$insert_str&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$db&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">query&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$insert_str&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$insert_str_arr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">array&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">my_log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;end&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//è‡ªå®šä¹‰æ—¥å¿—
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="nf">my_log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$msg&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//write logs here
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä½¿ç”¨å¥–æ± çš„æ¦‚å¿µå¯ä»¥å°†ä¸­å¥–æ¦‚ç‡ä¸¥æ ¼é™åˆ¶ä¸€ä¸‹,Â  ç”Ÿæˆä¸€å®šæ•°é‡çš„æ ¼å­, æŒ‰ç…§æ¦‚ç‡ç®—å‡ºæœ‰å¥–å“çš„æ ¼å­çš„æ•°é‡, ç„¶åå†éšæœºå¡«å……åˆ°æ ¼å­é‡Œå», æ‰§è¡ŒæŠ½å¥–çš„æ—¶å€™ä¸€æ¬¡å»æ‰“å¼€æ ¼å­. è¦ä¹ˆä¸­å¥–,è¦ä¹ˆä¸ä¸­, å½“æ‰€æœ‰æ ¼å­éƒ½è¢«å¼€å¯è¿‡ä¹‹å,Â  å†æ¬¡æ‰§è¡Œåˆå§‹åŒ–é‡æ–°å¡«å……æ‰€æœ‰çš„æ ¼å­.
è®¾ç½®ä¸€ä¸‹éœ€è¦ä½¿ç”¨çš„å¥–å“æ•°æ®å’Œæ¦‚ç‡&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;?&lt;/span>&lt;span class="nx">php&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$prize_set&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">array&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//æŠ½å¥–1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nv">$prize_set&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">array&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;total&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="mi">1000&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;list&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="k">array&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">1&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="k">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;å¥–å“1&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;probability&amp;#39;&lt;/span>&lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;0.01&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;product_id&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">2&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="k">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;å¥–å“2&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;probability&amp;#39;&lt;/span>&lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;0.05&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;product_id&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">3&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="k">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;å¥–å“3&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;probability&amp;#39;&lt;/span>&lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;0.1&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;product_id&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//æŠ½å¥–2
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nv">$prize_set&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">array&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;total&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="mi">1000&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;list&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="k">array&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">1&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="k">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;å¥–å“1&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;probability&amp;#39;&lt;/span>&lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;0.001&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;product_id&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">2&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="k">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;å¥–å“2&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;probability&amp;#39;&lt;/span>&lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;0.005&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;product_id&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">3&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="k">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;å¥–å“3&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;probability&amp;#39;&lt;/span>&lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;0.01&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;product_id&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">4&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="k">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;å¥–å“4&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;probability&amp;#39;&lt;/span>&lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;0.02&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;product_id&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">5&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="k">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;å¥–å“5&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;probability&amp;#39;&lt;/span>&lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;0.05&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;product_id&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">6&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="k">array&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;å¥–å“6&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;probability&amp;#39;&lt;/span>&lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;0.1&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;product_id&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æˆ‘æœ‰ä¸¤ç»„æŠ½å¥–, æ‰€ä»¥å®šä¹‰äº†ä¸¤ç»„.Â  æ³¨æ„, æ¯ç»„çš„æ€»æ•° ä¹˜ä»¥ è¿™ç»„ä¸­æœ€å°çš„ä¸€ä¸ªæ¦‚ç‡ä¸€å®šè¦å¤§äº1,Â  ä¸ç„¶è¿™ä¸ªå¥–å“å°±æ°¸è¿œä¹Ÿæ²¡å¯èƒ½æŠ½ä¸­äº†.&lt;/p>
&lt;p>è¿™ç§æ–¹å¼ä¹Ÿæœ‰ç¼ºç‚¹:&lt;/p>
&lt;p>1.æ¦‚ç‡çš„è°ƒæ•´åªèƒ½åœ¨ä¸‹æ¬¡å¥–æ± åˆå§‹åŒ–æ—¶æ‰èƒ½ç”Ÿæ•ˆ,&lt;/p>
&lt;p>2.ä½¿ç”¨æ•°æ®åº“è¡¨é”æ¥ä¿è¯åŒä¸€ä¸ªæ ¼å­åªèƒ½è¢«ä¸€ä¸ªäººæŠ½ä¸­, ä¼šå¯¼è‡´æ€§èƒ½é™ä½, (æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯myisam, åªèƒ½ä½¿ç”¨è¡¨çº§é”)æ— æ³•æ”¯æŒå¤§é‡çš„å¹¶å‘, æœ‰ä¸ªå¾ˆç¬¨çš„ä½†æœ€ç®€å•çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯å¯¹åŒä¸€ä¸ªæŠ½å¥–ä½¿ç”¨å¤šä¸ªå¥–æ± , å°†è¯·æ±‚åˆ†æ•£åˆ°å„ä¸ªè¡¨å».&lt;/p>
&lt;p>åè®°:è¡¨åœ¨lock çŠ¶æ€ä¸­å®é™…ä¸Šæ˜¯ä¸æ”¯æŒtruncate æ“ä½œçš„, Â å…ˆdelete from table åˆ é™¤æ‰€æœ‰æ•°æ®, å† alter table xxx set auto_increment=1 Â å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜&amp;hellip;&lt;/p></description></item><item><title>é‡è£…ç³»ç»Ÿåæ¢å¤å¼€å‘ç¯å¢ƒ</title><link>https://hitian.info/post/restore-development-environment/</link><pubDate>Tue, 22 Nov 2011 00:00:00 +0000</pubDate><guid>https://hitian.info/post/restore-development-environment/</guid><description>&lt;p>æ¯æ¬¡åšç³»ç»Ÿéƒ½å¾ˆæ„,Â  å› ä¸ºæœ‰ä¸€å¤§å †è½¯ä»¶éœ€è¦é‡æ–°å®‰è£…, å°½ç®¡å°½é‡éƒ½ç”¨ç»¿è‰²çš„è¿˜æ˜¯æœ‰ä¸€å¤§æ¨éœ€è¦å®‰è£…çš„, å°è¯•ç€åˆ—ä¸ªè¡¨, ç®€åŒ–ä¸€ä¸‹æµç¨‹&amp;hellip;&lt;/p>
&lt;h3 id="ä¸ªäººæ–‡ä»¶å¤¹è¿ç§»">ä¸ªäººæ–‡ä»¶å¤¹è¿ç§»&lt;/h3>
&lt;p>å°†ä¸ªäººæ–‡ä»¶å¤¹ä¸­çš„ æˆ‘çš„è§†é¢‘ æˆ‘çš„éŸ³ä¹ æˆ‘çš„å›¾ç‰‡ ç§»åŠ¨åˆ°åŸæ¥éç³»ç»Ÿç›˜çš„ä½ç½®å» (ä¸€ç›´å¾ˆçº³é—·ä¸ºä»€ä¹ˆè¿™äº›éœ€è¦å¤§é‡å ç”¨ç£ç›˜ç©ºé—´çš„ä¸œè¥¿ä¸ä¸€å¼€å§‹å°±æ”¾åœ¨éç³»ç»Ÿç›˜)
Â &lt;/p>
&lt;h3 id="æ¢å¤apacheå’Œphpç¯å¢ƒ-ä¹‹å‰çš„éƒ½è£…åœ¨dç›˜äº†">æ¢å¤apacheå’Œphpç¯å¢ƒ ä¹‹å‰çš„éƒ½è£…åœ¨dç›˜äº†Â &lt;/h3>
&lt;p>ä»¥ç®¡ç†å‘˜è¿è¡Œcmd è¿›å…¥D:\lamp\apache\bin&lt;/p>
&lt;p>&lt;code>httpd.exeÂ  -k install&lt;/code>Â Â  å°†apacheå®‰è£…ä¸ºç³»ç»ŸæœåŠ¡&lt;/p>
&lt;p>&lt;code>httpd.exeÂ  -k start&lt;/code>Â Â Â Â Â  å¯åŠ¨apache&lt;/p>
&lt;p>mysql ä¸€ç›´ä½¿ç”¨çš„è¿œç¨‹çš„, è·³è¿‡&lt;/p>
&lt;p>å°†å¤‡ä»½çš„host æ–‡ä»¶è¦†ç›– é¡ºä¾¿è°ƒæ•´ä¸€ä¸‹ä¿®æ”¹çš„æƒé™&lt;/p>
&lt;p>è¿è¡Œç¯å¢ƒæå®š&lt;/p>
&lt;p>Â &lt;/p>
&lt;h3 id="å®‰è£…firefox-ç„¶åå®‰è£…æ’ä»¶">å®‰è£…firefox ç„¶åå®‰è£…æ’ä»¶&lt;/h3>
&lt;p>firebug;&lt;/p>
&lt;p>firecookie;&lt;/p>
&lt;p>web developer;&lt;/p>
&lt;p>dns flusher;&lt;/p>
&lt;p>advanced cookie manager;&lt;/p>
&lt;p>å†å®‰è£…ä¸€ä¸‹chromeÂ  ä½¿ç”¨googleå¸å·å°†ä¹‹å‰çš„æ’ä»¶éƒ½åŒæ­¥å›æ¥&lt;/p>
&lt;p>ok è°ƒè¯•ç¯å¢ƒä¹Ÿæå®š&lt;/p>
&lt;p>Â &lt;/p>
&lt;h3 id="å®‰è£…-jre--dreamweaver--mysql-workbench-eclipse-pdt-editplus">å®‰è£… jre ;Â  Dreamweaver ; mysql workbench; eclipse pdt; editplus&lt;/h3>
&lt;p>ok å¼€å‘ç¯å¢ƒæå®š&lt;/p></description></item><item><title>ubuntu-server ç‰ˆæœ¬å‡çº§</title><link>https://hitian.info/post/ubuntu-server-upgrade/</link><pubDate>Wed, 09 Nov 2011 00:00:00 +0000</pubDate><guid>https://hitian.info/post/ubuntu-server-upgrade/</guid><description>&lt;p>ä¸€ç›´ä»¥æ¥è™šæ‹Ÿæœºé‡Œæµ‹è¯•ç”¨çš„ubuntu server éƒ½æ˜¯åœ¨å‡ºæ–°ç‰ˆæœ¬åç›´æ¥é‡æ–°å®‰è£…çš„, ä½†æ˜¯ç°åœ¨ä¸œè¥¿å®åœ¨å¤ªå¤šäº†, æ‡’å¾—å†é‡è£…äº†, ç½‘ä¸ŠæŸ¥äº†ä¸€ä¸‹å‡çº§çš„è¿‡ç¨‹ä½œä¸‹è®°å½•:&lt;/p>
&lt;p>å‡çº§ä¹‹å‰é‡è¦çš„é…ç½®æ–‡ä»¶æœ€å¥½å…ˆå¤‡ä»½ä¸€ä¸‹, å¯¹äºæµ‹è¯•æœåŠ¡å™¨, æˆ‘é€‰æ‹©ç›´æ¥è·³è¿‡&lt;/p>
&lt;p>ä¿®æ”¹ä¸€ä¸‹/etc/apt/sources.list æ‰¾ä¸ªå¿«ç‚¹çš„æº, ä¸ç„¶ä¼šå¾ˆéƒé—·çš„. ç½‘æ˜“çš„å°±ä¸é”™ mirrors.163.com&lt;/p>
&lt;p>å¼€å§‹å‡çº§&lt;/p>
&lt;p>&lt;code>$sudo apt-get install update-manager-core&lt;/code>&lt;/p>
&lt;p>æ˜¾ç¤ºå·²ç»å®‰è£…äº†æœ€æ–°ç‰ˆæœ¬&lt;/p>
&lt;p>æ¥ç€&lt;/p>
&lt;p>&lt;code>$sudo do-release-upgrade&lt;/code>&lt;/p>
&lt;p>å› ä¸ºæˆ‘æ˜¯sshä¸Šå»çš„, ç³»ç»Ÿä¼šæç¤ºå¦‚æœå‘ç”Ÿæ„å¤–å¯ä»¥ä½¿ç”¨1022ç«¯å£ç™»å½•ä¸Šå»&lt;/p>
&lt;p>ä¸€è·¯ y&lt;/p>
&lt;p>&lt;a class="link" href="https://hitian.info/assets/images/2011/11/image.png" >&lt;img src="https://hitian.info/assets/images/2011/11/image_thumb.png" alt="image" title="image" />&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://hitian.info/assets/images/2011/11/image1.png" >&lt;img src="https://hitian.info/assets/images/2011/11/image_thumb1.png" alt="image" title="image" />&lt;/a>&lt;/p>
&lt;p>å¯ä»¥çœ‹åˆ°å…¶å®å·²ç»åœ¨getæ–°ç‰ˆæœ¬çš„åŒ…äº†&lt;/p>
&lt;p>æ¥ä¸‹æ¥æ¼«é•¿çš„åŠä¸ªå°æ—¶ç­‰å¾…..zzzZZ&lt;/p>
&lt;p>ç½‘é€Ÿä¸¥é‡ä¸ç»™åŠ›å•Š&lt;/p>
&lt;p>å®‰è£…æ–°çš„, æœ‰ä¸€éƒ¨åˆ†è€çš„ä¼šè¢«åˆ é™¤&lt;/p>
&lt;p>&lt;a class="link" href="https://hitian.info/assets/images/2011/11/image2.png" >&lt;img src="https://hitian.info/assets/images/2011/11/image_thumb2.png" alt="image" title="image" />&lt;/a>&lt;/p>
&lt;p>æ¥ç€è‡ªåŠ¨é‡å¯&lt;/p>
&lt;p>&lt;a class="link" href="https://hitian.info/assets/images/2011/11/image3.png" >&lt;img src="https://hitian.info/assets/images/2011/11/image_thumb3.png" alt="image" title="image" />&lt;/a>&lt;/p>
&lt;p>çœ‹æ¥å‡çº§æˆåŠŸäº†&lt;/p>
&lt;p>&lt;a class="link" href="https://hitian.info/assets/images/2011/11/image4.png" >&lt;img src="https://hitian.info/assets/images/2011/11/image_thumb4.png" alt="image" title="image" />&lt;/a>&lt;/p>
&lt;p>çœ‹æ¥mysqlæ²¡èµ·æ¥, å…¶ä»–éƒ½æ˜¯æ­£å¸¸çš„&lt;/p>
&lt;p>&lt;a class="link" href="https://hitian.info/assets/images/2011/11/image5.png" >&lt;img src="https://hitian.info/assets/images/2011/11/image_thumb5.png" alt="image" title="image" />&lt;/a>&lt;/p>
&lt;p>(å®Œ)&amp;hellip;&lt;/p></description></item><item><title>win7 x64 è¿è¡Œx86çš„zend studio 9.0</title><link>https://hitian.info/post/win7-x64-zend-studio-x86/</link><pubDate>Sat, 05 Nov 2011 00:00:00 +0000</pubDate><guid>https://hitian.info/post/win7-x64-zend-studio-x86/</guid><description>&lt;p>x64çš„win8 å®‰è£…äº†x64 çš„jdk Â å†è¿è¡Œzendstudioæ—¶å°±ä¼šå‡ºé”™&lt;/p>
&lt;p>è§£å†³:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>å†å®‰è£…ä¸€ä¸‹x86 çš„jre&lt;/p>
&lt;/li>
&lt;li>
&lt;p>æ‰“å¼€Â C:\Program Files (x86)\Zend\Zend Studio 9.0.0\ZendStudio.ini&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>æ·»åŠ  -vm&lt;/p>
&lt;p>C:\Program Files (x86)\Java\jre6\bin\javaw.exe&lt;/p>
&lt;pre tabindex="0">&lt;code>-name
Zend Studio
-vm
C:\Program Files (x86)\Java\jre6\bin\javaw.exe
-vmargs
&lt;/code>&lt;/pre></description></item><item><title>gmail åœ¨ ie9ä¸­ä¹±ç‰ˆ</title><link>https://hitian.info/post/gmail-ie9/</link><pubDate>Sat, 22 Oct 2011 00:00:00 +0000</pubDate><guid>https://hitian.info/post/gmail-ie9/</guid><description>&lt;p>åœ¨ie9 ä¸­æ‰“å¼€gmailé¡µé¢å…¨ä¹± å¹¶æç¤ºieä½¿ç”¨äº†å…¼å®¹æ€§è§†å›¾.å¹¶ä¸”ç»™äº†ä¿®å¤æ–¹å¼:&lt;/p>
&lt;p>å³é”®ç‚¹å‡»å³ä¸Šè§’çš„é½¿è½®å›¾æ ‡ã€‚&lt;/p>
&lt;p>é€‰æ‹©å‘½ä»¤æ ã€‚&lt;/p>
&lt;p>æ‰“å¼€æµè§ˆå™¨é¡¶éƒ¨çš„å·¥å…·èœå•ï¼Œç„¶åé€‰æ‹©å…¼å®¹æ€§è§†å›¾è®¾ç½®ã€‚&lt;/p>
&lt;p>åœ¨â€œå·²æ·»åŠ åˆ°å…¼å®¹æ€§è§†å›¾ä¸­çš„ç½‘ç«™â€ä¸‹ï¼Œé€‰æ‹©â€œgoogle.comâ€ã€‚&lt;/p>
&lt;p>ç‚¹å‡»åˆ é™¤ã€‚ä½†æ˜¯åœ¨æˆ‘çš„å·²æ·»åŠ åˆ—è¡¨ä¸­å¹¶æ²¡æœ‰google.com&lt;/p>
&lt;p>è§£å†³æ–¹æ³•å¾ˆç®€å•, æŒ‰&amp;rsquo;F12&amp;rsquo; æ‰“å¼€å¼€å‘äººå‘˜å·¥å…·, åˆ‡æ¢ä¸€ä¸‹æµè§ˆå™¨æ¨¡å¼ç„¶åå…³æ‰å°±å¥½äº†&lt;/p></description></item><item><title>phpæ‰§è¡ŒæœåŠ¡å™¨è„šæœ¬</title><link>https://hitian.info/post/php-exec/</link><pubDate>Thu, 20 Oct 2011 00:00:00 +0000</pubDate><guid>https://hitian.info/post/php-exec/</guid><description>&lt;p>phpæ‰§è¡ŒæœåŠ¡å™¨ä¸Šçš„è„šæœ¬è¿›è¡Œä¸€äº›æ“ä½œä¸æ˜¯ä»€ä¹ˆéš¾äº‹.&lt;/p>
&lt;p>exec system passthru è¿™å‡ ä¸ªå‡½æ•°éƒ½å¯ä»¥è°ƒç”¨å¤–éƒ¨çš„å‘½ä»¤. åªè¦æœ‰æƒé™å°±å®Œå…¨æ²¡æœ‰é—®é¢˜.&lt;/p>
&lt;p>ä¾‹å¦‚&lt;/p>
&lt;p>&lt;code>exec('/home/tian/bin/trytodosomething -h');&lt;/code>&lt;/p>
&lt;p>å‘½ä»¤æ‰§è¡Œåphpä¼šæŒ‚èµ·ç›´åˆ°å‘½ä»¤è¿è¡Œå®Œæ¯•.
æœ‰æ—¶å€™è„šæœ¬è¿è¡Œçš„æ—¶é—´ä¹Ÿè®¸å¾ˆé•¿, æˆ‘ä»¬éœ€è¦è®©phpç»§ç»­æ‰§è¡ŒåŠæ—¶åé¦ˆç»™ç”¨æˆ·æˆ‘ä»¬å·²ç»å¼€å§‹æ“ä½œäº†.&lt;/p>
&lt;pre tabindex="0">&lt;code>$cmd = &amp;#39;/home/tian/bin/trytodosomething -h &amp;gt; /tmp/null &amp;amp;&amp;#39;;
$result = system($cmd);
&lt;/code>&lt;/pre>&lt;p>è¿™æ ·ä¿®æ”¹ä¹‹å, phpå°±ä¼šç»§ç»­æ‰§è¡Œ, ä¸ä¼šç­‰å¾…å‘½ä»¤æ‰§è¡Œå®Œè¿™æ ·ä¹Ÿå­˜åœ¨ä¸€ä¸ªé—®é¢˜, ç”¨æˆ·ä¸æ–­çš„åˆ·æ–°ç½‘é¡µå¯ä»¥èƒ½é€ æˆä¸€äº›éº»çƒ¦, ä½¿ç”¨æ–‡ä»¶é”å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜.&lt;/p></description></item><item><title>intel my wifi æ— æ³•è·å–åˆ°ipçš„è§£å†³</title><link>https://hitian.info/post/intel-my-wifi/</link><pubDate>Wed, 14 Sep 2011 00:00:00 +0000</pubDate><guid>https://hitian.info/post/intel-my-wifi/</guid><description>&lt;p>å¹³æ—¶éƒ½ä½¿ç”¨è„šæœ¬æ¥å…±äº«wifiç»™æ‰‹æœº&lt;/p>
&lt;p>start_wifi.bat&amp;gt;&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bat" data-lang="bat">&lt;span class="line">&lt;span class="cl">netsh wlan set hostednetwork mode=allow ssid=TIANap key=21345678
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">netsh wlan start hostednetwork
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">pause&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä»Šå¤©æ›´æ–°é©±åŠ¨æ—¶å‘ç°äº†intelçš„my wifiä¾¿è¯•äº†ä¸‹, å¯ä»¥å®æ—¶æ˜¾ç¤ºéƒ½æœ‰å“ªäº›è®¾å¤‡ä½¿ç”¨äº†.ä½†æ˜¯æœ‰ä¸ªé—®é¢˜å°±æ˜¯å…¶ä»–è®¾å¤‡ä¸€ç›´ä¸èƒ½æ­£å¸¸è·å–åˆ°ipåœ°å€.&lt;/p>
&lt;p>æ‰“å¼€my wifiåˆ›å»ºçš„æ— çº¿ç½‘ç»œè¿æ¥å±æ€§, å°è¯•ç€å°†é™¤äº†internet åè®®ç‰ˆæœ¬4 ä¹‹å¤–çš„å…¶ä»–é¡¹å…¨å–æ¶ˆäº†å°±å¥½äº†,ä¸çŸ¥é“ä»€ä¹ˆåŸå› å¯¼è‡´çš„.&lt;/p></description></item><item><title>jså¸¸ç”¨æ“ä½œ</title><link>https://hitian.info/post/js-tools/</link><pubDate>Wed, 24 Aug 2011 00:00:00 +0000</pubDate><guid>https://hitian.info/post/js-tools/</guid><description>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * jså¸¸ç”¨æ“ä½œç±»
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">myTools&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">window&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">myTools&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// getElementById
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">g&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// getElementsByTagName
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">t&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementsByTagName&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">writeHTML&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">content&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">target&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">g&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">target&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">target&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">innerHTML&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">content&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦ï¼Œ ä¸­æ–‡ç®—ä¸¤ä¸ªå­—
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">slen&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">str&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">var&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">str&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nx">str&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">charCodeAt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">255&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="nx">c&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è¿˜åŸhtml
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">HtmlToStr&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">vStr&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">vStr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">vStr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sr">/&amp;amp;amp;/g&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;&amp;amp;&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">vStr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">vStr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sr">/&amp;amp;quot;/g&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;&amp;#34;&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">vStr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">vStr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sr">/&amp;amp;#039;/g&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">vStr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">vStr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sr">/&amp;amp;lt;/g&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">vStr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">vStr&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sr">/&amp;amp;gt;/g&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">vStr&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è½¬è¯‘html
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">StrToHtml&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">str&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">str&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">str&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&amp;amp;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="sr">/&amp;amp;amp;/g&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">str&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">str&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;&amp;#34;&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="sr">/&amp;amp;quot;/g&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">str&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">str&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="sr">/&amp;amp;#039;/g&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">str&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">str&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&amp;lt;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="sr">/&amp;amp;lt;/g&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">str&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">str&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="sr">/&amp;amp;gt;/g&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">str&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//æŒ‰é•¿åº¦æˆªå–ä¸­æ–‡å­—ç¬¦ä¸²
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">subs&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">str&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">len&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">l&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">s&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">var&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">str&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="nx">str&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">charCodeAt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">128&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="nx">l&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="nx">l&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">s&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="nx">str&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">charAt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">l&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="nx">len&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">s&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//è·å–httprequestå¯¹è±¡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">GetHttpRequest&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">window&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">XMLHttpRequest&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="c1">// Gecko
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">XMLHttpRequest&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">window&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ActiveXObject&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="c1">// IE
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">ActiveXObject&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;MsXml2.XmlHttp&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">load_js_url&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//åŠ è½½js
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">loadJs&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">_url&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">callback&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">arguments&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">||&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">function&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">load_js_url&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">_url&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">_script&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">$c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;SCRIPT&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_script&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">setAttribute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;text/javascript&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_script&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">setAttribute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;src&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_url&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">$t&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;head&amp;#34;&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="nx">appendChild&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">_script&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">all&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_script&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">onreadystatechange&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="sr">/onload|loaded|complete/&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">test&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">_script&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">readyState&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">callback&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">callback&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_script&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">onload&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">callback&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//å»ç©ºæ ¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">trim&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">str&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">str&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">null&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">str&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">str&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sr">/(^\s*)/g&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>phpæ³¨æ„æ­£åˆ™åŒ¹é…çš„é•¿åº¦é™åˆ¶</title><link>https://hitian.info/post/php-regex-length-limit/</link><pubDate>Mon, 22 Aug 2011 00:00:00 +0000</pubDate><guid>https://hitian.info/post/php-regex-length-limit/</guid><description>&lt;p>ä»Šå¤©è¦ä½¿ç”¨æ­£åˆ™æ¥æ‰¹é‡æ›¿æ¢ä¸€ä¸ªæŠ“å–é¡µé¢ä¸­çš„å›¾ç‰‡åœ°å€&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;?&lt;/span>&lt;span class="nx">php&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$nrjl&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">preg_replace_callback&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;#&amp;lt;img.*src=&amp;#34;([^&amp;#34;]+)&amp;#34;#isU&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;tianreplace&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$nrjl&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">function&lt;/span> &lt;span class="nf">tianreplace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$matches&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">substr&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$matches&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="s2">&amp;#34;http://&amp;#34;&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;img src=&amp;#34;&amp;#39;&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="nv">$matches&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="s1">&amp;#39;&amp;#34;&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">global&lt;/span> &lt;span class="nv">$this_domain&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="s1">&amp;#39;&amp;lt;img src=&amp;#34;http://&amp;#39;&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="nv">$this_domain&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="s1">&amp;#39;/&amp;#39;&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="nv">$matches&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="s1">&amp;#39;&amp;#34;&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">?&amp;gt;&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="na">ini_set(&amp;#39;pcre.backtrack_limit&amp;#39;, 10000000);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å°±æ­£å¸¸äº†.&lt;/p></description></item><item><title>jsæœ¬åœ°å­˜å‚¨å’Œcookieæ“ä½œ</title><link>https://hitian.info/post/js-localstorage/</link><pubDate>Sun, 21 Aug 2011 00:00:00 +0000</pubDate><guid>https://hitian.info/post/js-localstorage/</guid><description>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * tian
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//storage tools;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kd">var&lt;/span> &lt;span class="nx">st&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sset&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">storage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sget&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">storage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">sdel&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">storage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">del&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cset&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">c&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[],&lt;/span> &lt;span class="nx">_para&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="kd">var&lt;/span> &lt;span class="nx">d&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_len&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">arguments&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">d&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">_len&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">d&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">d&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">arguments&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">d&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_para&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">exps&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">typeof&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s2">&amp;#34;undefined&amp;#34;&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="nb">Math&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ceil&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">3600&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">24&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kc">undefined&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_para&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_para&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_para&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_para&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">domain&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_para&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">secure&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">storage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cookieStore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">_para&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cget&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">storage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cookieStore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cdel&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">storage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cookieStore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">del&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">storage&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_g&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="p">){&lt;/span>&lt;span class="k">return&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="p">);},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_c&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">){&lt;/span>&lt;span class="k">return&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createElement&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">);},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_domain&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">//è®¾ç½®cookieåŸŸå
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">_store&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_init&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">init&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">window&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">localStorage&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_store&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">localStore&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">navigator&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">userAgent&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">indexOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;MSIE&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_store&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ieStore&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_store&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">init&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cookieStore&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">init&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">set&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">checkInit&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_store&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">set&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">val&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="nx">b&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">get&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">checkInit&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_store&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">del&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">checkInit&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_store&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">del&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">isInit&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">checkInit&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_store&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_init&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">checkInit&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_init&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">init&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_store&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">isInit&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_store&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">init&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">localStore&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_init&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">init&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">get&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">localStorage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getItem&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">set&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">localStorage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">setItem&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">val&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">del&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">localStorage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">removeItem&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">isInit&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ieStore&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">exps&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="mi">180&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_init&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">init&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">isInit&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="o">!&lt;/span>&lt;span class="nx">storage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_g&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;_ieStore&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">store&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">storage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_c&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;INPUT&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">store&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;hidden&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">store&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;_ieStore&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">store&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">addBehavior&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;#default#userData&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">storage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_g&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;logo&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">appendChild&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">store&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//æ³¨æ„è¿™é‡Œçš„logo æ˜¯é¡µé¢é‡Œä¸€ä¸ªæ ‡ç­¾çš„id,ç”¨æ¥åˆ›å»ºuserdataçš„æ•°æ®è½½ä½“.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_init&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">storage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_g&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;_ieStore&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">store&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">storage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_g&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;_ieStore&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_init&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">get&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">store&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">catch&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">e&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">store&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getAttribute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;__store__&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">set&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">val&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_exps&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">typeof&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">exps&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s2">&amp;#34;undefined&amp;#34;&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">exps&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">:&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">exps&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">c&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nb">Date&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">setDate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getDate&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">_exps&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">store&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">store&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">expires&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">toUTCString&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">store&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">setAttribute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;__store__&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_val&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">store&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">save&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">del&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">set&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="nx">a&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">isInit&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_init&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">cookieStore&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_init&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_exps&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="mi">180&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_secure&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">init&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">isInit&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_domain&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">storage&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_domain&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_init&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">get&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_init&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">init&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cookie&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;; &amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;=&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="kd">var&lt;/span> &lt;span class="nx">c&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_len&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">c&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">_len&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">c&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="nx">indexOf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s2">&amp;#34;-1&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">try&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">decodeURIComponent&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="nx">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">catch&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">e&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">unescape&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">c&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="nx">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">set&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_init&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">init&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nb">Date&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">c&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_val&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">val&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_exps&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">typeof&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">exps&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s2">&amp;#34;undefined&amp;#34;&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">exps&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">:&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_exps&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_domain&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">domain&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_domain&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_path&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">path&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">||&lt;/span> &lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_secure&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">secure&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_secure&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">setDate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getDate&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">_exps&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">var&lt;/span> &lt;span class="nx">d&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">c&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;=&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">escape&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">_val&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">+&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">_exps&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s2">&amp;#34;;expires=&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">toUTCString&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">+&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">_path&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s2">&amp;#34;;path=&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">_path&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">+&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">_domain&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s2">&amp;#34;;domain=&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">_domain&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">+&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">_secure&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s2">&amp;#34;;secure=&amp;#34;&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cookie&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">d&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">del&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_init&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">init&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nb">String&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prototype&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">toLowerCase&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">apply&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">typeof&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;string&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">a&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="nx">_name&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">val&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">exps&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">a&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">secure&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">isInit&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="kd">function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_init&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>ç®€å•çš„mysqlè¡¨çº§é”</title><link>https://hitian.info/post/simple-mysql-table-level-locks/</link><pubDate>Tue, 12 Jul 2011 00:00:00 +0000</pubDate><guid>https://hitian.info/post/simple-mysql-table-level-locks/</guid><description>&lt;p>ç”±äºä¸šåŠ¡éœ€è¦, ä¸€ä¸ªè¡¨ä¸å…è®¸ä¸¤ä¸ªåŠä»¥ä¸Šç”¨æˆ·åŒæ—¶æ“ä½œ.ç”±äºæ˜¯mysql4.1 äº‹åŠ¡ç­‰é«˜çº§ç‰¹æ€§å°±ä¸ç”¨æƒ³äº†, å­˜å‚¨å¼•æ“ç»Ÿä¸€ä½¿ç”¨çš„MyISAM.å…¶å®è½¬æ¢æˆInnoDB å°±å¯ä»¥ä½¿ç”¨è¡Œçº§é”äº†, ä½†æ˜¯ç”±äºæ˜¯çº¿ä¸Šæ­£åœ¨ä½¿ç”¨çš„æ•°æ®åº“, æ•°æ®é‡æ¯”è¾ƒå¤§,è½¬æ¢æ€•å‡ºç°æ„å¤–. è¦å®ç°çš„åŠŸèƒ½åˆæ˜¯åœ¨åå°ä½¿ç”¨. æ‰€ä»¥å°±ç›´æ¥ä½¿ç”¨è¡¨çº§é”å®Œå…¨å¯ä»¥äº†.åœ¨mysqlä¸­å¯¹è¡¨åŠ é”å’Œè§£é”å…¶å®æŒºç®€å•çš„&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">LOCK&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">table_name&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">UNLOCK&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">TABLE&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>demo&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-php" data-lang="php">&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;?&lt;/span>&lt;span class="nx">php&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$db&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Mysql&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$db&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">open&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$db&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">query&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;lock table &amp;#34;&lt;/span> &lt;span class="o">.&lt;/span> &lt;span class="nv">$table&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$sql&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;SELECT * FROM &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">table&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2"> WHERE gid=&amp;#39;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">gid&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#39; AND sid IS NULL LIMIT 1&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$row&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$db&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">fetch&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$db&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">query&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$sql&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$success&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$re&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">array&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$row&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$row&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;id&amp;#39;&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$update_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">array&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;udate&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nx">date&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Y-m-d H:i:s&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;tuid&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$uid&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;operator&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$_COOKIE&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;admin_name&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;sid&amp;#39;&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="nv">$sid&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$db&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$this&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">table&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nv">$update_data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;id=&amp;#39;&lt;/span>&lt;span class="si">$id&lt;/span>&lt;span class="s2">&amp;#39;&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$db&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">getAffectedRows&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nv">$result&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$success&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$re&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">$row&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$msg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;å‘ç”Ÿé”™è¯¯: ç‰©å“åº“å­˜ä¿®æ”¹å¤±è´¥!&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">$msg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;åº“å­˜ä¸è¶³&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$db&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">query&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;unlock table&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">$db&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="na">close&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//return array($success, $msg, $re);
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Hello world!</title><link>https://hitian.info/post/hello-world/</link><pubDate>Thu, 07 Jul 2011 00:00:00 +0000</pubDate><guid>https://hitian.info/post/hello-world/</guid><description>&lt;p>ä»ä»Šå¤©èµ·å°±åœ¨è¿™é‡Œå®‰å®¶äº†ã€‚ä»¥å‰ä¹Ÿåœ¨å…¶å®ƒåœ°æ–¹å¼€è¿‡åšå®¢ï¼Œä½†æ˜¯éƒ½æ²¡è¿‡å¤šä¹…å°±åŠé€”è€ŒåºŸäº†ï¼Œå¸Œæœ›è¿™æ¬¡å¯ä»¥åšæŒä¸‹å»ã€‚&lt;/p>
&lt;p>tian2011.07.08äºåœ°é“å››å·çº¿&lt;/p></description></item></channel></rss>