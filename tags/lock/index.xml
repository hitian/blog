<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>lock on 不折腾不舒服</title><link>https://hitian.info/tags/lock/</link><description>Recent content in lock on 不折腾不舒服</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Thu, 01 Dec 2011 00:00:00 +0000</lastBuildDate><atom:link href="https://hitian.info/tags/lock/index.xml" rel="self" type="application/rss+xml"/><item><title>mysql表锁定中不支持清空操作?</title><link>https://hitian.info/post/mysql-table-lock/</link><pubDate>Thu, 01 Dec 2011 00:00:00 +0000</pubDate><guid>https://hitian.info/post/mysql-table-lock/</guid><description>偶然发现这个问题
mysql&amp;gt;locktabletest_mywrite;QueryOK,0rowsaffected(0.00sec)mysql&amp;gt;select*fromtest_my;Emptyset(0.00sec)mysql&amp;gt;insertintotest_myvalues(null,1,1);QueryOK,1rowaffected(0.00sec)mysql&amp;gt;select*fromtest_my;+—-+——+——–+|id|pid|enable|+—-+——+——–+|1|1|1|+—-+——+——–+1rowinset(0.00sec)mysql&amp;gt;truncatetabletest_my;ERROR1192(HY000):Can&amp;#39;t execute the given command because you have active lock ed tables or an active transaction TRUNCATE TABLE was not allowed under LOCK TABLES.
表锁中不可以使用清空操作, 这个让我很郁闷.
mysql&amp;gt;deletefromtest_my;QueryOK,1rowaffected(0.00sec)mysql&amp;gt;altertabletest_myauto_increment=1;QueryOK,0rowsaffected(0.05sec)Records:0Duplicates:0Warnings:0mysql&amp;gt;select*fromtest_my;Emptyset(0.00sec)mysql&amp;gt;insertintotest_myvalues(null,99,1);QueryOK,1rowaffected(0.00sec)mysql&amp;gt;select*fromtest_my;+—-+——+——–+|id|pid|enable|+—-+——+——–+|1|99|1|+—-+——+——–+1rowinset(0.00sec)mysql&amp;gt;分布操作: 先删除所有数据, 然后重新设置自增长的起始点却可以.</description></item></channel></rss>